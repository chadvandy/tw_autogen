<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
<head>
	<title>Unit</title>
	<link rel="stylesheet" href="../stylesheet.css" type="text/css" />
</head>

<body>

	<a name="top"></a>

	<div id="container">

		<div style="background-color:#e2edff" id="main">

			<div style="background-color:#e2edff" id="navigation_left">
				<br/>
				<h1 class="navigation_header"><i>Battle Documentation</i></h1>
				<a href="../index.html">Scripting Homepage</a>
				<h2 style="background-color:#c1e6ff">Search</h2>
				<ul>
				<form id="search_env_checkbox" class="search_env_checkbox">
					<label for="search_current_env_only">Search battle only</label>
					<input type="checkbox" name="search_current_env_only" checked /><br />
				</form>
				<form id="search" class="search_form" onsubmit="return false">
					<input class="search_input" type="text" placeholder="Search.."/><br />
					<div id="search_dropdown" class="search_dropdown"></div>
				</form>				<h2 style="background-color:#c1e6ff">Game Areas</h2>
				<ul>
					<li><a href="../campaign/campaign_index.html">Campaign Index</a></li>
					<li><strong> > Battle Index</strong></li>
					<li><a href="../frontend/frontend_index.html">Frontend Index</a></li>
				</ul>

				<h2 style="background-color:#c1e6ff">On this page</h2>
				<ul>
				<div class="key">
					<strong>Key</strong>
					<table class="key">
						<tr>
							<td width="75%">Loaded in Battle</td>
							<td><img alt="loaded in battle" style="float:right;" src="../images/loaded_in_battle.png" height="10" width="10" /></td>
						</tr>
						<tr>
							<td width="75%">Loaded in Campaign</td>
							<td><img alt="loaded in campaign" style="float:right;" src="../images/loaded_in_campaign.png" height="10" width="10" /></td>
						</tr>
						<tr>
							<td width="75%">Loaded in Frontend</td>
							<td><img alt="loaded in frontend" style="float:right;" src="../images/loaded_in_frontend.png" height="10" width="10" /></td>
						</tr>
					</table>
				</div>
					<li><a href="#class:battle_unit">Unit</a><img alt="loaded in battle" style="float:right; margin-right:1em;" src="../images/loaded_in_battle.png" height="10" width="10" /></li>
					<ul>
						<li>&emsp;&emsp;<a href="#section:battle_unit:Creation">Creation</a></li>
						<li>&emsp;&emsp;<a href="#section:battle_unit:Usage">Usage</a></li>
						<li>&emsp;&emsp;<a href="#section:battle_unit:Scriptunits and Generated Battles">Scriptunits and Generated Battles</a></li>
						<li>&emsp;&emsp;<a href="#section:battle_unit:Identification">Identification</a></li>
							<li>&emsp;&emsp;&emsp;&emsp;<a href="#function:battle_unit:name">name</a></li>
							<li>&emsp;&emsp;&emsp;&emsp;<a href="#function:battle_unit:unique_ui_id">unique_ui_id</a></li>
							<li>&emsp;&emsp;&emsp;&emsp;<a href="#function:battle_unit:type">type</a></li>
							<li>&emsp;&emsp;&emsp;&emsp;<a href="#function:battle_unit:alliance_index">alliance_index</a></li>
							<li>&emsp;&emsp;&emsp;&emsp;<a href="#function:battle_unit:army_index">army_index</a></li>
							<li>&emsp;&emsp;&emsp;&emsp;<a href="#function:battle_unit:unit_class">unit_class</a></li>
							<li>&emsp;&emsp;&emsp;&emsp;<a href="#function:battle_unit:is_cavalry">is_cavalry</a></li>
							<li>&emsp;&emsp;&emsp;&emsp;<a href="#function:battle_unit:is_infantry">is_infantry</a></li>
							<li>&emsp;&emsp;&emsp;&emsp;<a href="#function:battle_unit:is_artillery">is_artillery</a></li>
							<li>&emsp;&emsp;&emsp;&emsp;<a href="#function:battle_unit:is_limbered_artillery">is_limbered_artillery</a></li>
							<li>&emsp;&emsp;&emsp;&emsp;<a href="#function:battle_unit:is_commanding_unit">is_commanding_unit</a></li>
						<li>&emsp;&emsp;<a href="#section:battle_unit:Location and Movement">Location and Movement</a></li>
							<li>&emsp;&emsp;&emsp;&emsp;<a href="#function:battle_unit:position">position</a></li>
							<li>&emsp;&emsp;&emsp;&emsp;<a href="#function:battle_unit:ordered_position">ordered_position</a></li>
							<li>&emsp;&emsp;&emsp;&emsp;<a href="#function:battle_unit:can_reach_position">can_reach_position</a></li>
							<li>&emsp;&emsp;&emsp;&emsp;<a href="#function:battle_unit:bearing">bearing</a></li>
							<li>&emsp;&emsp;&emsp;&emsp;<a href="#function:battle_unit:ordered_bearing">ordered_bearing</a></li>
							<li>&emsp;&emsp;&emsp;&emsp;<a href="#function:battle_unit:ordered_width">ordered_width</a></li>
							<li>&emsp;&emsp;&emsp;&emsp;<a href="#function:battle_unit:position_of_officer">position_of_officer</a></li>
							<li>&emsp;&emsp;&emsp;&emsp;<a href="#function:battle_unit:unit_in_range">unit_in_range</a></li>
							<li>&emsp;&emsp;&emsp;&emsp;<a href="#function:battle_unit:unit_distance">unit_distance</a></li>
							<li>&emsp;&emsp;&emsp;&emsp;<a href="#function:battle_unit:is_moving">is_moving</a></li>
							<li>&emsp;&emsp;&emsp;&emsp;<a href="#function:battle_unit:is_moving_fast">is_moving_fast</a></li>
							<li>&emsp;&emsp;&emsp;&emsp;<a href="#function:battle_unit:is_idle">is_idle</a></li>
							<li>&emsp;&emsp;&emsp;&emsp;<a href="#function:battle_unit:is_leaving_battle">is_leaving_battle</a></li>
							<li>&emsp;&emsp;&emsp;&emsp;<a href="#function:battle_unit:is_valid_target">is_valid_target</a></li>
							<li>&emsp;&emsp;&emsp;&emsp;<a href="#function:battle_unit:is_currently_garrisoned">is_currently_garrisoned</a></li>
							<li>&emsp;&emsp;&emsp;&emsp;<a href="#function:battle_unit:is_currently_flying">is_currently_flying</a></li>
							<li>&emsp;&emsp;&emsp;&emsp;<a href="#function:battle_unit:can_fly">can_fly</a></li>
							<li>&emsp;&emsp;&emsp;&emsp;<a href="#function:battle_unit:has_ships">has_ships</a></li>
							<li>&emsp;&emsp;&emsp;&emsp;<a href="#function:battle_unit:is_dismounted_ships">is_dismounted_ships</a></li>
						<li>&emsp;&emsp;<a href="#section:battle_unit:Visibility">Visibility</a></li>
							<li>&emsp;&emsp;&emsp;&emsp;<a href="#function:battle_unit:is_hidden">is_hidden</a></li>
							<li>&emsp;&emsp;&emsp;&emsp;<a href="#function:battle_unit:is_visible_to_alliance">is_visible_to_alliance</a></li>
						<li>&emsp;&emsp;<a href="#section:battle_unit:Combat">Combat</a></li>
							<li>&emsp;&emsp;&emsp;&emsp;<a href="#function:battle_unit:is_under_missile_attack">is_under_missile_attack</a></li>
							<li>&emsp;&emsp;&emsp;&emsp;<a href="#function:battle_unit:is_in_melee">is_in_melee</a></li>
							<li>&emsp;&emsp;&emsp;&emsp;<a href="#function:battle_unit:number_of_enemies_killed">number_of_enemies_killed</a></li>
						<li>&emsp;&emsp;<a href="#section:battle_unit:Unit Strength">Unit Strength</a></li>
							<li>&emsp;&emsp;&emsp;&emsp;<a href="#function:battle_unit:initial_number_of_men">initial_number_of_men</a></li>
							<li>&emsp;&emsp;&emsp;&emsp;<a href="#function:battle_unit:number_of_men_alive">number_of_men_alive</a></li>
							<li>&emsp;&emsp;&emsp;&emsp;<a href="#function:battle_unit:unary_of_men_alive">unary_of_men_alive</a></li>
							<li>&emsp;&emsp;&emsp;&emsp;<a href="#function:battle_unit:kill_number_of_men">kill_number_of_men</a></li>
							<li>&emsp;&emsp;&emsp;&emsp;<a href="#function:battle_unit:unary_hitpoints">unary_hitpoints</a></li>
						<li>&emsp;&emsp;<a href="#section:battle_unit:Morale and Fatigue">Morale and Fatigue</a></li>
							<li>&emsp;&emsp;&emsp;&emsp;<a href="#function:battle_unit:is_wavering">is_wavering</a></li>
							<li>&emsp;&emsp;&emsp;&emsp;<a href="#function:battle_unit:is_routing">is_routing</a></li>
							<li>&emsp;&emsp;&emsp;&emsp;<a href="#function:battle_unit:is_rampaging">is_rampaging</a></li>
							<li>&emsp;&emsp;&emsp;&emsp;<a href="#function:battle_unit:is_shattered">is_shattered</a></li>
							<li>&emsp;&emsp;&emsp;&emsp;<a href="#function:battle_unit:is_left_flank_threatened">is_left_flank_threatened</a></li>
							<li>&emsp;&emsp;&emsp;&emsp;<a href="#function:battle_unit:is_right_flank_threatened">is_right_flank_threatened</a></li>
							<li>&emsp;&emsp;&emsp;&emsp;<a href="#function:battle_unit:is_rear_flank_threatened">is_rear_flank_threatened</a></li>
							<li>&emsp;&emsp;&emsp;&emsp;<a href="#function:battle_unit:fatigue_state">fatigue_state</a></li>
						<li>&emsp;&emsp;<a href="#section:battle_unit:Ammunition and Range">Ammunition and Range</a></li>
							<li>&emsp;&emsp;&emsp;&emsp;<a href="#function:battle_unit:ammo_left">ammo_left</a></li>
							<li>&emsp;&emsp;&emsp;&emsp;<a href="#function:battle_unit:starting_ammo">starting_ammo</a></li>
							<li>&emsp;&emsp;&emsp;&emsp;<a href="#function:battle_unit:set_current_ammo_unary">set_current_ammo_unary</a></li>
							<li>&emsp;&emsp;&emsp;&emsp;<a href="#function:battle_unit:missile_range">missile_range</a></li>
						<li>&emsp;&emsp;<a href="#section:battle_unit:Special Abilities">Special Abilities</a></li>
							<li>&emsp;&emsp;&emsp;&emsp;<a href="#function:battle_unit:can_perform_special_ability">can_perform_special_ability</a></li>
							<li>&emsp;&emsp;&emsp;&emsp;<a href="#function:battle_unit:can_use_magic">can_use_magic</a></li>
						<li>&emsp;&emsp;<a href="#section:battle_unit:Unit Behaviours">Unit Behaviours</a></li>
							<li>&emsp;&emsp;&emsp;&emsp;<a href="#function:battle_unit:can_use_behaviour">can_use_behaviour</a></li>
							<li>&emsp;&emsp;&emsp;&emsp;<a href="#function:battle_unit:is_behaviour_active">is_behaviour_active</a></li>
						<li>&emsp;&emsp;<a href="#section:battle_unit:Unit Attributes">Unit Attributes</a></li>
							<li>&emsp;&emsp;&emsp;&emsp;<a href="#function:battle_unit:set_stat_attribute">set_stat_attribute</a></li>
						<li>&emsp;&emsp;<a href="#section:battle_unit:Sounds">Sounds</a></li>
							<li>&emsp;&emsp;&emsp;&emsp;<a href="#function:battle_unit:trigger_sound_charge">trigger_sound_charge</a></li>
							<li>&emsp;&emsp;&emsp;&emsp;<a href="#function:battle_unit:trigger_sound_taunt">trigger_sound_taunt</a></li>
						<li>&emsp;&emsp;<a href="#section:battle_unit:Miscellaneous">Miscellaneous</a></li>
							<li>&emsp;&emsp;&emsp;&emsp;<a href="#function:battle_unit:play_anim_for_captain">play_anim_for_captain</a></li>
							<li>&emsp;&emsp;&emsp;&emsp;<a href="#function:battle_unit:deploy_reinforcement">deploy_reinforcement</a></li>
							<li>&emsp;&emsp;&emsp;&emsp;<a href="#function:battle_unit:select_in_ui">select_in_ui</a></li>
							<li>&emsp;&emsp;&emsp;&emsp;<a href="#function:battle_unit:mark_as_ally">mark_as_ally</a></li>
					</ul>

				</ul>
			</div>

			<div style="background-color:#e2edff" id="navigation_right">				<h2 style="background-color:#c1e6ff">Battle Topics</h2>
				<ul>
					<li><a href="battle_index.html">Battle Index</a></li>
					<li><a href="battle_hierarchy.html">Battle Hierarchy</a></li>
					<li><a href="lua.html">Lua Language</a></li>
					<li><a href="scripted_events.html">Scripted Events</a></li>

				</ul>

				<h2 style="background-color:#c1e6ff">Game Code Pages</h2>
				<ul>
					<li><a href="battle.html">Battle</a></li>
					<li><a href="battle_alliances.html">Alliances</a></li>
					<li><a href="battle_alliance.html">Alliance</a></li>
					<li><a href="battle_armies.html">Armies</a></li>
					<li><a href="battle_army.html">Army</a></li>
					<li><a href="battle_units.html">Units</a></li>
					<li><strong> > Unit</strong></li>
					<li><a href="battle_unitcontroller.html">Unitcontroller</a></li>
					<li><a href="ai_planner.html">AI Planners</a></li>
					<li><a href="battle_assault_equipment.html">Assault Equipment</a></li>
					<li><a href="battle_building.html">Building</a></li>
					<li><a href="battle_buildings.html">Buildings</a></li>
					<li><a href="battle_camera.html">Camera</a></li>
					<li><a href="battle_debug_drawing.html">Debug Drawing</a></li>
					<li><a href="battle_sound_effect.html">Sound Effects</a></li>
					<li><a href="battle_subtitles.html">Subtitles</a></li>
					<li><a href="battle_vector.html">Vector</a></li>
					<li><a href="effect.html">Effect</a></li>
					<li><a href="scriptedvalueregistry.html">ScriptedValueRegistry</a></li>
					<li><a href="uicomponent.html">UIComponents</a></li>

				</ul>

				<h2 style="background-color:#c1e6ff">Script Pages</h2>
				<ul>
					<li><a href="battle_manager.html">Battle Manager</a></li>
					<li><a href="core.html">Core</a></li>
					<li><a href="advice_manager.html">Advice Manager</a></li>
					<li><a href="battle_ui_manager.html">Battle UI Manager</a></li>
					<li><a href="convex_area.html">Convex Areas</a></li>
					<li><a href="cutscene.html">Battle Cutscenes</a></li>
					<li><a href="generated_battle.html">Generated Battle</a></li>
					<li><a href="global.html">Global</a></li>
					<li><a href="infotext_manager.html">Infotext Manager</a></li>
					<li><a href="objectives_manager.html">Objectives Manager</a></li>
					<li><a href="script_ai_planner.html">Script AI Planner</a></li>
					<li><a href="script_messager.html">Script Messager</a></li>
					<li><a href="script_unit.html">Script Unit</a></li>
					<li><a href="text_pointer.html">Text Pointers</a></li>
					<li><a href="timer_manager.html">Timer Manager</a></li>

				</ul>
			</div>

			<div id="content">
				<a name="class:battle_unit"><h1 class="content_header">Unit</h1></a>
				<p>A <code>unit</code> object may be created in script to represent a logical unit of soldiers taking part in the battle. The unit object interface permits querying of the state of the unit - to issue orders to the unit a <code><a href="battle_unitcontroller.html#class:battle_unitcontroller">battle_unitcontroller</a></code> object must be created to which the unit object may then be associated.</p>
							<table class="loaded_in" style="margin-top: 1em;">
								<tr>
									<td>
										Loaded in Battle
									</td>
									<td>
										<img alt="loaded in battle" style="float:right;" src="../images/loaded_in_battle.png" height="18" width="18" />
									</td>
								</tr>
							</table>

				<div>
					<a style="float:right;" href="#top">Back to top</a>
					<a name="section:battle_unit:Creation"><h2 class="section_header">Creation</h2></a>
				</div>
				<p>Unit objects are created from the <code><a href="battle_hierarchy.html#class:battle_hierarchy">battle_hierarchy</a></code>. They appear at the bottom of this hierarchy - see the <code><a href="battle_hierarchy.html#class:battle_hierarchy">battle_hierarchy</a></code> page for more information on how <code>unit</code> objects relate to (and are created from) armies and alliances. Alternatively, and preferably, see the section on scriptunits below for a shorthand method of unit object creation.</p>
				<div class="section_body">
				</div>


				<div>
					<a style="float:right;" href="#top">Back to top</a>
					<a name="section:battle_unit:Usage"><h2 class="section_header">Usage</h2></a>
				</div>
				<p>Once a handle to a sound effect object is obtained, functions may be called on it to query or modify its state in the following form.</p>

				<h4>Example - Specification:</h4>
				<div id="example_code"><code>
					 <i>&lt;object_name&gt;</i>:<i>&lt;function_name&gt;</i>(<i>&lt;args&gt;</i>)<br />
				</code></div>

				<h4>Example - Creation and Usage:</h4>
				<div id="example_code"><code>
					 local sfx_01 = battle_sound_effect:new()<br />
					 sfx_01:load("test_sound_event")&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;-- calling a function on the object once created<br />
				</code></div>
				<div class="section_body">
				</div>


				<div>
					<a style="float:right;" href="#top">Back to top</a>
					<a name="section:battle_unit:Scriptunits and Generated Battles"><h2 class="section_header">Scriptunits and Generated Battles</h2></a>
				</div>
				<p>It is highly recommended for client scripts to work with <code><a href="script_unit.html#class:script_unit">script_unit</a></code> objects through the interface provided by the script libraries rather than attempting to manage <code>unit</code> objects individually. By creating a <code><a href="script_unit.html#class:script_unit">script_unit</a></code> object, a <code>unit</code> object is automatically created and can be accessed at <code>&lt;script_unit&gt;.unit</code>. See the <code><a href="script_unit.html#class:script_unit">script_unit</a></code> documentation for more information.</p>
				<p>Alternatively the <code><a href="generated_battle.html#class:generated_battle">generated_battle</a></code> script framework can be used. This automatically creates <code><a href="script_unit.html#class:script_unit">script_unit</a></code> objects (with associated unit objects) and negates the need to set up references to anything more granular than an army.</p>
				<div class="section_body">
				</div>


				<div>
					<a style="float:right;" href="#top">Back to top</a>
					<a name="section:battle_unit:Identification"><h2 class="section_header">Identification</h2></a>
				</div>
				<div class="section_body">
					<dl class="function">
						<dt>
							<a name="function:battle_unit:name"><h3 class="function_name"><strong><code>unit:name()</code></strong></h3></a>
						</dt>
						<dd>
							Returns the script name for the unit, if any has been set. A script name for the unit may be set in the battle setup, either in the battle xml or on the appropriate record in the <code>battle_set_piece_armies_units_junctions</code> table if setting up a set-piece/quest battle. It is valid for multiple units in a given army to have the same script name.


							<h4>Returns:</h4>
							<ol>
								<li><code><code><a href="lua.html#class:string">string</a></code></code> script name</li>
							</ol>
						</dd>
					</dl>
					<dl class="function">
						<dt>
							<a name="function:battle_unit:unique_ui_id"><h3 class="function_name"><strong><code>unit:unique_ui_id()</code></strong></h3></a>
						</dt>
						<dd>
							Returns the unique ui id for the unit, which should match the name of the corresponding unit card.


							<h4>Returns:</h4>
							<ol>
								<li><code><code><a href="lua.html#class:number">number</a></code></code> ui ud</li>
							</ol>
						</dd>
					</dl>
					<dl class="function">
						<dt>
							<a name="function:battle_unit:type"><h3 class="function_name"><strong><code>unit:type()</code></strong></h3></a>
						</dt>
						<dd>
							Returns the unit type of the unit, from the <code>land_units</code> table.


							<h4>Returns:</h4>
							<ol>
								<li><code><code><a href="lua.html#class:string">string</a></code></code> unit type</li>
							</ol>
						</dd>
					</dl>
					<dl class="function">
						<dt>
							<a name="function:battle_unit:alliance_index"><h3 class="function_name"><strong><code>unit:alliance_index()</code></strong></h3></a>
						</dt>
						<dd>
							Returns the index number of the alliance the unit belongs to, allowing its <code><a href="battle_alliance.html#class:battle_alliance">battle_alliance</a></code> to be determined or looked up from a <code><a href="battle_alliances.html#class:battle_alliances">battle_alliances</a></code> object.


							<h4>Returns:</h4>
							<ol>
								<li><code><code><a href="lua.html#class:number">number</a></code></code> alliance index</li>
							</ol>
						</dd>
					</dl>
					<dl class="function">
						<dt>
							<a name="function:battle_unit:army_index"><h3 class="function_name"><strong><code>unit:army_index()</code></strong></h3></a>
						</dt>
						<dd>
							Returns the index number of the army the unit belongs to, allowing its <code><a href="battle_army.html#class:battle_army">battle_army</a></code> to be determined or looked up from a <code><a href="battle_armies.html#class:battle_armies">battle_armies</a></code> object (which itself can be determined from the value returned by <code><a href="#function:battle_unit:alliance_index">unit:alliance_index</a></code>).


							<h4>Returns:</h4>
							<ol>
								<li><code><code><a href="lua.html#class:number">number</a></code></code> army index</li>
							</ol>
						</dd>
					</dl>
					<dl class="function">
						<dt>
							<a name="function:battle_unit:unit_class"><h3 class="function_name"><strong><code>unit:unit_class()</code></strong></h3></a>
						</dt>
						<dd>
							Returns the class of the unit, from the <code>land_units</code> table.


							<h4>Returns:</h4>
							<ol>
								<li><code><code><a href="lua.html#class:string">string</a></code></code> unit class</li>
							</ol>
						</dd>
					</dl>
					<dl class="function">
						<dt>
							<a name="function:battle_unit:is_cavalry"><h3 class="function_name"><strong><code>unit:is_cavalry()</code></strong></h3></a>
						</dt>
						<dd>
							Returns whether the unit is cavalry.


							<h4>Returns:</h4>
							<ol>
								<li><code><code><a href="lua.html#class:boolean">boolean</a></code></code> is cavalry</li>
							</ol>
						</dd>
					</dl>
					<dl class="function">
						<dt>
							<a name="function:battle_unit:is_infantry"><h3 class="function_name"><strong><code>unit:is_infantry()</code></strong></h3></a>
						</dt>
						<dd>
							Returns whether the unit is infantry.


							<h4>Returns:</h4>
							<ol>
								<li><code><code><a href="lua.html#class:boolean">boolean</a></code></code> is infantry</li>
							</ol>
						</dd>
					</dl>
					<dl class="function">
						<dt>
							<a name="function:battle_unit:is_artillery"><h3 class="function_name"><strong><code>unit:is_artillery()</code></strong></h3></a>
						</dt>
						<dd>
							Returns whether the unit is artillery.


							<h4>Returns:</h4>
							<ol>
								<li><code><code><a href="lua.html#class:boolean">boolean</a></code></code> is artillery</li>
							</ol>
						</dd>
					</dl>
					<dl class="function">
						<dt>
							<a name="function:battle_unit:is_limbered_artillery"><h3 class="function_name"><strong><code>unit:is_limbered_artillery()</code></strong></h3></a>
						</dt>
						<dd>
							Returns whether the unit is artillery in a limbered state (i.e. it can move but not fire).


							<h4>Returns:</h4>
							<ol>
								<li><code><code><a href="lua.html#class:boolean">boolean</a></code></code> is limbered artillery</li>
							</ol>
						</dd>
					</dl>
					<dl class="function">
						<dt>
							<a name="function:battle_unit:is_commanding_unit"><h3 class="function_name"><strong><code>unit:is_commanding_unit()</code></strong></h3></a>
						</dt>
						<dd>
							Returns whether this is the commanding unit of the army.


							<h4>Returns:</h4>
							<ol>
								<li><code><code><a href="lua.html#class:boolean">boolean</a></code></code> is commanding</li>
							</ol>
						</dd>
					</dl>
				</div>


				<div>
					<a style="float:right;" href="#top">Back to top</a>
					<a name="section:battle_unit:Location and Movement"><h2 class="section_header">Location and Movement</h2></a>
				</div>
				<div class="section_body">
					<dl class="function">
						<dt>
							<a name="function:battle_unit:position"><h3 class="function_name"><strong><code>unit:position()</code></strong></h3></a>
						</dt>
						<dd>
							Returns the centre position of the main squad of the unit.


							<h4>Returns:</h4>
							<ol>
								<li><code><code><a href="battle_vector.html#class:battle_vector">battle_vector</a></code></code> position</li>
							</ol>
						</dd>
					</dl>
					<dl class="function">
						<dt>
							<a name="function:battle_unit:ordered_position"><h3 class="function_name"><strong><code>unit:ordered_position()</code></strong></h3></a>
						</dt>
						<dd>
							Returns the position to which the unit has been ordered to move to. Note that if the unit is attacking, as opposed to moving, then this will return the current position of the unit.


							<h4>Returns:</h4>
							<ol>
								<li><code><code><a href="battle_vector.html#class:battle_vector">battle_vector</a></code></code> ordered position</li>
							</ol>
						</dd>
					</dl>
					<dl class="function">
						<dt>
							<a name="function:battle_unit:can_reach_position"><h3 class="function_name"><strong><code>unit:can_reach_position(<code><a href="battle_vector.html#class:battle_vector">battle_vector</a></code> </strong></code><i class="parameter">position</i><code><strong>)</code></strong></h3></a>
						</dt>
						<dd>
							Returns whether the unit can reach the supplied position.

							<h4>Parameters:</h4>
							<table class="parameter_list">
								<colgroup>
									<col style="width: 3%;">
									<col style="width: 12%;">
									<col style="width: 85%;">
								</colgroup>
								<tr>
									<td>
										<p><strong>1</strong></p>
									</td>
									<td>
										<p><code><code><a href="battle_vector.html#class:battle_vector">battle_vector</a></code></code></p>
									</td>
									<td>
										<p>position</p>
									</td>
								</tr>
							</table>

							<h4>Returns:</h4>
							<ol>
								<li><code><code><a href="lua.html#class:boolean">boolean</a></code></code> can reach</li>
							</ol>
						</dd>
					</dl>
					<dl class="function">
						<dt>
							<a name="function:battle_unit:bearing"><h3 class="function_name"><strong><code>unit:bearing()</code></strong></h3></a>
						</dt>
						<dd>
							Returns the current orientation of the main squad of the unit in degrees.


							<h4>Returns:</h4>
							<ol>
								<li><code><code><a href="lua.html#class:number">number</a></code></code> orientation</li>
							</ol>
						</dd>
					</dl>
					<dl class="function">
						<dt>
							<a name="function:battle_unit:ordered_bearing"><h3 class="function_name"><strong><code>unit:ordered_bearing()</code></strong></h3></a>
						</dt>
						<dd>
							Returns the orientation of the position to which the unit has been ordered in degrees.


							<h4>Returns:</h4>
							<ol>
								<li><code><code><a href="lua.html#class:number">number</a></code></code> orientation</li>
							</ol>
						</dd>
					</dl>
					<dl class="function">
						<dt>
							<a name="function:battle_unit:ordered_width"><h3 class="function_name"><strong><code>unit:ordered_width()</code></strong></h3></a>
						</dt>
						<dd>
							Returns the width of the position to which the unit has been ordered in metres.


							<h4>Returns:</h4>
							<ol>
								<li><code><code><a href="lua.html#class:number">number</a></code></code> width</li>
							</ol>
						</dd>
					</dl>
					<dl class="function">
						<dt>
							<a name="function:battle_unit:position_of_officer"><h3 class="function_name"><strong><code>unit:position_of_officer()</code></strong></h3></a>
						</dt>
						<dd>
							Returns the position of the commanding officer of the unit.


							<h4>Returns:</h4>
							<ol>
								<li><code><code><a href="battle_vector.html#class:battle_vector">battle_vector</a></code></code> officer position</li>
							</ol>
						</dd>
					</dl>
					<dl class="function">
						<dt>
							<a name="function:battle_unit:unit_in_range"><h3 class="function_name"><strong><code>unit:unit_in_range(<code><a href="#class:battle_unit">battle_unit</a></code> </strong></code><i class="parameter">target unit</i><code><strong>)</code></strong></h3></a>
						</dt>
						<dd>
							Returns whether the supplied unit is in missile range of this unit.

							<h4>Parameters:</h4>
							<table class="parameter_list">
								<colgroup>
									<col style="width: 3%;">
									<col style="width: 12%;">
									<col style="width: 85%;">
								</colgroup>
								<tr>
									<td>
										<p><strong>1</strong></p>
									</td>
									<td>
										<p><code><code><a href="#class:battle_unit">battle_unit</a></code></code></p>
									</td>
									<td>
										<p>target unit</p>
									</td>
								</tr>
							</table>

							<h4>Returns:</h4>
							<ol>
								<li><code><code><a href="lua.html#class:boolean">boolean</a></code></code> is in range</li>
							</ol>
						</dd>
					</dl>
					<dl class="function">
						<dt>
							<a name="function:battle_unit:unit_distance"><h3 class="function_name"><strong><code>unit:unit_distance(<code><a href="#class:battle_unit">battle_unit</a></code> </strong></code><i class="parameter">target unit</i><code><strong>)</code></strong></h3></a>
						</dt>
						<dd>
							Returns the shortest distance in metres between this unit and a supplied unit, taking into account their bounding box rather than just working out the centre-to-centre distance.

							<h4>Parameters:</h4>
							<table class="parameter_list">
								<colgroup>
									<col style="width: 3%;">
									<col style="width: 12%;">
									<col style="width: 85%;">
								</colgroup>
								<tr>
									<td>
										<p><strong>1</strong></p>
									</td>
									<td>
										<p><code><code><a href="#class:battle_unit">battle_unit</a></code></code></p>
									</td>
									<td>
										<p>target unit</p>
									</td>
								</tr>
							</table>

							<h4>Returns:</h4>
							<ol>
								<li><code><code><a href="lua.html#class:number">number</a></code></code> shortest distance</li>
							</ol>
						</dd>
					</dl>
					<dl class="function">
						<dt>
							<a name="function:battle_unit:is_moving"><h3 class="function_name"><strong><code>unit:is_moving()</code></strong></h3></a>
						</dt>
						<dd>
							Returns whether the unit is moving.


							<h4>Returns:</h4>
							<ol>
								<li><code><code><a href="lua.html#class:boolean">boolean</a></code></code> is moving</li>
							</ol>
						</dd>
					</dl>
					<dl class="function">
						<dt>
							<a name="function:battle_unit:is_moving_fast"><h3 class="function_name"><strong><code>unit:is_moving_fast()</code></strong></h3></a>
						</dt>
						<dd>
							Returns whether the unit is moving fast (running/charging).


							<h4>Returns:</h4>
							<ol>
								<li><code><code><a href="lua.html#class:boolean">boolean</a></code></code> is moving fast</li>
							</ol>
						</dd>
					</dl>
					<dl class="function">
						<dt>
							<a name="function:battle_unit:is_idle"><h3 class="function_name"><strong><code>unit:is_idle()</code></strong></h3></a>
						</dt>
						<dd>
							Returns whether the unit is currently idle.


							<h4>Returns:</h4>
							<ol>
								<li><code><code><a href="lua.html#class:boolean">boolean</a></code></code> is idle</li>
							</ol>
						</dd>
					</dl>
					<dl class="function">
						<dt>
							<a name="function:battle_unit:is_leaving_battle"><h3 class="function_name"><strong><code>unit:is_leaving_battle()</code></strong></h3></a>
						</dt>
						<dd>
							Returns whether the unit is currently leaving the battlefield.


							<h4>Returns:</h4>
							<ol>
								<li><code><code><a href="lua.html#class:boolean">boolean</a></code></code> is leaving battle</li>
							</ol>
						</dd>
					</dl>
					<dl class="function">
						<dt>
							<a name="function:battle_unit:is_valid_target"><h3 class="function_name"><strong><code>unit:is_valid_target()</code></strong></h3></a>
						</dt>
						<dd>
							Returns whether this unit is currently a valid target for enemies to attack. A unit might be invalid if they are entering or leaving the battlefield, hidden, or dead.


							<h4>Returns:</h4>
							<ol>
								<li><code><code><a href="lua.html#class:boolean">boolean</a></code></code> is valid target</li>
							</ol>
						</dd>
					</dl>
					<dl class="function">
						<dt>
							<a name="function:battle_unit:is_currently_garrisoned"><h3 class="function_name"><strong><code>unit:is_currently_garrisoned()</code></strong></h3></a>
						</dt>
						<dd>
							Returns whether the unit is currently garrisoned in a building.


							<h4>Returns:</h4>
							<ol>
								<li><code><code><a href="lua.html#class:boolean">boolean</a></code></code> is garrisoned</li>
							</ol>
						</dd>
					</dl>
					<dl class="function">
						<dt>
							<a name="function:battle_unit:is_currently_flying"><h3 class="function_name"><strong><code>unit:is_currently_flying()</code></strong></h3></a>
						</dt>
						<dd>
							Returns whether the unit can fly and is currently flying.


							<h4>Returns:</h4>
							<ol>
								<li><code><code><a href="lua.html#class:boolean">boolean</a></code></code> is flying</li>
							</ol>
						</dd>
					</dl>
					<dl class="function">
						<dt>
							<a name="function:battle_unit:can_fly"><h3 class="function_name"><strong><code>unit:can_fly()</code></strong></h3></a>
						</dt>
						<dd>
							Returns whether the unit can fly.


							<h4>Returns:</h4>
							<ol>
								<li><code><code><a href="lua.html#class:boolean">boolean</a></code></code> can fly</li>
							</ol>
						</dd>
					</dl>
					<dl class="function">
						<dt>
							<a name="function:battle_unit:has_ships"><h3 class="function_name"><strong><code>unit:has_ships()</code></strong></h3></a>
						</dt>
						<dd>
							Returns whether the unit is currently on a ship.


							<h4>Returns:</h4>
							<ol>
								<li><code><code><a href="lua.html#class:boolean">boolean</a></code></code> is on a ship</li>
							</ol>
						</dd>
					</dl>
					<dl class="function">
						<dt>
							<a name="function:battle_unit:is_dismounted_ships"><h3 class="function_name"><strong><code>unit:is_dismounted_ships()</code></strong></h3></a>
						</dt>
						<dd>
							Returns whether the unit has a ship but is not currently on it.


							<h4>Returns:</h4>
							<ol>
								<li><code><code><a href="lua.html#class:boolean">boolean</a></code></code> dismounted from ship</li>
							</ol>
						</dd>
					</dl>
				</div>


				<div>
					<a style="float:right;" href="#top">Back to top</a>
					<a name="section:battle_unit:Visibility"><h2 class="section_header">Visibility</h2></a>
				</div>
				<div class="section_body">
					<dl class="function">
						<dt>
							<a name="function:battle_unit:is_hidden"><h3 class="function_name"><strong><code>unit:is_hidden()</code></strong></h3></a>
						</dt>
						<dd>
							Returns whether the unit is currently hidden in tall grass/trees. Note that this is a separate test from the unit being obscured from the enemy behind hills or other terrain features.


							<h4>Returns:</h4>
							<ol>
								<li><code><code><a href="lua.html#class:boolean">boolean</a></code></code> is hidden</li>
							</ol>
						</dd>
					</dl>
					<dl class="function">
						<dt>
							<a name="function:battle_unit:is_visible_to_alliance"><h3 class="function_name"><strong><code>unit:is_visible_to_alliance(<code><a href="battle_alliance.html#class:battle_alliance">battle_alliance</a></code> </strong></code><i class="parameter">alliance</i><code><strong>)</code></strong></h3></a>
						</dt>
						<dd>
							Returns whether the unit is visible to a supplied alliance. This returns the last calculated result of the line-of-sight test that determines whether a unit is obscured from its enemy by terrain features.

							<h4>Parameters:</h4>
							<table class="parameter_list">
								<colgroup>
									<col style="width: 3%;">
									<col style="width: 12%;">
									<col style="width: 85%;">
								</colgroup>
								<tr>
									<td>
										<p><strong>1</strong></p>
									</td>
									<td>
										<p><code><code><a href="battle_alliance.html#class:battle_alliance">battle_alliance</a></code></code></p>
									</td>
									<td>
										<p>alliance</p>
									</td>
								</tr>
							</table>

							<h4>Returns:</h4>
							<ol>
								<li><code><code><a href="lua.html#class:boolean">boolean</a></code></code> is visible to alliance</li>
							</ol>
						</dd>
					</dl>
				</div>


				<div>
					<a style="float:right;" href="#top">Back to top</a>
					<a name="section:battle_unit:Combat"><h2 class="section_header">Combat</h2></a>
				</div>
				<div class="section_body">
					<dl class="function">
						<dt>
							<a name="function:battle_unit:is_under_missile_attack"><h3 class="function_name"><strong><code>unit:is_under_missile_attack()</code></strong></h3></a>
						</dt>
						<dd>
							Returns whether the unit is currently taking fire.


							<h4>Returns:</h4>
							<ol>
								<li><code><code><a href="lua.html#class:boolean">boolean</a></code></code> taking fire</li>
							</ol>
						</dd>
					</dl>
					<dl class="function">
						<dt>
							<a name="function:battle_unit:is_in_melee"><h3 class="function_name"><strong><code>unit:is_in_melee()</code></strong></h3></a>
						</dt>
						<dd>
							Returns whether the unit is currently in melee combat.


							<h4>Returns:</h4>
							<ol>
								<li><code><code><a href="lua.html#class:boolean">boolean</a></code></code> in melee</li>
							</ol>
						</dd>
					</dl>
					<dl class="function">
						<dt>
							<a name="function:battle_unit:number_of_enemies_killed"><h3 class="function_name"><strong><code>unit:number_of_enemies_killed()</code></strong></h3></a>
						</dt>
						<dd>
							Returns the number of enemy combatants this unit has killed in this battle.


							<h4>Returns:</h4>
							<ol>
								<li><code><code><a href="lua.html#class:number">number</a></code></code> number killed</li>
							</ol>
						</dd>
					</dl>
				</div>


				<div>
					<a style="float:right;" href="#top">Back to top</a>
					<a name="section:battle_unit:Unit Strength"><h2 class="section_header">Unit Strength</h2></a>
				</div>
				<div class="section_body">
					<dl class="function">
						<dt>
							<a name="function:battle_unit:initial_number_of_men"><h3 class="function_name"><strong><code>unit:initial_number_of_men()</code></strong></h3></a>
						</dt>
						<dd>
							Returns the number of soldiers the unit started the battle with.


							<h4>Returns:</h4>
							<ol>
								<li><code><code><a href="lua.html#class:number">number</a></code></code> initial unit size</li>
							</ol>
						</dd>
					</dl>
					<dl class="function">
						<dt>
							<a name="function:battle_unit:number_of_men_alive"><h3 class="function_name"><strong><code>unit:number_of_men_alive()</code></strong></h3></a>
						</dt>
						<dd>
							Returns the number of soldiers currently alive in the unit.


							<h4>Returns:</h4>
							<ol>
								<li><code><code><a href="lua.html#class:number">number</a></code></code> current unit size</li>
							</ol>
						</dd>
					</dl>
					<dl class="function">
						<dt>
							<a name="function:battle_unit:unary_of_men_alive"><h3 class="function_name"><strong><code>unit:unary_of_men_alive()</code></strong></h3></a>
						</dt>
						<dd>
							Returns the number of soldiers currently alive in the unit, expressed as a unary fraction of the the initial size of the unit. A returned value of 0.75 would indicate that 25% of the soldiers in the unit that started the battle have died.


							<h4>Returns:</h4>
							<ol>
								<li><code><code><a href="lua.html#class:number">number</a></code></code> unary proportion</li>
							</ol>
						</dd>
					</dl>
					<dl class="function">
						<dt>
							<a name="function:battle_unit:kill_number_of_men"><h3 class="function_name"><strong><code>unit:kill_number_of_men(<code><a href="lua.html#class:number">number</a></code> </strong></code><i class="parameter">soldiers to kill</i><code><strong>, [<code><a href="lua.html#class:boolean">boolean</a></code> </strong></code><i class="parameter">hide bodies</i><code><strong>])</code></strong></h3></a>
						</dt>
						<dd>
							Kills a specified number of soldiers in the unit. The optional second argument allows their bodies to be hidden - this is useful if it's desired that the unit 'disappear'.

							<h4>Parameters:</h4>
							<table class="parameter_list">
								<colgroup>
									<col style="width: 3%;">
									<col style="width: 12%;">
									<col style="width: 85%;">
								</colgroup>
								<tr>
									<td>
										<p><strong>1</strong></p>
									</td>
									<td>
										<p><code><code><a href="lua.html#class:number">number</a></code></code></p>
									</td>
									<td>
										<p>soldiers to kill</p>
									</td>
								</tr>
								<tr>
									<td>
										<p><strong>2</strong></p>
									</td>
									<td>
										<p><code><code><a href="lua.html#class:boolean">boolean</a></code></code></p>
									</td>
									<td>
										<p><i>optional, default value=false</i></p>
										<p>hide bodies</p>
									</td>
								</tr>
							</table>

							<h4>Returns:</h4>
							<ol>
								<li><code>nil</code></li>
							</ol>
						</dd>
					</dl>
					<dl class="function">
						<dt>
							<a name="function:battle_unit:unary_hitpoints"><h3 class="function_name"><strong><code>unit:unary_hitpoints()</code></strong></h3></a>
						</dt>
						<dd>
							Returns the hitpoint strength of all soldiers in the unit, expressed as a unary fraction of the the initial hitpoint strength of the unit. A returned value of 0.75 would indicate that the unit has lost 25% of the hitpoints it started the battle with.


							<h4>Returns:</h4>
							<ol>
								<li><code><code><a href="lua.html#class:number">number</a></code></code> unary proportion</li>
							</ol>
						</dd>
					</dl>
				</div>


				<div>
					<a style="float:right;" href="#top">Back to top</a>
					<a name="section:battle_unit:Morale and Fatigue"><h2 class="section_header">Morale and Fatigue</h2></a>
				</div>
				<div class="section_body">
					<dl class="function">
						<dt>
							<a name="function:battle_unit:is_wavering"><h3 class="function_name"><strong><code>unit:is_wavering()</code></strong></h3></a>
						</dt>
						<dd>
							Returns whether the morale of the unit is currently wavering.


							<h4>Returns:</h4>
							<ol>
								<li><code><code><a href="lua.html#class:boolean">boolean</a></code></code> is wavering</li>
							</ol>
						</dd>
					</dl>
					<dl class="function">
						<dt>
							<a name="function:battle_unit:is_routing"><h3 class="function_name"><strong><code>unit:is_routing()</code></strong></h3></a>
						</dt>
						<dd>
							Returns whether the unit is currently routing.


							<h4>Returns:</h4>
							<ol>
								<li><code><code><a href="lua.html#class:boolean">boolean</a></code></code> is routing</li>
							</ol>
						</dd>
					</dl>
					<dl class="function">
						<dt>
							<a name="function:battle_unit:is_rampaging"><h3 class="function_name"><strong><code>unit:is_rampaging()</code></strong></h3></a>
						</dt>
						<dd>
							Returns whether the unit is currently rampaging.


							<h4>Returns:</h4>
							<ol>
								<li><code><code><a href="lua.html#class:boolean">boolean</a></code></code> is rampaging</li>
							</ol>
						</dd>
					</dl>
					<dl class="function">
						<dt>
							<a name="function:battle_unit:is_shattered"><h3 class="function_name"><strong><code>unit:is_shattered()</code></strong></h3></a>
						</dt>
						<dd>
							Returns whether the unit is currently shattered (routing without possibility of return).


							<h4>Returns:</h4>
							<ol>
								<li><code><code><a href="lua.html#class:boolean">boolean</a></code></code> is shattered</li>
							</ol>
						</dd>
					</dl>
					<dl class="function">
						<dt>
							<a name="function:battle_unit:is_left_flank_threatened"><h3 class="function_name"><strong><code>unit:is_left_flank_threatened()</code></strong></h3></a>
						</dt>
						<dd>
							Returns whether the left flank of the unit is currently threatened by the enemy.


							<h4>Returns:</h4>
							<ol>
								<li><code><code><a href="lua.html#class:boolean">boolean</a></code></code> left flank threatened</li>
							</ol>
						</dd>
					</dl>
					<dl class="function">
						<dt>
							<a name="function:battle_unit:is_right_flank_threatened"><h3 class="function_name"><strong><code>unit:is_right_flank_threatened()</code></strong></h3></a>
						</dt>
						<dd>
							Returns whether the right flank of the unit is currently threatened by the enemy.


							<h4>Returns:</h4>
							<ol>
								<li><code><code><a href="lua.html#class:boolean">boolean</a></code></code> left right threatened</li>
							</ol>
						</dd>
					</dl>
					<dl class="function">
						<dt>
							<a name="function:battle_unit:is_rear_flank_threatened"><h3 class="function_name"><strong><code>unit:is_rear_flank_threatened()</code></strong></h3></a>
						</dt>
						<dd>
							Returns whether the rear of the unit is currently threatened by the enemy.


							<h4>Returns:</h4>
							<ol>
								<li><code><code><a href="lua.html#class:boolean">boolean</a></code></code> rear threatened</li>
							</ol>
						</dd>
					</dl>
					<dl class="function">
						<dt>
							<a name="function:battle_unit:fatigue_state"><h3 class="function_name"><strong><code>unit:fatigue_state()</code></strong></h3></a>
						</dt>
						<dd>
							Returns the fatigue state of the unit as a string. Possible values are <code>threshold_fresh</code>, <code>threshold_active</code>, <code>threshold_winded</code>, <code>threshold_tired</code>, <code>threshold_very_tired</code> and <code>threshold_exhausted</code>.


							<h4>Returns:</h4>
							<ol>
								<li><code><code><a href="lua.html#class:string">string</a></code></code> fatigue state</li>
							</ol>
						</dd>
					</dl>
				</div>


				<div>
					<a style="float:right;" href="#top">Back to top</a>
					<a name="section:battle_unit:Ammunition and Range"><h2 class="section_header">Ammunition and Range</h2></a>
				</div>
				<div class="section_body">
					<dl class="function">
						<dt>
							<a name="function:battle_unit:ammo_left"><h3 class="function_name"><strong><code>unit:ammo_left()</code></strong></h3></a>
						</dt>
						<dd>
							Returns the remaining ammunition count of this unit.


							<h4>Returns:</h4>
							<ol>
								<li><code><code><a href="lua.html#class:number">number</a></code></code> current ammunition</li>
							</ol>
						</dd>
					</dl>
					<dl class="function">
						<dt>
							<a name="function:battle_unit:starting_ammo"><h3 class="function_name"><strong><code>unit:starting_ammo()</code></strong></h3></a>
						</dt>
						<dd>
							Returns the amount of ammunition the unit started the battle with.


							<h4>Returns:</h4>
							<ol>
								<li><code><code><a href="lua.html#class:number">number</a></code></code> starting ammunition</li>
							</ol>
						</dd>
					</dl>
					<dl class="function">
						<dt>
							<a name="function:battle_unit:set_current_ammo_unary"><h3 class="function_name"><strong><code>unit:set_current_ammo_unary(<code><a href="lua.html#class:number">number</a></code> </strong></code><i class="parameter">unary ammunition level</i><code><strong>)</code></strong></h3></a>
						</dt>
						<dd>
							Sets the current ammunition level of the unit to the supplied unary value. Setting a value of 0 would mean the unit would have no ammunition, whereas setting a value of 1 would mean the unit would have the amount of ammunition they started the battle with. It is permitted to set a value greater than 1, but the unit will appear to have full ammunition on the UI until its ammunition level drops back below 100%.

							<h4>Parameters:</h4>
							<table class="parameter_list">
								<colgroup>
									<col style="width: 3%;">
									<col style="width: 12%;">
									<col style="width: 85%;">
								</colgroup>
								<tr>
									<td>
										<p><strong>1</strong></p>
									</td>
									<td>
										<p><code><code><a href="lua.html#class:number">number</a></code></code></p>
									</td>
									<td>
										<p>unary ammunition level</p>
									</td>
								</tr>
							</table>

							<h4>Returns:</h4>
							<ol>
								<li><code>nil</code></li>
							</ol>
						</dd>
					</dl>
					<dl class="function">
						<dt>
							<a name="function:battle_unit:missile_range"><h3 class="function_name"><strong><code>unit:missile_range()</code></strong></h3></a>
						</dt>
						<dd>
							Returns the missile range of this unit in metres.


							<h4>Returns:</h4>
							<ol>
								<li><code><code><a href="lua.html#class:number">number</a></code></code> missile range</li>
							</ol>
						</dd>
					</dl>
				</div>


				<div>
					<a style="float:right;" href="#top">Back to top</a>
					<a name="section:battle_unit:Special Abilities"><h2 class="section_header">Special Abilities</h2></a>
				</div>
				<div class="section_body">
					<dl class="function">
						<dt>
							<a name="function:battle_unit:can_perform_special_ability"><h3 class="function_name"><strong><code>unit:can_perform_special_ability(<code><a href="lua.html#class:string">string</a></code> </strong></code><i class="parameter">special ability key </i><code><strong>)</code></strong></h3></a>
						</dt>
						<dd>
							Returns whether the unit can perform the specified special ability. Valid special abilities are defined in the <code>special_abilities</code> table.

							<h4>Parameters:</h4>
							<table class="parameter_list">
								<colgroup>
									<col style="width: 3%;">
									<col style="width: 12%;">
									<col style="width: 85%;">
								</colgroup>
								<tr>
									<td>
										<p><strong>1</strong></p>
									</td>
									<td>
										<p><code><code><a href="lua.html#class:string">string</a></code></code></p>
									</td>
									<td>
										<p>special ability key </p>
									</td>
								</tr>
							</table>

							<h4>Returns:</h4>
							<ol>
								<li><code><code><a href="lua.html#class:boolean">boolean</a></code></code> can perform ability</li>
							</ol>
						</dd>
					</dl>
					<dl class="function">
						<dt>
							<a name="function:battle_unit:can_use_magic"><h3 class="function_name"><strong><code>unit:can_use_magic()</code></strong></h3></a>
						</dt>
						<dd>
							Returns whether the unit can use any special abilities that cost magic.


							<h4>Returns:</h4>
							<ol>
								<li><code><code><a href="lua.html#class:boolean">boolean</a></code></code> can use magic</li>
							</ol>
						</dd>
					</dl>
				</div>


				<div>
					<a style="float:right;" href="#top">Back to top</a>
					<a name="section:battle_unit:Unit Behaviours"><h2 class="section_header">Unit Behaviours</h2></a>
				</div>
				<div class="section_body">
					<dl class="function">
						<dt>
							<a name="function:battle_unit:can_use_behaviour"><h3 class="function_name"><strong><code>unit:can_use_behaviour(<code><a href="lua.html#class:string">string</a></code> </strong></code><i class="parameter">behaviour</i><code><strong>)</code></strong></h3></a>
						</dt>
						<dd>
							Returns whether the unit can use a particular behaviour this battle. Valid behaviours are currently as follows: <code>defend</code>, <code>drop_siege_equipment</code>, <code>abandon_artillery_engines</code>, <code>change_formation_spacing</code>, <code>dismantle_artillery_piece</code>, <code>dismount</code>, <code>fire_at_will</code>, <code>skirmish</code>, <code>release_animals</code>, <code>unlimber</code>, <code>board_ship</code>, and <code>formed_attack</code>.

							<h4>Parameters:</h4>
							<table class="parameter_list">
								<colgroup>
									<col style="width: 3%;">
									<col style="width: 12%;">
									<col style="width: 85%;">
								</colgroup>
								<tr>
									<td>
										<p><strong>1</strong></p>
									</td>
									<td>
										<p><code><code><a href="lua.html#class:string">string</a></code></code></p>
									</td>
									<td>
										<p>behaviour</p>
									</td>
								</tr>
							</table>

							<h4>Returns:</h4>
							<ol>
								<li><code><code><a href="lua.html#class:boolean">boolean</a></code></code> behaviour can be used</li>
							</ol>
						</dd>
					</dl>
					<dl class="function">
						<dt>
							<a name="function:battle_unit:is_behaviour_active"><h3 class="function_name"><strong><code>unit:is_behaviour_active(<code><a href="lua.html#class:string">string</a></code> </strong></code><i class="parameter">behaviour</i><code><strong>)</code></strong></h3></a>
						</dt>
						<dd>
							Returns whether a particular behaviour is currently active. Valid behaviours are currently as follows: <code>defend</code>, <code>drop_siege_equipment</code>, <code>abandon_artillery_engines</code>, <code>change_formation_spacing</code>, <code>dismantle_artillery_piece</code>, <code>dismount</code>, <code>fire_at_will</code>, <code>skirmish</code>, <code>release_animals</code>, <code>unlimber</code>, <code>board_ship</code>, and <code>formed_attack</code>.

							<h4>Parameters:</h4>
							<table class="parameter_list">
								<colgroup>
									<col style="width: 3%;">
									<col style="width: 12%;">
									<col style="width: 85%;">
								</colgroup>
								<tr>
									<td>
										<p><strong>1</strong></p>
									</td>
									<td>
										<p><code><code><a href="lua.html#class:string">string</a></code></code></p>
									</td>
									<td>
										<p>behaviour</p>
									</td>
								</tr>
							</table>

							<h4>Returns:</h4>
							<ol>
								<li><code><code><a href="lua.html#class:boolean">boolean</a></code></code> behaviour is active</li>
							</ol>
						</dd>
					</dl>
				</div>


				<div>
					<a style="float:right;" href="#top">Back to top</a>
					<a name="section:battle_unit:Unit Attributes"><h2 class="section_header">Unit Attributes</h2></a>
				</div>
				<p>Unit attributes define certain intrinsic properties of a unit in battle. Attributes are generally assigned to a unit type in the game database, but may be enabled or disabled per-unit in script using the <code><a href="#function:battle_unit:set_stat_attribute">unit:set_stat_attribute</a></code> function. Valid attribute keys are shown in the following list:&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;</p>
				<p><table class="simple"><tr><th>Attribute Key</th><th>Description</th></tr></p>
				<p><tr><td><code>all_ranks_fire</code></td><td>All ranks can fire if using a weapon that only allows one rank.</td></tr></p>
				<p><tr><td><code>berserk</code></td><td>This unit will occasionally go berserk.</td></tr></p>
				<p><tr><td><code>cant_run</code></td><td>This unit cannot run - generally for limbered artillery.</td></tr></p>
				<p><tr><td><code>campaign_stealth</code></td><td>This unit is able to move around the campaign map without being seen.</td></tr></p>
				<p><tr><td><code>charge_reflector</code></td><td>Charge reflection vs all.</td></tr></p>
				<p><tr><td><code>charge_reflector_vs_large</code></td><td>Charge reflection vs large units only.</td></tr></p>
				<p><tr><td><code>causes_fear</code></td><td>This unit frightens all enemy units, reducing their morale when nearby. It is also immune to fear.</td></tr></p>
				<p><tr><td><code>causes_terror</code></td><td>The unit can cause terror, making enemies rout for a short time but without morale penalties. It is also immune to terror and fear.</td></tr></p>
				<p><tr><td><code>commander_hunter</code></td><td>This unit is changed in various ways to make them better at killing commanders.</td></tr></p>
				<p><tr><td><code>disciplined</code></td><td>This unit doesn't suffer morale penalty from general's death.</td></tr></p>
				<p><tr><td><code>encourages</code></td><td>This unit provides a morale bonus to nearby allies.</td></tr></p>
				<p><tr><td><code>fatigue_res</code></td><td>Fatigue doesn't have as much of an effect.</td></tr></p>
				<p><tr><td><code>fatigue_immune</code></td><td>Fatigue doesn't an effect.</td></tr></p>
				<p><tr><td><code>fire_while_moving</code></td><td>This infantry unit can fire while moving.</td></tr></p>
				<p><tr><td><code>formed_attack</code></td><td>This unit will try to stay in formation when in melee.</td></tr></p>
				<p><tr><td><code>guerrilla_deploy</code></td><td>Can deploy outside deployment zone (vanguard deployment).</td></tr></p>
				<p><tr><td><code>hide_forest</code></td><td>Can hide in forest.</td></tr></p>
				<p><tr><td><code>hide_grass</code></td><td>Can hide in grass.</td></tr></p>
				<p><tr><td><code>hide_scrub_and_forest</code></td><td>Can hide in scrubland.</td></tr></p>
				<p><tr><td><code>hide_building</code></td><td>Can hide in buildings.</td></tr></p>
				<p><tr><td><code>ignore_ground_move_mod</code></td><td>Doesn't get slowed down by terrain.</td></tr></p>
				<p><tr><td><code>strider</code></td><td>Strider attribute.</td></tr></p>
				<p><tr><td><code>immune_to_psychology</code></td><td>The unit is immune to psychological attacks (fear and terror).</td></tr></p>
				<p><tr><td><code>impetuous</code></td><td>This unit is impetuous and can be hard to withdraw from battle.</td></tr></p>
				<p><tr><td><code>mighty_knockback</code></td><td>This unit causes extra damage when they knock back the enemy.</td></tr></p>
				<p><tr><td><code>mounted_fire</code></td><td>The unit can fire while on a mount.</td></tr></p>
				<p><tr><td><code>mounted_fire_move</code></td><td>The unit can fire while on a moving mount.</td></tr></p>
				<p><tr><td><code>mounted_fire_parthian</code></td><td>The unit can fire while on a moving mount in a Parthian fashion.</td></tr></p>
				<p><tr><td><code>rampage</code></td><td>This unit may rampage if put under pressure.</td></tr></p>
				<p><tr><td><code>resist_cold</code></td><td>This unit doesn't take extra casualties from cold climates in campaign.</td></tr></p>
				<p><tr><td><code>resist_heat</code></td><td>This unit doesn't take extra casualties from hot climates in campaign.</td></tr></p>
				<p><tr><td><code>run_amok</code></td><td>This unit may run amok if put under pressure.</td></tr></p>
				<p><tr><td><code>scare_horse</code></td><td>This unit scares horses.</td></tr></p>
				<p><tr><td><code>scare_immune</code></td><td>This unit is immune to fear effects.</td></tr></p>
				<p><tr><td><code>snipe</code></td><td>The unit remains hidden while firing.</td></tr></p>
				<p><tr><td><code>stalk</code></td><td>This unit can remain hidden while moving.</td></tr></p>
				<p><tr><td><code>unbreakable</code></td><td>This unit's morale cannot be broken.</td></tr></p>
				<p><tr><td><code>undead</code></td><td>The unit is undead (does not rout, immune to terror, receives crumble damage when morale is low).</td></tr></p>
				<p><tr><td><code>unspottable</code></td><td>If this unit is able to hide in its current location, it will not be spotted by enemies until they are very close.</td></tr></p>
				<p><tr><td><code>expendable</code></td><td>A normal (non-expendable) unit's morale does not suffer from witnessing an expendable unit routing.</td></tr></p>
				<p><tr><td><code>construct</code></td><td>The unit is a statue.</td></tr></p>
				<p><tr><td><code>wallbreaker</code></td><td>The unit can attack walls physically.</td></tr></p>
				<p><tr><td><code>ignore_trees</code></td><td>The unit ignores trees.</td></tr></p>
				<p><tr><td><code>moulder_monster</code></td><td>The unit is a moulder monster that can be targeted by Throt's abilities.</td></tr></p>
				<p><tr><td><code>ogre_charge</code></td><td>The unit has ogre charge.</td></tr></p>
				<p></table></p>
				<p>Not all attributes will be supported by each game.</p>
				<div class="section_body">
					<dl class="function">
						<dt>
							<a name="function:battle_unit:set_stat_attribute"><h3 class="function_name"><strong><code>unit:set_stat_attribute(<code><a href="lua.html#class:string">string</a></code> </strong></code><i class="parameter">attribute key</i><code><strong>, <code><a href="lua.html#class:boolean">boolean</a></code> </strong></code><i class="parameter">enable/disable</i><code><strong>)</code></strong></h3></a>
						</dt>
						<dd>
							Enables or disables a global attribute on the unit. Attribute keys are listed above, in the <code><a href="#section:battle_unit:Unit Attributes">Unit Attributes</a></code> section description.

							<h4>Parameters:</h4>
							<table class="parameter_list">
								<colgroup>
									<col style="width: 3%;">
									<col style="width: 12%;">
									<col style="width: 85%;">
								</colgroup>
								<tr>
									<td>
										<p><strong>1</strong></p>
									</td>
									<td>
										<p><code><code><a href="lua.html#class:string">string</a></code></code></p>
									</td>
									<td>
										<p>attribute key</p>
									</td>
								</tr>
								<tr>
									<td>
										<p><strong>2</strong></p>
									</td>
									<td>
										<p><code><code><a href="lua.html#class:boolean">boolean</a></code></code></p>
									</td>
									<td>
										<p>enable/disable</p>
									</td>
								</tr>
							</table>

							<h4>Returns:</h4>
							<ol>
								<li><code>nil</code></li>
							</ol>
						</dd>
					</dl>
				</div>


				<div>
					<a style="float:right;" href="#top">Back to top</a>
					<a name="section:battle_unit:Sounds"><h2 class="section_header">Sounds</h2></a>
				</div>
				<div class="section_body">
					<dl class="function">
						<dt>
							<a name="function:battle_unit:trigger_sound_charge"><h3 class="function_name"><strong><code>unit:trigger_sound_charge()</code></strong></h3></a>
						</dt>
						<dd>
							Compels the unit to make a charge sound effect.


							<h4>Returns:</h4>
							<ol>
								<li><code>nil</code></li>
							</ol>
						</dd>
					</dl>
					<dl class="function">
						<dt>
							<a name="function:battle_unit:trigger_sound_taunt"><h3 class="function_name"><strong><code>unit:trigger_sound_taunt()</code></strong></h3></a>
						</dt>
						<dd>
							Compels the unit to make a taunt sound effect.


							<h4>Returns:</h4>
							<ol>
								<li><code>nil</code></li>
							</ol>
						</dd>
					</dl>
				</div>


				<div>
					<a style="float:right;" href="#top">Back to top</a>
					<a name="section:battle_unit:Miscellaneous"><h2 class="section_header">Miscellaneous</h2></a>
				</div>
				<div class="section_body">
					<dl class="function">
						<dt>
							<a name="function:battle_unit:play_anim_for_captain"><h3 class="function_name"><strong><code>unit:play_anim_for_captain(<code><a href="lua.html#class:string">string</a></code> </strong></code><i class="parameter">animation key</i><code><strong>, <code><a href="lua.html#class:boolean">boolean</a></code> </strong></code><i class="parameter">loop animation</i><code><strong>)</code></strong></h3></a>
						</dt>
						<dd>
							Compels the unit leader to play an animation.

							<h4>Parameters:</h4>
							<table class="parameter_list">
								<colgroup>
									<col style="width: 3%;">
									<col style="width: 12%;">
									<col style="width: 85%;">
								</colgroup>
								<tr>
									<td>
										<p><strong>1</strong></p>
									</td>
									<td>
										<p><code><code><a href="lua.html#class:string">string</a></code></code></p>
									</td>
									<td>
										<p>animation key</p>
									</td>
								</tr>
								<tr>
									<td>
										<p><strong>2</strong></p>
									</td>
									<td>
										<p><code><code><a href="lua.html#class:boolean">boolean</a></code></code></p>
									</td>
									<td>
										<p>loop animation</p>
									</td>
								</tr>
							</table>

							<h4>Returns:</h4>
							<ol>
								<li><code>nil</code></li>
							</ol>
						</dd>
					</dl>
					<dl class="function">
						<dt>
							<a name="function:battle_unit:deploy_reinforcement"><h3 class="function_name"><strong><code>unit:deploy_reinforcement(<code><a href="lua.html#class:boolean">boolean</a></code> </strong></code><i class="parameter">can deploy</i><code><strong>)</code></strong></h3></a>
						</dt>
						<dd>
							Prevents or allows the unit to deploy as a reinforcement. If set to <code>false</code>, and the unit has not yet entered the battlefield, then the unit will not be able to deploy until the function is called again with an argument of <code>true</code>.<br />
							Calling this command has no effect if the unit is not part of a reinforcement army.

							<h4>Parameters:</h4>
							<table class="parameter_list">
								<colgroup>
									<col style="width: 3%;">
									<col style="width: 12%;">
									<col style="width: 85%;">
								</colgroup>
								<tr>
									<td>
										<p><strong>1</strong></p>
									</td>
									<td>
										<p><code><code><a href="lua.html#class:boolean">boolean</a></code></code></p>
									</td>
									<td>
										<p>can deploy</p>
									</td>
								</tr>
							</table>

							<h4>Returns:</h4>
							<ol>
								<li><code>nil</code></li>
							</ol>
						</dd>
					</dl>
					<dl class="function">
						<dt>
							<a name="function:battle_unit:select_in_ui"><h3 class="function_name"><strong><code>unit:select_in_ui()</code></strong></h3></a>
						</dt>
						<dd>
							Selects the unit in the user interface.


							<h4>Returns:</h4>
							<ol>
								<li><code>nil</code></li>
							</ol>
						</dd>
					</dl>
					<dl class="function">
						<dt>
							<a name="function:battle_unit:mark_as_ally"><h3 class="function_name"><strong><code>unit:mark_as_ally(<code><a href="lua.html#class:boolean">boolean</a></code> </strong></code><i class="parameter">mark as ally</i><code><strong>)</code></strong></h3></a>
						</dt>
						<dd>
							Makes a player unit look like it is allied, rather than part of the controlled army. This is useful for specific scripted situations where it's intended to grant allied units to player control.<br />
							Call this function with <code>true</code> as a single argument to mark the controlled unit as an ally, and then again supplying <code>false</code> to mark the unit as part of the player's army again.

							<h4>Parameters:</h4>
							<table class="parameter_list">
								<colgroup>
									<col style="width: 3%;">
									<col style="width: 12%;">
									<col style="width: 85%;">
								</colgroup>
								<tr>
									<td>
										<p><strong>1</strong></p>
									</td>
									<td>
										<p><code><code><a href="lua.html#class:boolean">boolean</a></code></code></p>
									</td>
									<td>
										<p>mark as ally</p>
									</td>
								</tr>
							</table>

							<h4>Returns:</h4>
							<ol>
								<li><code>nil</code></li>
							</ol>
						</dd>
					</dl>
				</div>


			</div>

		</div>

		<div id="about">Last updated 10/01/21 08:52:07</div>

	</div>

	<script src="../searchdata.js"></script>
	<script src="../search.js"></script>
	<script>const page_env = "Battle"; const path_to_document_root = "../";</script>

</body>
</html>