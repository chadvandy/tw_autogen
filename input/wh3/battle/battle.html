<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
<head>
	<title>Battle</title>
	<link rel="stylesheet" href="../stylesheet.css" type="text/css" />
</head>

<body>

	<a name="top"></a>

	<div id="container">

		<div style="background-color:#e2edff" id="main">

			<div style="background-color:#e2edff" id="navigation_left">
				<br/>
				<h1 class="navigation_header"><i>Battle Documentation</i></h1>
				<a href="../index.html">Scripting Homepage</a>
				<h2 style="background-color:#c1e6ff">Search</h2>
				<ul>
				<form id="search_env_checkbox" class="search_env_checkbox">
					<label for="search_current_env_only">Search battle only</label>
					<input type="checkbox" name="search_current_env_only" checked /><br />
				</form>
				<form id="search" class="search_form" onsubmit="return false">
					<input class="search_input" type="text" placeholder="Search.."/><br />
					<div id="search_dropdown" class="search_dropdown"></div>
				</form>				<h2 style="background-color:#c1e6ff">Game Areas</h2>
				<ul>
					<li><a href="../campaign/campaign_index.html">Campaign Index</a></li>
					<li><strong> > Battle Index</strong></li>
					<li><a href="../frontend/frontend_index.html">Frontend Index</a></li>
				</ul>

				<h2 style="background-color:#c1e6ff">On this page</h2>
				<ul>
				<div class="key">
					<strong>Key</strong>
					<table class="key">
						<tr>
							<td width="75%">Loaded in Campaign</td>
							<td><img alt="Loaded in Campaign" style="float:right;" src="../images/loaded_in_campaign.png" height="10" width="10" /></td>
						</tr>
						<tr>
							<td width="75%">Loaded in Battle</td>
							<td><img alt="Loaded in Battle" style="float:right;" src="../images/loaded_in_battle.png" height="10" width="10" /></td>
						</tr>
						<tr>
							<td width="75%">Loaded in Frontend</td>
							<td><img alt="Loaded in Frontend" style="float:right;" src="../images/loaded_in_frontend.png" height="10" width="10" /></td>
						</tr>
						</table>
				</div>
					<li><a href="#class:battle">Battle</a><img alt="Loaded in Battle" style="float:right; margin-right:1em;" src="../images/loaded_in_battle.png" height="10" width="10" /></li>
					<ul>
						<li>&emsp;&emsp;<a href="#section:battle:Creation">Creation</a></li>
						<li>&emsp;&emsp;<a href="#section:battle:Battle and Battle Manager Objects">Battle and Battle Manager Objects</a></li>
						<li>&emsp;&emsp;<a href="#section:battle:Output">Output</a></li>
							<li>&emsp;&emsp;&emsp;&emsp;<a href="#function:battle:out">out</a></li>
							<li>&emsp;&emsp;&emsp;&emsp;<a href="#function:battle:error">error</a></li>
						<li>&emsp;&emsp;<a href="#section:battle:Battle Objects">Battle Objects</a></li>
							<li>&emsp;&emsp;&emsp;&emsp;<a href="#function:battle:alliances">alliances</a></li>
							<li>&emsp;&emsp;&emsp;&emsp;<a href="#function:battle:local_alliance">local_alliance</a></li>
							<li>&emsp;&emsp;&emsp;&emsp;<a href="#function:battle:local_army">local_army</a></li>
							<li>&emsp;&emsp;&emsp;&emsp;<a href="#function:battle:is_spectator">is_spectator</a></li>
							<li>&emsp;&emsp;&emsp;&emsp;<a href="#function:battle:buildings">buildings</a></li>
							<li>&emsp;&emsp;&emsp;&emsp;<a href="#function:battle:assault_equipment">assault_equipment</a></li>
							<li>&emsp;&emsp;&emsp;&emsp;<a href="#function:battle:debug_drawing">debug_drawing</a></li>
							<li>&emsp;&emsp;&emsp;&emsp;<a href="#function:battle:capture_location_manager">capture_location_manager</a></li>
							<li>&emsp;&emsp;&emsp;&emsp;<a href="#function:battle:camera">camera</a></li>
							<li>&emsp;&emsp;&emsp;&emsp;<a href="#function:battle:subtitles">subtitles</a></li>
							<li>&emsp;&emsp;&emsp;&emsp;<a href="#function:battle:reinforcements">reinforcements</a></li>
							<li>&emsp;&emsp;&emsp;&emsp;<a href="#function:battle:toggle_system">toggle_system</a></li>
							<li>&emsp;&emsp;&emsp;&emsp;<a href="#function:battle:composite_scenes_system">composite_scenes_system</a></li>
						<li>&emsp;&emsp;<a href="#section:battle:Handlers">Handlers</a></li>
							<li>&emsp;&emsp;&emsp;&emsp;<a href="#function:battle:register_input_handler">register_input_handler</a></li>
							<li>&emsp;&emsp;&emsp;&emsp;<a href="#function:battle:unregister_input_handler">unregister_input_handler</a></li>
							<li>&emsp;&emsp;&emsp;&emsp;<a href="#function:battle:register_unit_selection_handler">register_unit_selection_handler</a></li>
							<li>&emsp;&emsp;&emsp;&emsp;<a href="#function:battle:unregister_unit_selection_handler">unregister_unit_selection_handler</a></li>
							<li>&emsp;&emsp;&emsp;&emsp;<a href="#function:battle:register_command_handler">register_command_handler</a></li>
							<li>&emsp;&emsp;&emsp;&emsp;<a href="#function:battle:unregister_command_handler">unregister_command_handler</a></li>
							<li>&emsp;&emsp;&emsp;&emsp;<a href="#function:battle:register_battle_phase_handler">register_battle_phase_handler</a></li>
							<li>&emsp;&emsp;&emsp;&emsp;<a href="#function:battle:unregister_battle_phase_handler">unregister_battle_phase_handler</a></li>
							<li>&emsp;&emsp;&emsp;&emsp;<a href="#function:battle:end_current_battle_phase">end_current_battle_phase</a></li>
						<li>&emsp;&emsp;<a href="#section:battle:Time and Timers">Time and Timers</a></li>
							<li>&emsp;&emsp;&emsp;&emsp;<a href="#function:battle:timer_exists">timer_exists</a></li>
							<li>&emsp;&emsp;&emsp;&emsp;<a href="#function:battle:register_singleshot_timer">register_singleshot_timer</a></li>
							<li>&emsp;&emsp;&emsp;&emsp;<a href="#function:battle:register_repeating_timer">register_repeating_timer</a></li>
							<li>&emsp;&emsp;&emsp;&emsp;<a href="#function:battle:unregister_timer">unregister_timer</a></li>
							<li>&emsp;&emsp;&emsp;&emsp;<a href="#function:battle:time_elapsed_ms">time_elapsed_ms</a></li>
							<li>&emsp;&emsp;&emsp;&emsp;<a href="#function:battle:model_tick_time_ms">model_tick_time_ms</a></li>
							<li>&emsp;&emsp;&emsp;&emsp;<a href="#function:battle:remaining_conflict_time">remaining_conflict_time</a></li>
							<li>&emsp;&emsp;&emsp;&emsp;<a href="#function:battle:modify_battle_speed">modify_battle_speed</a></li>
							<li>&emsp;&emsp;&emsp;&emsp;<a href="#function:battle:current_battle_speed">current_battle_speed</a></li>
							<li>&emsp;&emsp;&emsp;&emsp;<a href="#function:battle:restore_battle_speed">restore_battle_speed</a></li>
							<li>&emsp;&emsp;&emsp;&emsp;<a href="#function:battle:change_conflict_time_update_overridden">change_conflict_time_update_overridden</a></li>
							<li>&emsp;&emsp;&emsp;&emsp;<a href="#function:battle:change_victory_countdown_limit">change_victory_countdown_limit</a></li>
							<li>&emsp;&emsp;&emsp;&emsp;<a href="#function:battle:force_cant_chase_down_routers">force_cant_chase_down_routers</a></li>
						<li>&emsp;&emsp;<a href="#section:battle:Cindy and Composite Scenes">Cindy and Composite Scenes</a></li>
							<li>&emsp;&emsp;&emsp;&emsp;<a href="#function:battle:cindy_preload">cindy_preload</a></li>
							<li>&emsp;&emsp;&emsp;&emsp;<a href="#function:battle:cindy_playback">cindy_playback</a></li>
							<li>&emsp;&emsp;&emsp;&emsp;<a href="#function:battle:cindy_playback_no_camera">cindy_playback_no_camera</a></li>
							<li>&emsp;&emsp;&emsp;&emsp;<a href="#function:battle:stop_cindy_playback">stop_cindy_playback</a></li>
							<li>&emsp;&emsp;&emsp;&emsp;<a href="#function:battle:stop_cindy_playback_no_camera">stop_cindy_playback_no_camera</a></li>
							<li>&emsp;&emsp;&emsp;&emsp;<a href="#function:battle:start_terrain_composite_scene">start_terrain_composite_scene</a></li>
							<li>&emsp;&emsp;&emsp;&emsp;<a href="#function:battle:stop_terrain_composite_scene">stop_terrain_composite_scene</a></li>
						<li>&emsp;&emsp;<a href="#section:battle:Advice and Audio">Advice and Audio</a></li>
							<li>&emsp;&emsp;&emsp;&emsp;<a href="#function:battle:play_adc">play_adc</a></li>
							<li>&emsp;&emsp;&emsp;&emsp;<a href="#function:battle:suspend_contextual_advice">suspend_contextual_advice</a></li>
							<li>&emsp;&emsp;&emsp;&emsp;<a href="#function:battle:close_advisor">close_advisor</a></li>
							<li>&emsp;&emsp;&emsp;&emsp;<a href="#function:battle:advice_finished">advice_finished</a></li>
							<li>&emsp;&emsp;&emsp;&emsp;<a href="#function:battle:vo_finished">vo_finished</a></li>
							<li>&emsp;&emsp;&emsp;&emsp;<a href="#function:battle:suppress_unit_voices">suppress_unit_voices</a></li>
							<li>&emsp;&emsp;&emsp;&emsp;<a href="#function:battle:suppress_unit_musicians">suppress_unit_musicians</a></li>
							<li>&emsp;&emsp;&emsp;&emsp;<a href="#function:battle:play_music">play_music</a></li>
							<li>&emsp;&emsp;&emsp;&emsp;<a href="#function:battle:play_music_custom_fade">play_music_custom_fade</a></li>
							<li>&emsp;&emsp;&emsp;&emsp;<a href="#function:battle:stop_music">stop_music</a></li>
							<li>&emsp;&emsp;&emsp;&emsp;<a href="#function:battle:stop_music_custom_fade">stop_music_custom_fade</a></li>
							<li>&emsp;&emsp;&emsp;&emsp;<a href="#function:battle:get_volume">get_volume</a></li>
							<li>&emsp;&emsp;&emsp;&emsp;<a href="#function:battle:set_volume">set_volume</a></li>
							<li>&emsp;&emsp;&emsp;&emsp;<a href="#function:battle:fade_volume">fade_volume</a></li>
							<li>&emsp;&emsp;&emsp;&emsp;<a href="#function:battle:set_music_vm_variable">set_music_vm_variable</a></li>
						<li>&emsp;&emsp;<a href="#section:battle:Objectives and Markers">Objectives and Markers</a></li>
							<li>&emsp;&emsp;&emsp;&emsp;<a href="#function:battle:add_ping_icon">add_ping_icon</a></li>
							<li>&emsp;&emsp;&emsp;&emsp;<a href="#function:battle:remove_ping_icon">remove_ping_icon</a></li>
							<li>&emsp;&emsp;&emsp;&emsp;<a href="#function:battle:show_objective">show_objective</a></li>
							<li>&emsp;&emsp;&emsp;&emsp;<a href="#function:battle:add_animated_arrow">add_animated_arrow</a></li>
							<li>&emsp;&emsp;&emsp;&emsp;<a href="#function:battle:remove_animated_arrow">remove_animated_arrow</a></li>
						<li>&emsp;&emsp;<a href="#section:battle:Fullscreen Movies">Fullscreen Movies</a></li>
							<li>&emsp;&emsp;&emsp;&emsp;<a href="#function:battle:play_movie">play_movie</a></li>
							<li>&emsp;&emsp;&emsp;&emsp;<a href="#function:battle:is_movie_playing">is_movie_playing</a></li>
						<li>&emsp;&emsp;<a href="#section:battle:UI and UI Suppression">UI and UI Suppression</a></li>
							<li>&emsp;&emsp;&emsp;&emsp;<a href="#function:battle:ui_component">ui_component</a></li>
							<li>&emsp;&emsp;&emsp;&emsp;<a href="#function:battle:enable_cinematic_ui">enable_cinematic_ui</a></li>
							<li>&emsp;&emsp;&emsp;&emsp;<a href="#function:battle:enable_unit_ids">enable_unit_ids</a></li>
							<li>&emsp;&emsp;&emsp;&emsp;<a href="#function:battle:enable_cinematic_camera">enable_cinematic_camera</a></li>
							<li>&emsp;&emsp;&emsp;&emsp;<a href="#function:battle:enable_tooltips">enable_tooltips</a></li>
							<li>&emsp;&emsp;&emsp;&emsp;<a href="#function:battle:force_minimised_tooltips">force_minimised_tooltips</a></li>
							<li>&emsp;&emsp;&emsp;&emsp;<a href="#function:battle:disable_groups">disable_groups</a></li>
							<li>&emsp;&emsp;&emsp;&emsp;<a href="#function:battle:disable_formations">disable_formations</a></li>
							<li>&emsp;&emsp;&emsp;&emsp;<a href="#function:battle:disable_orders">disable_orders</a></li>
							<li>&emsp;&emsp;&emsp;&emsp;<a href="#function:battle:steal_escape_key">steal_escape_key</a></li>
							<li>&emsp;&emsp;&emsp;&emsp;<a href="#function:battle:release_escape_key">release_escape_key</a></li>
							<li>&emsp;&emsp;&emsp;&emsp;<a href="#function:battle:steal_input_focus">steal_input_focus</a></li>
							<li>&emsp;&emsp;&emsp;&emsp;<a href="#function:battle:release_input_focus">release_input_focus</a></li>
							<li>&emsp;&emsp;&emsp;&emsp;<a href="#function:battle:disable_shortcut">disable_shortcut</a></li>
							<li>&emsp;&emsp;&emsp;&emsp;<a href="#function:battle:set_banners_enabled">set_banners_enabled</a></li>
						<li>&emsp;&emsp;<a href="#section:battle:Querying">Querying</a></li>
							<li>&emsp;&emsp;&emsp;&emsp;<a href="#function:battle:is_replay">is_replay</a></li>
							<li>&emsp;&emsp;&emsp;&emsp;<a href="#function:battle:is_tutorial">is_tutorial</a></li>
							<li>&emsp;&emsp;&emsp;&emsp;<a href="#function:battle:is_multiplayer">is_multiplayer</a></li>
							<li>&emsp;&emsp;&emsp;&emsp;<a href="#function:battle:is_from_campaign">is_from_campaign</a></li>
							<li>&emsp;&emsp;&emsp;&emsp;<a href="#function:battle:is_quest_battle">is_quest_battle</a></li>
							<li>&emsp;&emsp;&emsp;&emsp;<a href="#function:battle:prepare_for_fade_in">prepare_for_fade_in</a></li>
							<li>&emsp;&emsp;&emsp;&emsp;<a href="#function:battle:battle_outcome_decided">battle_outcome_decided</a></li>
							<li>&emsp;&emsp;&emsp;&emsp;<a href="#function:battle:victorious_alliance">victorious_alliance</a></li>
							<li>&emsp;&emsp;&emsp;&emsp;<a href="#function:battle:is_draw">is_draw</a></li>
							<li>&emsp;&emsp;&emsp;&emsp;<a href="#function:battle:is_siege_battle">is_siege_battle</a></li>
							<li>&emsp;&emsp;&emsp;&emsp;<a href="#function:battle:is_ambush_battle">is_ambush_battle</a></li>
							<li>&emsp;&emsp;&emsp;&emsp;<a href="#function:battle:is_storm_of_magic_battle">is_storm_of_magic_battle</a></li>
							<li>&emsp;&emsp;&emsp;&emsp;<a href="#function:battle:battle_type">battle_type</a></li>
							<li>&emsp;&emsp;&emsp;&emsp;<a href="#function:battle:unit_scale_factor">unit_scale_factor</a></li>
							<li>&emsp;&emsp;&emsp;&emsp;<a href="#function:battle:unit_scale_factor_index">unit_scale_factor_index</a></li>
							<li>&emsp;&emsp;&emsp;&emsp;<a href="#function:battle:get_terrain_height">get_terrain_height</a></li>
							<li>&emsp;&emsp;&emsp;&emsp;<a href="#function:battle:is_area_clear">is_area_clear</a></li>
							<li>&emsp;&emsp;&emsp;&emsp;<a href="#function:battle:ground_type">ground_type</a></li>
							<li>&emsp;&emsp;&emsp;&emsp;<a href="#function:battle:random_number">random_number</a></li>
						<li>&emsp;&emsp;<a href="#section:battle:Benchmarking and Autotesting">Benchmarking and Autotesting</a></li>
							<li>&emsp;&emsp;&emsp;&emsp;<a href="#function:battle:is_benchmarking_mode">is_benchmarking_mode</a></li>
							<li>&emsp;&emsp;&emsp;&emsp;<a href="#function:battle:end_benchmark">end_benchmark</a></li>
							<li>&emsp;&emsp;&emsp;&emsp;<a href="#function:battle:quit_to_windows_from_script">quit_to_windows_from_script</a></li>
							<li>&emsp;&emsp;&emsp;&emsp;<a href="#function:battle:appdata_screenshots">appdata_screenshots</a></li>
						<li>&emsp;&emsp;<a href="#section:battle:Global Attributes and Abilities">Global Attributes and Abilities</a></li>
							<li>&emsp;&emsp;&emsp;&emsp;<a href="#function:battle:set_stat_attribute">set_stat_attribute</a></li>
							<li>&emsp;&emsp;&emsp;&emsp;<a href="#function:battle:set_special_abilities_flags">set_special_abilities_flags</a></li>
							<li>&emsp;&emsp;&emsp;&emsp;<a href="#function:battle:disable_all_abilities">disable_all_abilities</a></li>
							<li>&emsp;&emsp;&emsp;&emsp;<a href="#function:battle:enable_all_abilities">enable_all_abilities</a></li>
						<li>&emsp;&emsp;<a href="#section:battle:Survival Battles">Survival Battles</a></li>
							<li>&emsp;&emsp;&emsp;&emsp;<a href="#function:battle:notify_survival_started">notify_survival_started</a></li>
							<li>&emsp;&emsp;&emsp;&emsp;<a href="#function:battle:notify_survival_total_waves">notify_survival_total_waves</a></li>
							<li>&emsp;&emsp;&emsp;&emsp;<a href="#function:battle:notify_wave_state_changed">notify_wave_state_changed</a></li>
							<li>&emsp;&emsp;&emsp;&emsp;<a href="#function:battle:notify_wave_units_changed">notify_wave_units_changed</a></li>
							<li>&emsp;&emsp;&emsp;&emsp;<a href="#function:battle:notify_wave_progress_changed">notify_wave_progress_changed</a></li>
							<li>&emsp;&emsp;&emsp;&emsp;<a href="#function:battle:notify_survival_completion">notify_survival_completion</a></li>
						<li>&emsp;&emsp;<a href="#section:battle:Battle Results">Battle Results</a></li>
							<li>&emsp;&emsp;&emsp;&emsp;<a href="#function:battle:force_battle_end">force_battle_end</a></li>
							<li>&emsp;&emsp;&emsp;&emsp;<a href="#function:battle:force_custom_battle_result">force_custom_battle_result</a></li>
						<li>&emsp;&emsp;<a href="#section:battle:Miscellaneous">Miscellaneous</a></li>
							<li>&emsp;&emsp;&emsp;&emsp;<a href="#function:battle:trigger_projectile_launch">trigger_projectile_launch</a></li>
							<li>&emsp;&emsp;&emsp;&emsp;<a href="#function:battle:unlock_achievement">unlock_achievement</a></li>
							<li>&emsp;&emsp;&emsp;&emsp;<a href="#function:battle:output_battle_xml">output_battle_xml</a></li>
							<li>&emsp;&emsp;&emsp;&emsp;<a href="#function:battle:save_unit_pair_balance_data">save_unit_pair_balance_data</a></li>
					</ul>

				</ul>
			</div>

			<div style="background-color:#e2edff" id="navigation_right">				<h2 style="background-color:#c1e6ff">Battle Topics</h2>
				<ul>
					<li><a href="battle_index.html">Battle Index</a></li>
					<li><a href="battle_hierarchy.html">Battle Hierarchy</a></li>
					<li><a href="lua.html">Lua Language</a></li>
					<li><a href="scripted_events.html">Scripted Events</a></li>

				</ul>

				<h2 style="background-color:#c1e6ff">Game Code Interfaces</h2>
				<ul>
					<li><strong> > Battle</strong></li>
					<li><a href="battle_alliances.html">Alliances</a></li>
					<li><a href="battle_alliance.html">Alliance</a></li>
					<li><a href="battle_armies.html">Armies</a></li>
					<li><a href="battle_army.html">Army</a></li>
					<li><a href="battle_units.html">Units</a></li>
					<li><a href="battle_unit.html">Unit</a></li>
					<li><a href="battle_unitcontroller.html">Unitcontroller</a></li>
					<li><a href="ai_planner.html">AI Planners</a></li>
					<li><a href="battle_assault_equipment.html">Assault Equipment</a></li>
					<li><a href="battle_building.html">Building</a></li>
					<li><a href="battle_buildings.html">Buildings</a></li>
					<li><a href="battle_camera.html">Camera</a></li>
					<li><a href="battle_capture_location.html">Capture Location</a></li>
					<li><a href="battle_composite_scenes_system.html">Composite Scenes System</a></li>
					<li><a href="battle_debug_drawing.html">Debug Drawing</a></li>
					<li><a href="battle_reinforcements.html">reinforcements Reinforcements</a></li>
					<li><a href="battle_sound_effect.html">Sound Effects</a></li>
					<li><a href="battle_subtitles.html">Subtitles</a></li>
					<li><a href="battle_toggle_system.html">Toggle System</a></li>
					<li><a href="battle_vector.html">Vector</a></li>
					<li><a href="common.html">Common</a></li>
					<li><a href="scriptedvalueregistry.html">ScriptedValueRegistry</a></li>
					<li><a href="uicomponent.html">UIComponents</a></li>

				</ul>

				<h2 style="background-color:#c1e6ff">Script Interfaces</h2>
				<ul>
					<li><a href="battle_manager.html">Battle Manager</a></li>
					<li><a href="core.html">Core</a></li>
					<li><a href="advice_manager.html">Advice Manager</a></li>
					<li><a href="battle_ui_manager.html">Battle UI Manager</a></li>
					<li><a href="convex_area.html">Convex Areas</a></li>
					<li><a href="cutscene.html">Battle Cutscenes</a></li>
					<li><a href="generated_battle.html">Generated Battle</a></li>
					<li><a href="global.html">Global</a></li>
					<li><a href="infotext_manager.html">Infotext Manager</a></li>
					<li><a href="movie_overlay.html">Movie Overlays</a></li>
					<li><a href="navigable_tour.html">Navigable Tours</a></li>
					<li><a href="objectives_manager.html">Objectives Manager</a></li>
					<li><a href="script_ai_planner.html">Script AI Planner</a></li>
					<li><a href="script_messager.html">Script Messager</a></li>
					<li><a href="script_unit.html">Script Unit</a></li>
					<li><a href="scripted_tour.html">Scripted Tours</a></li>
					<li><a href="text_pointer.html">Text Pointers</a></li>
					<li><a href="timer_manager.html">Timer Manager</a></li>
					<li><a href="topic_leader.html">Topic Leader</a></li>
					<li><a href="validate.html">Validate</a></li>

				</ul>

				<h2 style="background-color:#c1e6ff">Data Interfaces</h2>
				<ul>
					<li><a href="st_helper.html">Scripted Tour Helpers</a></li>

				</ul>

				</ul>
			</div>

			<div id="content">
				<a name="class:battle"><h1 class="content_header">Battle</h1></a>
				<p>The <code>battle</code> object is the main interface through which the state of the running battle may be queried. The interface provides a variety of methods that can be used to interrogate and modify the battle state, chiefly access to the <code><a href="battle_hierarchy.html#class:battle_hierarchy">battle_hierarchy</a></code> from which objects <code><a href="battle_alliance.html#class:battle_alliance">battle_alliance</a></code>, <code><a href="battle_army.html#class:battle_army">battle_army</a></code> and <code><a href="battle_unit.html#class:battle_unit">battle_unit</a></code> objects may be derived.</p>
							<table class="loaded_in" style="margin-top: 1em;">
								<tr>
									<td>
										Loaded in Campaign
									</td>
									<td>
										<img alt="Loaded in Campaign" style="float:right;" src="../images/loaded_in_campaign.png" height="18" width="18" />
									</td>
								</tr>
								<tr>
									<td>
										Loaded in Battle
									</td>
									<td>
										<img alt="Loaded in Battle" style="float:right;" src="../images/loaded_in_battle.png" height="18" width="18" />
									</td>
								</tr>
								<tr>
									<td>
										Loaded in Frontend
									</td>
									<td>
										<img alt="Loaded in Frontend" style="float:right;" src="../images/loaded_in_frontend.png" height="18" width="18" />
									</td>
								</tr>
							</table>

				<div>
					<a style="float:right;" href="#top">Back to top</a>
					<a name="section:battle:Creation"><h2 class="section_header">Creation</h2></a>
				</div>
				<p>A battle object may be created by calling <code>empire_battle:new()</code>. Functions listed further down on this page may then be called on the returned <code>battle</code> object in the form <code><i>&lt;object_name&gt;</i>:<i>&lt;function_name&gt;</i>(<i>&lt;args&gt;</i>)</code>.</p>

				<h4>Example:</h4>
				<div id="example_code"><code>
					 -- creation<br />
					 battle = empire_battle:new()<br />
					  <br />
					 -- usage<br />
					 if battle:is_tutorial() then<br />
					 &emsp;&emsp;&emsp;&emsp;-- do tutorial stuff<br />
					 end<br />
				</code></div>
				<div class="section_body">
				</div>


				<div>
					<a style="float:right;" href="#top">Back to top</a>
					<a name="section:battle:Battle and Battle Manager Objects"><h2 class="section_header">Battle and Battle Manager Objects</h2></a>
				</div>
				<p>It is strongly recommended to create and use a <code><a href="battle_manager.html#class:battle_manager">battle_manager</a></code> object in place of a raw <code>battle</code> object. The <code><a href="battle_manager.html#class:battle_manager">battle_manager</a></code> interface provides much additional functionality and quality of life improvements on top of the raw <code>battle</code> interface described here. Functions provided by the <code>battle</code> interface may be called on a <code><a href="battle_manager.html#class:battle_manager">battle_manager</a></code> object - the battle manager passes the call through to the underlying <code>battle</code> object if required.</p>

				<h4>Example - Create a battle manager instead of a battle object:</h4>
				<div id="example_code"><code>
					 bm = battle_manager:new(empire_battle:new())<br />
				</code></div>
				<div class="section_body">
				</div>


				<div>
					<a style="float:right;" href="#top">Back to top</a>
					<a name="section:battle:Output"><h2 class="section_header">Output</h2></a>
				</div>
				<div class="section_body">
					<dl class="function">
						<dt>
							<a name="function:battle:out"><h3 class="function_name"><strong><code>battle:out(<code><a href="lua.html#class:string">string</a></code> </strong></code><i class="parameter">output</i><code><strong>)</code></strong></h3></a>
						</dt>
						<dd>
							Prints some output to the console. If this function is called on a <code><a href="battle_manager.html#class:battle_manager">battle_manager</a></code> object then it is overridden by <code><a href="battle_manager.html#function:battle_manager:out">battle_manager:out</a></code>, which prepends a timestamp to the output before printing it.

							<h4>Parameters:</h4>
							<table class="parameter_list">
								<colgroup>
									<col style="width: 3%;">
									<col style="width: 12%;">
									<col style="width: 85%;">
								</colgroup>
								<tr>
									<td>
										<p><strong>1</strong></p>
									</td>
									<td>
										<p><code><code><a href="lua.html#class:string">string</a></code></code></p>
									</td>
									<td>
										<p>output</p>
									</td>
								</tr>
							</table>

							<h4>Returns:</h4>
							<ol>
								<li><code>nil</code></li>
							</ol>
							<p class="file_comment">defined in ../../common/EmpireBattle/Source/BattleScript/BattleEditorScriptInterface.cpp, line 9301</p>
						</dd>
					</dl>
					<dl class="function">
						<dt>
							<a name="function:battle:error"><h3 class="function_name"><strong><code>battle:error(<code><a href="lua.html#class:string">string</a></code> </strong></code><i class="parameter">message</i><code><strong>)</code></strong></h3></a>
						</dt>
						<dd>
							Shows an assert dialog with the supplied message.

							<h4>Parameters:</h4>
							<table class="parameter_list">
								<colgroup>
									<col style="width: 3%;">
									<col style="width: 12%;">
									<col style="width: 85%;">
								</colgroup>
								<tr>
									<td>
										<p><strong>1</strong></p>
									</td>
									<td>
										<p><code><code><a href="lua.html#class:string">string</a></code></code></p>
									</td>
									<td>
										<p>message</p>
									</td>
								</tr>
							</table>

							<h4>Returns:</h4>
							<ol>
								<li><code>nil</code></li>
							</ol>
							<p class="file_comment">defined in ../../common/EmpireBattle/Source/BattleScript/BattleEditorScriptInterface.cpp, line 9340</p>
						</dd>
					</dl>
				</div>


				<div>
					<a style="float:right;" href="#top">Back to top</a>
					<a name="section:battle:Battle Objects"><h2 class="section_header">Battle Objects</h2></a>
				</div>
				<div class="section_body">
					<dl class="function">
						<dt>
							<a name="function:battle:alliances"><h3 class="function_name"><strong><code>battle:alliances()</code></strong></h3></a>
						</dt>
						<dd>
							Creates and returns a <code><a href="battle_alliances.html#class:battle_alliances">battle_alliances</a></code> object listing all alliances on the battlefield.


							<h4>Returns:</h4>
							<ol>
								<li><code><code><a href="battle_alliances.html#class:battle_alliances">battle_alliances</a></code></code> alliances list</li>
							</ol>
							<p class="file_comment">defined in ../../common/EmpireBattle/Source/BattleScript/BattleEditorScriptInterface.cpp, line 9356</p>
						</dd>
					</dl>
					<dl class="function">
						<dt>
							<a name="function:battle:local_alliance"><h3 class="function_name"><strong><code>battle:local_alliance()</code></strong></h3></a>
						</dt>
						<dd>
							Returns the index number of the <code><a href="battle_alliance.html#class:battle_alliance">battle_alliance</a></code> that corresponds to the player on the local machine. This can be used to look up the player's <code><a href="battle_alliance.html#class:battle_alliance">battle_alliance</a></code> from within the <code><a href="battle_alliances.html#class:battle_alliances">battle_alliances</a></code> collection that may be retrieved with <code><a href="#function:battle:alliances">battle:alliances</a></code>. In any singleplayer battle this should return 1.


							<h4>Returns:</h4>
							<ol>
								<li><code><code><a href="lua.html#class:number">number</a></code></code> local alliance number</li>
							</ol>

							<h4>Example:</h4>
							<div id="example_code"><code>
								 alliances = bm:alliances()<br />
								 player_alliance = alliances:item(bm:local_alliance())<br />
							</code></div>
							<p class="file_comment">defined in ../../common/EmpireBattle/Source/BattleScript/BattleEditorScriptInterface.cpp, line 9369</p>
						</dd>
					</dl>
					<dl class="function">
						<dt>
							<a name="function:battle:local_army"><h3 class="function_name"><strong><code>battle:local_army()</code></strong></h3></a>
						</dt>
						<dd>
							Returns the index number of the <code><a href="battle_army.html#class:battle_army">battle_army</a></code> (within the relevant <code><a href="battle_armies.html#class:battle_armies">battle_armies</a></code> collection object) that corresponds to the player on the local machine. This can be used to look up the player's <code><a href="battle_army.html#class:battle_army">battle_army</a></code>


							<h4>Returns:</h4>
							<ol>
								<li><code><code><a href="lua.html#class:number">number</a></code></code> local army number</li>
							</ol>

							<h4>Example:</h4>
							<div id="example_code"><code>
								 alliances = bm:alliances()<br />
								 player_alliance = alliances:item(bm:local_alliance())<br />
								 player_army = player_alliance:armies():item(bm:local_army())<br />
							</code></div>
							<p class="file_comment">defined in ../../common/EmpireBattle/Source/BattleScript/BattleEditorScriptInterface.cpp, line 9380</p>
						</dd>
					</dl>
					<dl class="function">
						<dt>
							<a name="function:battle:is_spectator"><h3 class="function_name"><strong><code>battle:is_spectator()</code></strong></h3></a>
						</dt>
						<dd>
							Returns whether the local game client is spectating the battle or not.


							<h4>Returns:</h4>
							<ol>
								<li><code><code><a href="lua.html#class:boolean">boolean</a></code></code> is spectating</li>
							</ol>
							<p class="file_comment">defined in ../../common/EmpireBattle/Source/BattleScript/BattleEditorScriptInterface.cpp, line 9392</p>
						</dd>
					</dl>
					<dl class="function">
						<dt>
							<a name="function:battle:buildings"><h3 class="function_name"><strong><code>battle:buildings()</code></strong></h3></a>
						</dt>
						<dd>
							Creates and returns a <code><a href="battle_buildings.html#class:battle_buildings">battle_buildings</a></code> object listing all buildings on the battlefield.


							<h4>Returns:</h4>
							<ol>
								<li><code><code><a href="battle_buildings.html#class:battle_buildings">battle_buildings</a></code></code> buildings list</li>
							</ol>
							<p class="file_comment">defined in ../../common/EmpireBattle/Source/BattleScript/BattleEditorScriptInterface.cpp, line 9401</p>
						</dd>
					</dl>
					<dl class="function">
						<dt>
							<a name="function:battle:assault_equipment"><h3 class="function_name"><strong><code>battle:assault_equipment()</code></strong></h3></a>
						</dt>
						<dd>
							Creates and returns a <code><a href="battle_assault_equipment.html#class:battle_assault_equipment">battle_assault_equipment</a></code> object listing all vehicles (such as siege towers and battering rams) on the battlefield.


							<h4>Returns:</h4>
							<ol>
								<li><code><code><a href="battle_assault_equipment.html#class:battle_assault_equipment">battle_assault_equipment</a></code></code> assault equipment list</li>
							</ol>
							<p class="file_comment">defined in ../../common/EmpireBattle/Source/BattleScript/BattleEditorScriptInterface.cpp, line 9413</p>
						</dd>
					</dl>
					<dl class="function">
						<dt>
							<a name="function:battle:debug_drawing"><h3 class="function_name"><strong><code>battle:debug_drawing()</code></strong></h3></a>
						</dt>
						<dd>
							Creates and returns a <code><a href="battle_debug_drawing.html#class:battle_debug_drawing">battle_debug_drawing</a></code> object, allowing the script to draw debug lines on the battlefield.


							<h4>Returns:</h4>
							<ol>
								<li><code><code><a href="battle_debug_drawing.html#class:battle_debug_drawing">battle_debug_drawing</a></code></code> debug drawing object</li>
							</ol>
							<p class="file_comment">defined in ../../common/EmpireBattle/Source/BattleScript/BattleEditorScriptInterface.cpp, line 9426</p>
						</dd>
					</dl>
					<dl class="function">
						<dt>
							<a name="function:battle:capture_location_manager"><h3 class="function_name"><strong><code>battle:capture_location_manager()</code></strong></h3></a>
						</dt>
						<dd>
							Creates and returns a <code><a href="battle_capture_location.html#class:battle_capture_location_manager">battle_capture_location_manager</a></code> object, which can be queried to gain handles to individual <code><a href="battle_capture_location.html#class:battle_capture_location">battle_capture_location</a></code> objects.


							<h4>Returns:</h4>
							<ol>
								<li><code><code><a href="battle_capture_location.html#class:battle_capture_location_manager">battle_capture_location_manager</a></code></code> capture location manager</li>
							</ol>
							<p class="file_comment">defined in ../../common/EmpireBattle/Source/BattleScript/BattleEditorScriptInterface.cpp, line 9438</p>
						</dd>
					</dl>
					<dl class="function">
						<dt>
							<a name="function:battle:camera"><h3 class="function_name"><strong><code>battle:camera()</code></strong></h3></a>
						</dt>
						<dd>
							Creates and returns a <code><a href="battle_camera.html#class:battle_camera">battle_camera</a></code> object.


							<h4>Returns:</h4>
							<ol>
								<li><code><code><a href="battle_camera.html#class:battle_camera">battle_camera</a></code></code> battle camera</li>
							</ol>
							<p class="file_comment">defined in ../../common/EmpireBattle/Source/BattleScript/BattleEditorScriptInterface.cpp, line 9463</p>
						</dd>
					</dl>
					<dl class="function">
						<dt>
							<a name="function:battle:subtitles"><h3 class="function_name"><strong><code>battle:subtitles()</code></strong></h3></a>
						</dt>
						<dd>
							Creates and returns a <code><a href="battle_subtitles.html#class:battle_subtitles">battle_subtitles</a></code> object.


							<h4>Returns:</h4>
							<ol>
								<li><code><code><a href="battle_subtitles.html#class:battle_subtitles">battle_subtitles</a></code></code> subtitles</li>
							</ol>
							<p class="file_comment">defined in ../../common/EmpireBattle/Source/BattleScript/BattleEditorScriptInterface.cpp, line 9491</p>
						</dd>
					</dl>
					<dl class="function">
						<dt>
							<a name="function:battle:reinforcements"><h3 class="function_name"><strong><code>battle:reinforcements()</code></strong></h3></a>
						</dt>
						<dd>
							Creates and returns a <code><a href="battle_reinforcements.html#class:battle_reinforcements">battle_reinforcements</a></code> object.


							<h4>Returns:</h4>
							<ol>
								<li><code><code><a href="battle_reinforcements.html#class:battle_reinforcements">battle_reinforcements</a></code></code> reinforcements</li>
							</ol>
							<p class="file_comment">defined in ../../common/EmpireBattle/Source/BattleScript/BattleEditorScriptInterface.cpp, line 9503</p>
						</dd>
					</dl>
					<dl class="function">
						<dt>
							<a name="function:battle:toggle_system"><h3 class="function_name"><strong><code>battle:toggle_system()</code></strong></h3></a>
						</dt>
						<dd>
							Creates and returns a <code><a href="battle_toggle_system.html#class:battle_toggle_system">battle_toggle_system</a></code> object


							<h4>Returns:</h4>
							<ol>
								<li><code><code><a href="battle_toggle_system.html#class:battle_toggle_system">battle_toggle_system</a></code></code> toggle_system</li>
							</ol>
							<p class="file_comment">defined in ../../common/EmpireBattle/Source/BattleScript/BattleEditorScriptInterface.cpp, line 9517</p>
						</dd>
					</dl>
					<dl class="function">
						<dt>
							<a name="function:battle:composite_scenes_system"><h3 class="function_name"><strong><code>battle:composite_scenes_system()</code></strong></h3></a>
						</dt>
						<dd>
							Creates and returns a <code><a href="battle_composite_scenes_system.html#class:battle_composite_scenes_system">battle_composite_scenes_system</a></code> object


							<h4>Returns:</h4>
							<ol>
								<li><code><code><a href="battle_composite_scenes_system.html#class:battle_composite_scenes_system">battle_composite_scenes_system</a></code></code> composite scenes system</li>
							</ol>
							<p class="file_comment">defined in ../../common/EmpireBattle/Source/BattleScript/BattleEditorScriptInterface.cpp, line 9531</p>
						</dd>
					</dl>
				</div>


				<div>
					<a style="float:right;" href="#top">Back to top</a>
					<a name="section:battle:Handlers"><h2 class="section_header">Handlers</h2></a>
				</div>
				<div class="section_body">
					<dl class="function">
						<dt>
							<a name="function:battle:register_input_handler"><h3 class="function_name"><strong><code>battle:register_input_handler(<code><a href="lua.html#class:string">string</a></code> </strong></code><i class="parameter">input handler function</i><code><strong>)</code></strong></h3></a>
						</dt>
						<dd>
							Registers a function (by <code><a href="lua.html#class:string">string</a></code> name) as a handler for input events. Input events are triggered when the player makes certain inputs. Valid input events are:<ul><br />
							<li>"move forward"</li><br />
							<li>"move forward fast"</li><br />
							<li>"move backward"</li><br />
							<li>"move left"</li><br />
							<li>"move right"</li><br />
							<li>"rotate right"</li><br />
							<li>"rotate left"</li><br />
							<li>"move up"</li><br />
							<li>"move down"</li><br />
							<li>"rotate up"</li><br />
							<li>"rotate down"</li><br />
							<li>"edge rotate right"</li><br />
							<li>"edge rotate left"</li><br />
							<li>"edge move left"</li><br />
							<li>"edge move right"</li><br />
							<li>"edge move forward"</li><br />
							<li>"edge move backward"</li></ul><br />
							When an input event occurs, the registered function is called with the relevant input event string as a single argument. Note that the function being registered must have already been declared when <code>register_input_handler</code> is called.<br />
							Once registered, an input handler may be unregistered with <code><a href="#function:battle:unregister_input_handler">battle:unregister_input_handler</a></code>.

							<h4>Parameters:</h4>
							<table class="parameter_list">
								<colgroup>
									<col style="width: 3%;">
									<col style="width: 12%;">
									<col style="width: 85%;">
								</colgroup>
								<tr>
									<td>
										<p><strong>1</strong></p>
									</td>
									<td>
										<p><code><code><a href="lua.html#class:string">string</a></code></code></p>
									</td>
									<td>
										<p>input handler function</p>
									</td>
								</tr>
							</table>

							<h4>Returns:</h4>
							<ol>
								<li><code>nil</code></li>
							</ol>

							<h4>Example:</h4>
							<div id="example_code"><code>
								 function my_input_handler(event_name)<br />
								 &emsp;&emsp;&emsp;&emsp;if event_name == "move_forward" then<br />
								&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;-- do something in response to the move_forward event<br />
								&emsp;&emsp;&emsp;&emsp;end<br />
								 end<br />
								 bm:register_input_handler("my_input_handler")<br />
							</code></div>
							<p class="file_comment">defined in ../../common/EmpireBattle/Source/BattleScript/BattleEditorScriptInterface.cpp, line 9549</p>
						</dd>
					</dl>
					<dl class="function">
						<dt>
							<a name="function:battle:unregister_input_handler"><h3 class="function_name"><strong><code>battle:unregister_input_handler()</code></strong></h3></a>
						</dt>
						<dd>
							Unregisters the currently-registered input handler function. An input handler may be registered with <code><a href="#function:battle:register_input_handler">battle:register_input_handler</a></code>.


							<h4>Returns:</h4>
							<ol>
								<li><code>nil</code></li>
							</ol>
							<p class="file_comment">defined in ../../common/EmpireBattle/Source/BattleScript/BattleEditorScriptInterface.cpp, line 9583</p>
						</dd>
					</dl>
					<dl class="function">
						<dt>
							<a name="function:battle:register_unit_selection_handler"><h3 class="function_name"><strong><code>battle:register_unit_selection_handler(<code><a href="lua.html#class:string">string</a></code> </strong></code><i class="parameter">input handler function</i><code><strong>)</code></strong></h3></a>
						</dt>
						<dd>
							Registers a function (by <code><a href="lua.html#class:string">string</a></code> name) as a handler for user selection events. These events are triggered when the player selects or deselects units. When such an event occurs, the registered function is called with two arguments - the first being a <code><a href="battle_unit.html#class:battle_unit">battle_unit</a></code> object representing the unit concerned, the second being a <code><a href="lua.html#class:boolean">boolean</a></code> flag indicating whether the unit is being selected or deselected. Note that the function being registered must have already been declared when <code>register_unit_selection_handler</code> is called.

							<h4>Parameters:</h4>
							<table class="parameter_list">
								<colgroup>
									<col style="width: 3%;">
									<col style="width: 12%;">
									<col style="width: 85%;">
								</colgroup>
								<tr>
									<td>
										<p><strong>1</strong></p>
									</td>
									<td>
										<p><code><code><a href="lua.html#class:string">string</a></code></code></p>
									</td>
									<td>
										<p>input handler function</p>
									</td>
								</tr>
							</table>

							<h4>Returns:</h4>
							<ol>
								<li><code>nil</code></li>
							</ol>

							<h4>Example:</h4>
							<div id="example_code"><code>
								 function my_unit_selection_handler(unit, is_selected)<br />
								 &emsp;&emsp;&emsp;&emsp;if is_selected then<br />
								&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;-- track selected units<br />
								&emsp;&emsp;&emsp;&emsp;else<br />
								&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;-- track unselected units<br />
								&emsp;&emsp;&emsp;&emsp;end<br />
								 end<br />
								 bm:register_unit_selection_handler("my_unit_selection_handler")<br />
							</code></div>
							<p class="file_comment">defined in ../../common/EmpireBattle/Source/BattleScript/BattleEditorScriptInterface.cpp, line 9591</p>
						</dd>
					</dl>
					<dl class="function">
						<dt>
							<a name="function:battle:unregister_unit_selection_handler"><h3 class="function_name"><strong><code>battle:unregister_unit_selection_handler()</code></strong></h3></a>
						</dt>
						<dd>
							Unregisters the currently-registered unit selection handler function. A unit selection handler may be registered with <code><a href="#function:battle:register_unit_selection_handler">battle:register_unit_selection_handler</a></code>.


							<h4>Returns:</h4>
							<ol>
								<li><code>nil</code></li>
							</ol>
							<p class="file_comment">defined in ../../common/EmpireBattle/Source/BattleScript/BattleEditorScriptInterface.cpp, line 9608</p>
						</dd>
					</dl>
					<dl class="function">
						<dt>
							<a name="function:battle:register_command_handler"><h3 class="function_name"><strong><code>battle:register_command_handler(<code><a href="lua.html#class:string">string</a></code> </strong></code><i class="parameter">command handler function</i><code><strong>)</code></strong></h3></a>
						</dt>
						<dd>
							Registers a function (by <code><a href="lua.html#class:string">string</a></code> name) as a handler for command events. Command events are triggered when the player (or script) issues certain commands. When such an event occurs, the registered function is called and passed an <code>event</code> object as a single argument. This object provides several methods which can be used to determine information about the issued command. These methods are listed below:<br />
							<table class="simple"><tr><th>Method</th><th>Description</th></tr><br />
							<tr><td><code>event:get_name()</code></td><td>Returns the <code><a href="lua.html#class:string">string</a></code> name of the issued command. This is provided for every event type.</td></tr>

							<tr><td><code>event:get_bool1()</code></td><td>Returns a <code><a href="lua.html#class:boolean">boolean</a></code> value related to the issued command, if any.</td></tr>

							<tr><td><code>event:get_string1()</code></td><td>Returns a <code><a href="lua.html#class:string">string</a></code> value related to the issued command, if any.</td></tr>

							<tr><td><code>event:get_position()</code></td><td>Returns a <code><a href="battle_vector.html#class:battle_vector">battle_vector</a></code> related to the issued command, if any.</td></tr>

							<tr><td><code>event:get_unit()</code></td><td>Returns a <code><a href="battle_unit.html#class:battle_unit">battle_unit</a></code> related to the issued command, if any.</td></tr>

							<tr><td><code>event:get_building()</code></td><td>Returns a <code><a href="battle_building.html#class:battle_building">battle_building</a></code> related to the issued command, if any.</td></tr></table>

							Note that each event type only provides methods that are relevant. The list of valid event types, and what methods they provide, are listed here:<br />
							<table class="simple"><tr><th>Event Type</th><th>Event Description</th><th>Method Provided</th><th>Method Return Type</th><th>Method Description</th></tr><br />
							<tr><td><code>Group Created</code></td><td>A group has been created</td><td><code>event:get_name()</code></td><td><code><a href="lua.html#class:string">string</a></code></td><td>Name of event</td></tr>

							<tr><td><code>Group Destroyed</code></td><td>A group has been disbanded</td><td><code>event:get_name()</code></td><td><code><a href="lua.html#class:string">string</a></code></td><td>Name of event</td></tr>

							<tr><td><code>Repair Mode</code></td><td>A command to repair a ship has been issued</td><td><code>event:get_name()</code></td><td><code><a href="lua.html#class:string">string</a></code></td><td>Name of event</td></tr>

							<tr><td rowspan=2><code>Move</code></td><td rowspan=2>A movement command has been issued</td><td><code>event:get_name()</code></td><td><code><a href="lua.html#class:string">string</a></code></td><td>Name of event</td></tr><tr><td><code>event:get_bool1()</code></td><td><code><a href="lua.html#class:boolean">boolean</a></code></td><td>Indicates whether the unit is now moving fast/running</td></tr>

							<tr><td><code>Move Orientation Width</code></td><td>A movement command with orientation and width has been issued</td><td><code>event:get_name()</code></td><td><code><a href="lua.html#class:string">string</a></code></td><td>Name of event</td></tr>

							<tr><td><code>Move Rotation Angle</code></td><td>A rotation command has been issued</td><td><code>event:get_name()</code></td><td><code><a href="lua.html#class:string">string</a></code></td><td>Name of event</td></tr>

							<tr><td rowspan=2><code>Change Speed</code></td><td rowspan=2>The speed of a unit has been toggled</td><td><code>event:get_name()</code></td><td><code><a href="lua.html#class:string">string</a></code></td><td>Name of event</td></tr><tr><td><code>event:get_bool1()</code></td><td><code><a href="lua.html#class:boolean">boolean</a></code></td><td>Indicates whether the unit is now moving fast/running</td></tr>

							<tr><td rowspan=3><code>Attack Unit</code></td><td rowspan=3>A command to attack a unit has been issued</td><td><code>event:get_name()</code></td><td><code><a href="lua.html#class:string">string</a></code></td><td>Name of event</td></tr><tr><td><code>event:get_bool1()</code></td><td><code><a href="lua.html#class:boolean">boolean</a></code></td><td>Indicates whether the unit is now moving fast/running</td></tr><tr><td><code>event:get_unit()</code></td><td><code><a href="battle_unit.html#class:battle_unit">battle_unit</a></code></td><td>Returns the target unit</td></tr>

							<tr><td rowspan=2><code>Change Skirmish</code></td><td rowspan=2>Skirmish mode has been toggled on a unit</td><td><code>event:get_name()</code></td><td><code><a href="lua.html#class:string">string</a></code></td><td>Name of event</td></tr><tr><td><code>event:get_bool1()</code></td><td><code><a href="lua.html#class:boolean">boolean</a></code></td><td>Indicates whether skirmish mode is now enabled</td></tr>

							<tr><td rowspan=2><code>Change Melee</code></td><td rowspan=2>Melee mode has been toggled on a unit</td><td><code>event:get_name()</code></td><td><code><a href="lua.html#class:string">string</a></code></td><td>Name of event</td></tr><tr><td><code>event:get_bool1()</code></td><td><code><a href="lua.html#class:boolean">boolean</a></code></td><td>Indicates whether melee mode is now enabled</td></tr>

							<tr><td rowspan=2><code>Change Formation</code></td><td rowspan=2>A command to change formation has been issued</td><td><code>event:get_name()</code></td><td><code><a href="lua.html#class:string">string</a></code></td><td>Name of event</td></tr><tr><td><code>event:get_string1()</code></td><td><code><a href="lua.html#class:string">string</a></code></td><td>Returns the name of the formation</td></tr>

							<tr><td rowspan=3><code>Attack Building</code></td><td rowspan=3>A command to attack a building has been issued</td><td><code>event:get_name()</code></td><td><code><a href="lua.html#class:string">string</a></code></td><td>Name of event</td></tr><tr><td><code>event:get_bool1()</code></td><td><code><a href="lua.html#class:boolean">boolean</a></code></td><td>Indicates whether the unit is now moving fast/running</td></tr><tr><td><code>event:get_building()</code></td><td><code><a href="battle_building.html#class:battle_building">battle_building</a></code></td><td>Returns the target building</td></tr>

							<tr><td rowspan=3><code>Climb/Dock Building</code></td><td rowspan=3>A command to climb a building has been issued</td><td><code>event:get_name()</code></td><td><code><a href="lua.html#class:string">string</a></code></td><td>Name of event</td></tr><tr><td><code>event:get_bool1()</code></td><td><code><a href="lua.html#class:boolean">boolean</a></code></td><td>Indicates whether the unit is now moving fast/running</td></tr><tr><td><code>event:get_building()</code></td><td><code><a href="battle_building.html#class:battle_building">battle_building</a></code></td><td>Returns the target building</td></tr>

							<tr><td rowspan=2><code>Special Ability</code></td><td rowspan=2>A command to use a special ability has been issued</td><td><code>event:get_name()</code></td><td><code><a href="lua.html#class:string">string</a></code></td><td>Name of event</td></tr><tr><td><code>event:get_string1()</code></td><td><code><a href="lua.html#class:string">string</a></code></td><td>Returns the name of the special ability</td></tr>

							<tr><td rowspan=2><code>Shot Type</code></td><td rowspan=2>A command to change shot type has been issued</td><td><code>event:get_name()</code></td><td><code><a href="lua.html#class:string">string</a></code></td><td>Name of event</td></tr><tr><td><code>event:get_string1()</code></td><td><code><a href="lua.html#class:string">string</a></code></td><td>Returns the name of the shot type</td></tr>

							<tr><td><code>Fire At Will</code></td><td>Fire-at-will mode has been toggled on a unit</td><td><code>event:get_name()</code></td><td><code><a href="lua.html#class:string">string</a></code></td><td>Name of event</td></tr>

							<tr><td rowspan=2><code>Broadside Attack</code></td><td rowspan=2>A broadside attack command has been issued</td><td><code>event:get_name()</code></td><td><code><a href="lua.html#class:string">string</a></code></td><td>Name of event</td></tr><tr><td><code>event:get_bool1()</code></td><td><code><a href="lua.html#class:boolean">boolean</a></code></td><td>Returns <code>true</code> if the broadside is on the left side of the ship, <code>false</code> otherwise</td></tr>

							<tr><td rowspan=2><code>Naval Shot Type</code></td><td rowspan=2>A command to change the shot type of a ship has been issued</td><td><code>event:get_name()</code></td><td><code><a href="lua.html#class:string">string</a></code></td><td>Name of event</td></tr><tr><td><code>event:get_string1()</code></td><td><code><a href="lua.html#class:string">string</a></code></td><td>Returns the name of the shot type</td></tr>

							<tr><td><code>Ram</code></td><td>A command to ram a ship has been issued</td><td><code>event:get_name()</code></td><td><code><a href="lua.html#class:string">string</a></code></td><td>Name of event</td></tr>

							<tr><td rowspan=2><code>Withdraw</code></td><td rowspan=2>A command to withdraw a unit has been issued</td><td><code>event:get_name()</code></td><td><code><a href="lua.html#class:string">string</a></code></td><td>Name of event</td></tr><tr><td><code>event:get_bool1()</code></td><td><code><a href="lua.html#class:boolean">boolean</a></code></td><td>Indicates whether the unit is now moving fast/running</td></tr>

							<tr><td><code>Halt</code></td><td>A command to halt a unit has been issued</td><td><code>event:get_name()</code></td><td><code><a href="lua.html#class:string">string</a></code></td><td>Name of event</td></tr>

							<tr><td><code>Double Click</code></td><td>The double-click UI gesture has been issued for the selected units</td><td><code>event:get_name()</code></td><td><code><a href="lua.html#class:string">string</a></code></td><td>Name of event</td></tr>

							<tr><td rowspan=3><code>Entity Hit</code></td><td rowspan=3>A unit has been hit by a projectile</td><td><code>event:get_name()</code></td><td><code><a href="lua.html#class:string">string</a></code></td><td>Name of event</td></tr><tr><td><code>event:get_bool1()</code></td><td><code><a href="lua.html#class:boolean">boolean</a></code></td><td>Indicates whether artillery fired the projectile</td></tr><tr><td><code>event:get_unit()</code></td><td><code><a href="battle_unit.html#class:battle_unit">battle_unit</a></code></td><td>Returns the unit that was hit</td></tr>

							<tr><td rowspan=2><code>Double Click Unit Card</code></td><td rowspan=2>A unit card has been double-clicked upon</td><td><code>event:get_name()</code></td><td><code><a href="lua.html#class:string">string</a></code></td><td>Name of event</td></tr><tr><td><code>event:get_unit()</code></td><td><code><a href="battle_unit.html#class:battle_unit">battle_unit</a></code></td><td>Returns the subject unit</td></tr>

							<tr><td rowspan=2><code>Unit Left Battlefield</code></td><td rowspan=2>A unit has left the battlefield</td><td><code>event:get_name()</code></td><td><code><a href="lua.html#class:string">string</a></code></td><td>Name of event</td></tr><tr><td><code>event:get_unit()</code></td><td><code><a href="battle_unit.html#class:battle_unit">battle_unit</a></code></td><td>Returns the subject unit</td></tr>

							<tr><td rowspan=2><code>Battle Results</code></td><td rowspan=2>The battle has finished and the results have been issued</td><td><code>event:get_name()</code></td><td><code><a href="lua.html#class:string">string</a></code></td><td>Name of event</td></tr><tr><td><code>event:get_bool1()</code></td><td><code><a href="lua.html#class:boolean">boolean</a></code></td><td>Indicates whether the local alliance won the battle</td></tr></table>

							Note that the function being registered must have already been declared when <code>register_command_handler</code> is called.

							<h4>Parameters:</h4>
							<table class="parameter_list">
								<colgroup>
									<col style="width: 3%;">
									<col style="width: 12%;">
									<col style="width: 85%;">
								</colgroup>
								<tr>
									<td>
										<p><strong>1</strong></p>
									</td>
									<td>
										<p><code><code><a href="lua.html#class:string">string</a></code></code></p>
									</td>
									<td>
										<p>command handler function</p>
									</td>
								</tr>
							</table>

							<h4>Returns:</h4>
							<ol>
								<li><code>nil</code></li>
							</ol>

							<h4>Example:</h4>
							<div id="example_code"><code>
								 function my_command_handler(event)<br />
								 &emsp;&emsp;&emsp;&emsp;local event_name = event:get_name()<br />
								 &emsp;&emsp;&emsp;&emsp;if event_name == "Move" then<br />
								&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;-- handle move orders<br />
								&emsp;&emsp;&emsp;&emsp;elseif event_name == "Attack Unit" then<br />
								&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;-- handle attack unit orders<br />
								&emsp;&emsp;&emsp;&emsp;end<br />
								 end<br />
								 bm:register_command_handler("my_command_handler")<br />
							</code></div>
							<p class="file_comment">defined in ../../common/EmpireBattle/Source/BattleScript/BattleEditorScriptInterface.cpp, line 9616</p>
						</dd>
					</dl>
					<dl class="function">
						<dt>
							<a name="function:battle:unregister_command_handler"><h3 class="function_name"><strong><code>battle:unregister_command_handler()</code></strong></h3></a>
						</dt>
						<dd>
							Unregisters the currently-registered command handler function. A command handler may be registered with <code><a href="#function:battle:register_command_handler">battle:register_command_handler</a></code>.


							<h4>Returns:</h4>
							<ol>
								<li><code>nil</code></li>
							</ol>
							<p class="file_comment">defined in ../../common/EmpireBattle/Source/BattleScript/BattleEditorScriptInterface.cpp, line 9673</p>
						</dd>
					</dl>
					<dl class="function">
						<dt>
							<a name="function:battle:register_battle_phase_handler"><h3 class="function_name"><strong><code>battle:register_battle_phase_handler(<code><a href="lua.html#class:string">string</a></code> </strong></code><i class="parameter">function name</i><code><strong>)</code></strong></h3></a>
						</dt>
						<dd>
							Registers a function (by <code><a href="lua.html#class:string">string</a></code> name) as a handler for battle phase changes. Battle phase changes are triggered when the battle moves into various distinct phases, the most important being the <code>deployment</code> and <code>deployment</code> (combat) phases. When a battle phase occurs, the registered function is called and passed the <code><a href="lua.html#class:string">string</a></code> name of the new battle phase as a single argument. Valid phases are listed below:<br />
							<table class="simple"><tr><th>Phase Name</th><th>Description</th></tr><br />
							<tr><td><code>Startup</code></td><td>This phase change is triggered after the scripts are loaded.</td></tr>

							<tr><td><code>PrebattleWeather</code></td><td>Triggered after <code>Startup</code> phase.</td></tr>

							<tr><td><code>PrebattleCinematic</code></td><td>Triggered after <code>PrebattleWeather</code> phase.</td></tr>

							<tr><td><code>Deployment</code></td><td>Deployment phase, when both alliances get to position their troops prior to combat.</td></tr>

							<tr><td><code>Deployed</code></td><td>Combat phase, in which the battle is fought.</td></tr>

							<tr><td><code>VictoryCountdown</code></td><td>A victor for the battle has been determined, and the battle is counting down to completion.</td></tr>

							<tr><td><code>Complete</code></td><td>The battle is completed.</td></tr></table>

							Note that the function being registered must have already been declared when <code>register_unit_selection_handler</code> is called. Furthermore, it is recommended that <code><a href="battle_manager.html#function:battle_manager:register_phase_change_callback">battle_manager:register_phase_change_callback</a></code> is used in place of this function.

							<h4>Parameters:</h4>
							<table class="parameter_list">
								<colgroup>
									<col style="width: 3%;">
									<col style="width: 12%;">
									<col style="width: 85%;">
								</colgroup>
								<tr>
									<td>
										<p><strong>1</strong></p>
									</td>
									<td>
										<p><code><code><a href="lua.html#class:string">string</a></code></code></p>
									</td>
									<td>
										<p>Function name to call when phase change event occurs.</p>
									</td>
								</tr>
							</table>

							<h4>Returns:</h4>
							<ol>
								<li><code>nil</code></li>
							</ol>

							<h4>Example:</h4>
							<div id="example_code"><code>
								 function my_phase_change_handler(phase_change)<br />
								 &emsp;&emsp;&emsp;&emsp;local <br />
								 &emsp;&emsp;&emsp;&emsp;if phase_change == "deployment" then<br />
								&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;-- handle deployment phase<br />
								&emsp;&emsp;&emsp;&emsp;elseif phase_change == "deployed" then<br />
								&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;-- handle combat phase<br />
								&emsp;&emsp;&emsp;&emsp;end<br />
								 end<br />
								 bm:register_phase_change_handler("my_phase_change_handler")<br />
							</code></div>
							<p class="file_comment">defined in ../../common/EmpireBattle/Source/BattleScript/BattleEditorScriptInterface.cpp, line 9681</p>
						</dd>
					</dl>
					<dl class="function">
						<dt>
							<a name="function:battle:unregister_battle_phase_handler"><h3 class="function_name"><strong><code>battle:unregister_battle_phase_handler()</code></strong></h3></a>
						</dt>
						<dd>
							Unregisters the currently-registered phase change handler function. A phase change handler may be registered with <code><a href="#function:battle:register_battle_phase_handler">battle:register_battle_phase_handler</a></code>.


							<h4>Returns:</h4>
							<ol>
								<li><code>nil</code></li>
							</ol>
							<p class="file_comment">defined in ../../common/EmpireBattle/Source/BattleScript/BattleEditorScriptInterface.cpp, line 9708</p>
						</dd>
					</dl>
					<dl class="function">
						<dt>
							<a name="function:battle:end_current_battle_phase"><h3 class="function_name"><strong><code>battle:end_current_battle_phase()</code></strong></h3></a>
						</dt>
						<dd>
							Immediately ends the current battle phase, moving on to the next phase. The main use for this function is to force deployment phase to end - calling this function has no effect in combat phase. More information about battle phases can be found in the <code><a href="battle_index.html#section:battle_index:Battle Phases">Battle Phases</a></code> section of this documentation.


							<h4>Returns:</h4>
							<ol>
								<li><code>nil</code></li>
							</ol>
							<p class="file_comment">defined in ../../common/EmpireBattle/Source/BattleScript/BattleEditorScriptInterface.cpp, line 9716</p>
						</dd>
					</dl>
				</div>


				<div>
					<a style="float:right;" href="#top">Back to top</a>
					<a name="section:battle:Time and Timers"><h2 class="section_header">Time and Timers</h2></a>
				</div>
				<p>The functions in this section describe the raw interface to the model timer system provided in battle to script. It's strongly recommended that client scripts make use of the functionality provided by the <code><a href="timer_manager.html#class:timer_manager">timer_manager</a></code> (and exposed through the <code><a href="battle_manager.html#class:battle_manager">battle_manager</a></code> - see the <code><a href="battle_manager.html#section:battle_manager:Timer Callbacks">Timer Callbacks</a></code> section of this documentation), rather than calling <code><a href="#function:battle:register_singleshot_timer">battle:register_singleshot_timer</a></code>, <code><a href="#function:battle:register_repeating_timer">battle:register_repeating_timer</a></code> or <code><a href="#function:battle:unregister_timer">battle:unregister_timer</a></code> functions directly.</p>
				<div class="section_body">
					<dl class="function">
						<dt>
							<a name="function:battle:timer_exists"><h3 class="function_name"><strong><code>battle:timer_exists(<code><a href="lua.html#class:string">string</a></code> </strong></code><i class="parameter">function name</i><code><strong>)</code></strong></h3></a>
						</dt>
						<dd>
							Returns whether a timer exists for the specified function name. If a timer does exist, the amount of model time remaining before it triggers in ms is also returned as a second return parameter.

							<h4>Parameters:</h4>
							<table class="parameter_list">
								<colgroup>
									<col style="width: 3%;">
									<col style="width: 12%;">
									<col style="width: 85%;">
								</colgroup>
								<tr>
									<td>
										<p><strong>1</strong></p>
									</td>
									<td>
										<p><code><code><a href="lua.html#class:string">string</a></code></code></p>
									</td>
									<td>
										<p>function name</p>
									</td>
								</tr>
							</table>

							<h4>Returns:</h4>
							<ol>
								<li><code><code><a href="lua.html#class:boolean">boolean</a></code></code> timer exists</li>
								<li><code><code><a href="lua.html#class:number">number</a></code></code> model time before timer triggers</li>
							</ol>
							<p class="file_comment">defined in ../../common/EmpireBattle/Source/BattleScript/BattleEditorScriptInterface.cpp, line 9728</p>
						</dd>
					</dl>
					<dl class="function">
						<dt>
							<a name="function:battle:register_singleshot_timer"><h3 class="function_name"><strong><code>battle:register_singleshot_timer(<code><a href="lua.html#class:string">string</a></code> </strong></code><i class="parameter">function name</i><code><strong>, <code><a href="lua.html#class:number">number</a></code> </strong></code><i class="parameter">interval</i><code><strong>)</code></strong></h3></a>
						</dt>
						<dd>
							Registers a singleshot timer. A function name must be specified as a <code><a href="lua.html#class:string">string</a></code>, along with an interval. The battle model then calls the function with the given name after the specified interval. No arguments may be specified for the function. Only one timer instance can be registered for a given function - repeated calls to <code><a href="#function:battle:register_singleshot_timer">battle:register_singleshot_timer</a></code> or <code><a href="#function:battle:register_repeating_timer">battle:register_repeating_timer</a></code> will overwrite any previous timers.<br />
							It is strongly recommended that client scripts do not call this directly but instead use the <code><a href="battle_manager.html#function:battle_manager:callback">battle_manager:callback</a></code> function, which allows arguments to be passed, multiple instances of timers for the same callback, and more flexible cancellation of the callback.

							<h4>Parameters:</h4>
							<table class="parameter_list">
								<colgroup>
									<col style="width: 3%;">
									<col style="width: 12%;">
									<col style="width: 85%;">
								</colgroup>
								<tr>
									<td>
										<p><strong>1</strong></p>
									</td>
									<td>
										<p><code><code><a href="lua.html#class:string">string</a></code></code></p>
									</td>
									<td>
										<p>Function name.</p>
									</td>
								</tr>
								<tr>
									<td>
										<p><strong>2</strong></p>
									</td>
									<td>
										<p><code><code><a href="lua.html#class:number">number</a></code></code></p>
									</td>
									<td>
										<p>Interval in ms.</p>
									</td>
								</tr>
							</table>

							<h4>Returns:</h4>
							<ol>
								<li><code>nil</code></li>
							</ol>
							<p class="file_comment">defined in ../../common/EmpireBattle/Source/BattleScript/BattleEditorScriptInterface.cpp, line 9739</p>
						</dd>
					</dl>
					<dl class="function">
						<dt>
							<a name="function:battle:register_repeating_timer"><h3 class="function_name"><strong><code>battle:register_repeating_timer(<code><a href="lua.html#class:string">string</a></code> </strong></code><i class="parameter">function name</i><code><strong>, <code><a href="lua.html#class:number">number</a></code> </strong></code><i class="parameter">interval</i><code><strong>)</code></strong></h3></a>
						</dt>
						<dd>
							Registers a repeating timer. A function name must be specified as a <code><a href="lua.html#class:string">string</a></code>, along with an interval. The battle model then calls the function with the given name each time the specified interval elapses. No arguments may be specified for the function. Only one timer instance can be registered for a given function. Only one timer instance can be registered for a given function - repeated calls to <code><a href="#function:battle:register_singleshot_timer">battle:register_singleshot_timer</a></code> or <code><a href="#function:battle:register_repeating_timer">battle:register_repeating_timer</a></code> will overwrite any previous timers.<br />
							It is strongly recommended that client scripts do not call this directly but instead use the <code><a href="battle_manager.html#function:battle_manager:repeat_callback">battle_manager:repeat_callback</a></code> function, which allows arguments to be passed, multiple instances of timers for the same callback, and more flexible cancellation of the callback.

							<h4>Parameters:</h4>
							<table class="parameter_list">
								<colgroup>
									<col style="width: 3%;">
									<col style="width: 12%;">
									<col style="width: 85%;">
								</colgroup>
								<tr>
									<td>
										<p><strong>1</strong></p>
									</td>
									<td>
										<p><code><code><a href="lua.html#class:string">string</a></code></code></p>
									</td>
									<td>
										<p>Function name.</p>
									</td>
								</tr>
								<tr>
									<td>
										<p><strong>2</strong></p>
									</td>
									<td>
										<p><code><code><a href="lua.html#class:number">number</a></code></code></p>
									</td>
									<td>
										<p>Interval in ms.</p>
									</td>
								</tr>
							</table>

							<h4>Returns:</h4>
							<ol>
								<li><code>nil</code></li>
							</ol>
							<p class="file_comment">defined in ../../common/EmpireBattle/Source/BattleScript/BattleEditorScriptInterface.cpp, line 9750</p>
						</dd>
					</dl>
					<dl class="function">
						<dt>
							<a name="function:battle:unregister_timer"><h3 class="function_name"><strong><code>battle:unregister_timer(<code><a href="lua.html#class:string">string</a></code> </strong></code><i class="parameter">function name</i><code><strong>)</code></strong></h3></a>
						</dt>
						<dd>
							Unegisters a timer (whether registered with <code><a href="#function:battle:register_singleshot_timer">battle:register_singleshot_timer</a></code> or <code><a href="#function:battle:register_repeating_timer">battle:register_repeating_timer</a></code>), by it's <code><a href="lua.html#class:string">string</a></code> function name. In the case of a singleshot function this must be called before the function is triggered. <br />
							It is strongly recommended that client scripts use <code><a href="battle_manager.html#function:battle_manager:callback">battle_manager:callback</a></code>, <code><a href="battle_manager.html#function:battle_manager:repeat_callback">battle_manager:repeat_callback</a></code> and then <code><a href="battle_manager.html#function:battle_manager:remove_process">battle_manager:remove_process</a></code> due to ease-of-use.

							<h4>Parameters:</h4>
							<table class="parameter_list">
								<colgroup>
									<col style="width: 3%;">
									<col style="width: 12%;">
									<col style="width: 85%;">
								</colgroup>
								<tr>
									<td>
										<p><strong>1</strong></p>
									</td>
									<td>
										<p><code><code><a href="lua.html#class:string">string</a></code></code></p>
									</td>
									<td>
										<p>Function name to unregister.</p>
									</td>
								</tr>
							</table>

							<h4>Returns:</h4>
							<ol>
								<li><code>nil</code></li>
							</ol>
							<p class="file_comment">defined in ../../common/EmpireBattle/Source/BattleScript/BattleEditorScriptInterface.cpp, line 9761</p>
						</dd>
					</dl>
					<dl class="function">
						<dt>
							<a name="function:battle:time_elapsed_ms"><h3 class="function_name"><strong><code>battle:time_elapsed_ms()</code></strong></h3></a>
						</dt>
						<dd>
							Returns the amount of model time that's elapsed since the start of the battle, in milliseconds.


							<h4>Returns:</h4>
							<ol>
								<li><code><code><a href="lua.html#class:number">number</a></code></code> time elapsed</li>
							</ol>
							<p class="file_comment">defined in ../../common/EmpireBattle/Source/BattleScript/BattleEditorScriptInterface.cpp, line 9771</p>
						</dd>
					</dl>
					<dl class="function">
						<dt>
							<a name="function:battle:model_tick_time_ms"><h3 class="function_name"><strong><code>battle:model_tick_time_ms()</code></strong></h3></a>
						</dt>
						<dd>
							Returns the model tick time in milliseconds. This is the target interval over which the battle model repeatedly updates - 100ms or 200ms.


							<h4>Returns:</h4>
							<ol>
								<li><code><code><a href="lua.html#class:number">number</a></code></code> tick time</li>
							</ol>
							<p class="file_comment">defined in ../../common/EmpireBattle/Source/BattleScript/BattleEditorScriptInterface.cpp, line 9780</p>
						</dd>
					</dl>
					<dl class="function">
						<dt>
							<a name="function:battle:remaining_conflict_time"><h3 class="function_name"><strong><code>battle:remaining_conflict_time()</code></strong></h3></a>
						</dt>
						<dd>
							Returns the duration remaining before the battle time limit expires, in seconds. If no time limit is set then -1 is returned.


							<h4>Returns:</h4>
							<ol>
								<li><code><code><a href="lua.html#class:number">number</a></code></code> remaining time</li>
							</ol>
							<p class="file_comment">defined in ../../common/EmpireBattle/Source/BattleScript/BattleEditorScriptInterface.cpp, line 9789</p>
						</dd>
					</dl>
					<dl class="function">
						<dt>
							<a name="function:battle:modify_battle_speed"><h3 class="function_name"><strong><code>battle:modify_battle_speed(<code><a href="lua.html#class:number">number</a></code> </strong></code><i class="parameter">battle speed</i><code><strong>)</code></strong></h3></a>
						</dt>
						<dd>
							Adjusts the game speed. The value supplied should be a unary proportion of normal speed, for example:<ul><br />
							<li>Set a speed of <code>1</code> to run the battle at normal speed.</li><br />
							<li>Set a speed of <code>3</code> to run the battle at triple speed.</li><br />
							<li>Set a speed of <code>0.5</code> to run the battle at half speed.</li><br />
							<li>Set a speed of <code>0</code> to pause the battle.</li></ul><br />
							Beware that pausing the battle will prevent model time from advancing, which will also affect script.<br />
							The battle speed may be restored to the value previously set by the player by calling <code><a href="#function:battle:restore_battle_speed">battle:restore_battle_speed</a></code>.

							<h4>Parameters:</h4>
							<table class="parameter_list">
								<colgroup>
									<col style="width: 3%;">
									<col style="width: 12%;">
									<col style="width: 85%;">
								</colgroup>
								<tr>
									<td>
										<p><strong>1</strong></p>
									</td>
									<td>
										<p><code><code><a href="lua.html#class:number">number</a></code></code></p>
									</td>
									<td>
										<p>battle speed</p>
									</td>
								</tr>
							</table>

							<h4>Returns:</h4>
							<ol>
								<li><code>nil</code></li>
							</ol>
							<p class="file_comment">defined in ../../common/EmpireBattle/Source/BattleScript/BattleEditorScriptInterface.cpp, line 9798</p>
						</dd>
					</dl>
					<dl class="function">
						<dt>
							<a name="function:battle:current_battle_speed"><h3 class="function_name"><strong><code>battle:current_battle_speed()</code></strong></h3></a>
						</dt>
						<dd>
							Returns the current game speed.


							<h4>Returns:</h4>
							<ol>
								<li><code><code><a href="lua.html#class:number">number</a></code></code> battle speed</li>
							</ol>
							<p class="file_comment">defined in ../../common/EmpireBattle/Source/BattleScript/BattleEditorScriptInterface.cpp, line 9813</p>
						</dd>
					</dl>
					<dl class="function">
						<dt>
							<a name="function:battle:restore_battle_speed"><h3 class="function_name"><strong><code>battle:restore_battle_speed()</code></strong></h3></a>
						</dt>
						<dd>
							Restores the game speed to the value that was previously set when <code><a href="#function:battle:modify_battle_speed">battle:modify_battle_speed</a></code> was last called.


							<h4>Returns:</h4>
							<ol>
								<li><code>nil</code></li>
							</ol>
							<p class="file_comment">defined in ../../common/EmpireBattle/Source/BattleScript/BattleEditorScriptInterface.cpp, line 9822</p>
						</dd>
					</dl>
					<dl class="function">
						<dt>
							<a name="function:battle:change_conflict_time_update_overridden"><h3 class="function_name"><strong><code>battle:change_conflict_time_update_overridden(<code><a href="lua.html#class:boolean">boolean</a></code> </strong></code><i class="parameter">disable update</i><code><strong>)</code></strong></h3></a>
						</dt>
						<dd>
							Enables or disables the countdown of the conflict timer. Call with an argument of <code>true</code> to disable the countdown of the conflict timer, or <code>false</code> to enable it again. With conflict time update overridden, time can pass but the victory timer will not count down.

							<h4>Parameters:</h4>
							<table class="parameter_list">
								<colgroup>
									<col style="width: 3%;">
									<col style="width: 12%;">
									<col style="width: 85%;">
								</colgroup>
								<tr>
									<td>
										<p><strong>1</strong></p>
									</td>
									<td>
										<p><code><code><a href="lua.html#class:boolean">boolean</a></code></code></p>
									</td>
									<td>
										<p>disable update</p>
									</td>
								</tr>
							</table>

							<h4>Returns:</h4>
							<ol>
								<li><code>nil</code></li>
							</ol>
							<p class="file_comment">defined in ../../common/EmpireBattle/Source/BattleScript/BattleEditorScriptInterface.cpp, line 9830</p>
						</dd>
					</dl>
					<dl class="function">
						<dt>
							<a name="function:battle:change_victory_countdown_limit"><h3 class="function_name"><strong><code>battle:change_victory_countdown_limit(<code><a href="lua.html#class:number">number</a></code> </strong></code><i class="parameter">time limit</i><code><strong>)</code></strong></h3></a>
						</dt>
						<dd>
							Change the victory countdown limit. This is the grace period that begins counting down once a victor in the battle has been determined but before the battle actually ends, and is usually ten seconds. Battle scripts can use this function to adjust the duration of this countdown in order to display outro advice or cutscene content without having it cut off.<br />
							Supply a limit of less than 0 to make the victory countdown period infinite. If the battle enters the victory countdown phase with an infinite period set, and then a limit of 0 is set with a subsequent call to this function, the battle complete phase will trigger immediately.

							<h4>Parameters:</h4>
							<table class="parameter_list">
								<colgroup>
									<col style="width: 3%;">
									<col style="width: 12%;">
									<col style="width: 85%;">
								</colgroup>
								<tr>
									<td>
										<p><strong>1</strong></p>
									</td>
									<td>
										<p><code><code><a href="lua.html#class:number">number</a></code></code></p>
									</td>
									<td>
										<p>Time limit in seconds.</p>
									</td>
								</tr>
							</table>

							<h4>Returns:</h4>
							<ol>
								<li><code>nil</code></li>
							</ol>
							<p class="file_comment">defined in ../../common/EmpireBattle/Source/BattleScript/BattleEditorScriptInterface.cpp, line 9839</p>
						</dd>
					</dl>
					<dl class="function">
						<dt>
							<a name="function:battle:force_cant_chase_down_routers"><h3 class="function_name"><strong><code>battle:force_cant_chase_down_routers()</code></strong></h3></a>
						</dt>
						<dd>
							Force battle end to not wait for chasing routers


							<h4>Returns:</h4>
							<ol>
								<li><code>nil</code></li>
							</ol>
							<p class="file_comment">defined in ../../common/EmpireBattle/Source/BattleScript/BattleEditorScriptInterface.cpp, line 9848</p>
						</dd>
					</dl>
				</div>


				<div>
					<a style="float:right;" href="#top">Back to top</a>
					<a name="section:battle:Cindy and Composite Scenes"><h2 class="section_header">Cindy and Composite Scenes</h2></a>
				</div>
				<div class="section_body">
					<dl class="function">
						<dt>
							<a name="function:battle:cindy_preload"><h3 class="function_name"><strong><code>battle:cindy_preload(<code><a href="lua.html#class:string">string</a></code> </strong></code><i class="parameter">scene path</i><code><strong>)</code></strong></h3></a>
						</dt>
						<dd>
							Preloads a cindy scene. Calling this prior to a cindy scene being played can help prevent a noticeable stall at the start of playback.

							<h4>Parameters:</h4>
							<table class="parameter_list">
								<colgroup>
									<col style="width: 3%;">
									<col style="width: 12%;">
									<col style="width: 85%;">
								</colgroup>
								<tr>
									<td>
										<p><strong>1</strong></p>
									</td>
									<td>
										<p><code><code><a href="lua.html#class:string">string</a></code></code></p>
									</td>
									<td>
										<p>Path to the cindy scene manager file, from the working data folder.</p>
									</td>
								</tr>
							</table>

							<h4>Returns:</h4>
							<ol>
								<li><code>nil</code></li>
							</ol>
							<p class="file_comment">defined in ../../common/EmpireBattle/Source/BattleScript/BattleEditorScriptInterface.cpp, line 9858</p>
						</dd>
					</dl>
					<dl class="function">
						<dt>
							<a name="function:battle:cindy_playback"><h3 class="function_name"><strong><code>battle:cindy_playback(<code><a href="lua.html#class:string">string</a></code> </strong></code><i class="parameter">scene path</i><code><strong>, [<code><a href="lua.html#class:number">number</a></code> </strong></code><i class="parameter">blend in</i><code><strong>], [<code><a href="lua.html#class:number">number</a></code> </strong></code><i class="parameter">blend out</i><code><strong>])</code></strong></h3></a>
						</dt>
						<dd>
							Starts a cindy scene. This plays a cindy cinematic, taking control of the camera. <code><a href="#function:battle:cindy_preload">battle:cindy_preload</a></code> can be called prior to calling this function to preload the scene data.

							<h4>Parameters:</h4>
							<table class="parameter_list">
								<colgroup>
									<col style="width: 3%;">
									<col style="width: 12%;">
									<col style="width: 85%;">
								</colgroup>
								<tr>
									<td>
										<p><strong>1</strong></p>
									</td>
									<td>
										<p><code><code><a href="lua.html#class:string">string</a></code></code></p>
									</td>
									<td>
										<p>Path to the cindy scene manager file, from the working data folder.</p>
									</td>
								</tr>
								<tr>
									<td>
										<p><strong>2</strong></p>
									</td>
									<td>
										<p><code><code><a href="lua.html#class:number">number</a></code></code></p>
									</td>
									<td>
										<p><i>optional, default value=0</i></p>
										<p>Blend in duration in seconds.</p>
									</td>
								</tr>
								<tr>
									<td>
										<p><strong>3</strong></p>
									</td>
									<td>
										<p><code><code><a href="lua.html#class:number">number</a></code></code></p>
									</td>
									<td>
										<p><i>optional, default value=10</i></p>
										<p>Blend out duration in seconds.</p>
									</td>
								</tr>
							</table>

							<h4>Returns:</h4>
							<ol>
								<li><code>nil</code></li>
							</ol>
							<p class="file_comment">defined in ../../common/EmpireBattle/Source/BattleScript/BattleEditorScriptInterface.cpp, line 9867</p>
						</dd>
					</dl>
					<dl class="function">
						<dt>
							<a name="function:battle:cindy_playback_no_camera"><h3 class="function_name"><strong><code>battle:cindy_playback_no_camera(<code><a href="lua.html#class:string">string</a></code> </strong></code><i class="parameter">scene path</i><code><strong>, <code><a href="lua.html#class:boolean">boolean</a></code> </strong></code><i class="parameter">clear scene</i><code><strong>, [<code><a href="lua.html#class:boolean">boolean</a></code> </strong></code><i class="parameter">save to replay</i><code><strong>])</code></strong></h3></a>
						</dt>
						<dd>
							Starts a cindy scene without a camera track. This can be run in parallel with a scene initiated with <code><a href="#function:battle:cindy_playback">battle:cindy_playback</a></code>. <code><a href="#function:battle:cindy_preload">battle:cindy_preload</a></code> can be called prior to calling this function to preload the scene data.

							<h4>Parameters:</h4>
							<table class="parameter_list">
								<colgroup>
									<col style="width: 3%;">
									<col style="width: 12%;">
									<col style="width: 85%;">
								</colgroup>
								<tr>
									<td>
										<p><strong>1</strong></p>
									</td>
									<td>
										<p><code><code><a href="lua.html#class:string">string</a></code></code></p>
									</td>
									<td>
										<p>Path to the cindy scene manager file, from the working data folder.</p>
									</td>
								</tr>
								<tr>
									<td>
										<p><strong>2</strong></p>
									</td>
									<td>
										<p><code><code><a href="lua.html#class:boolean">boolean</a></code></code></p>
									</td>
									<td>
										<p>Clear animated scenes on completion.</p>
									</td>
								</tr>
								<tr>
									<td>
										<p><strong>3</strong></p>
									</td>
									<td>
										<p><code><code><a href="lua.html#class:boolean">boolean</a></code></code></p>
									</td>
									<td>
										<p><i>optional, default value=true</i></p>
										<p>Saves the cindy scene into the battle replay, so if the replay is loaded the cindy scene plays again.</p>
									</td>
								</tr>
							</table>

							<h4>Returns:</h4>
							<ol>
								<li><code>nil</code></li>
							</ol>
							<p class="file_comment">defined in ../../common/EmpireBattle/Source/BattleScript/BattleEditorScriptInterface.cpp, line 9878</p>
						</dd>
					</dl>
					<dl class="function">
						<dt>
							<a name="function:battle:stop_cindy_playback"><h3 class="function_name"><strong><code>battle:stop_cindy_playback([<code><a href="lua.html#class:boolean">boolean</a></code> </strong></code><i class="parameter">clear animated scenes</i><code><strong>])</code></strong></h3></a>
						</dt>
						<dd>
							Stops a cindy scene that was started with <code><a href="#function:battle:cindy_playback">battle:cindy_playback</a></code>.

							<h4>Parameters:</h4>
							<table class="parameter_list">
								<colgroup>
									<col style="width: 3%;">
									<col style="width: 12%;">
									<col style="width: 85%;">
								</colgroup>
								<tr>
									<td>
										<p><strong>1</strong></p>
									</td>
									<td>
										<p><code><code><a href="lua.html#class:boolean">boolean</a></code></code></p>
									</td>
									<td>
										<p><i>optional, default value=false</i></p>
										<p>clear animated scenes</p>
									</td>
								</tr>
							</table>

							<h4>Returns:</h4>
							<ol>
								<li><code>nil</code></li>
							</ol>
							<p class="file_comment">defined in ../../common/EmpireBattle/Source/BattleScript/BattleEditorScriptInterface.cpp, line 9889</p>
						</dd>
					</dl>
					<dl class="function">
						<dt>
							<a name="function:battle:stop_cindy_playback_no_camera"><h3 class="function_name"><strong><code>battle:stop_cindy_playback_no_camera([<code><a href="lua.html#class:boolean">boolean</a></code> </strong></code><i class="parameter">clear animated scenes</i><code><strong>])</code></strong></h3></a>
						</dt>
						<dd>
							Stops a cindy scene that was started with <code><a href="#function:battle:cindy_playback_no_camera">battle:cindy_playback_no_camera</a></code>.

							<h4>Parameters:</h4>
							<table class="parameter_list">
								<colgroup>
									<col style="width: 3%;">
									<col style="width: 12%;">
									<col style="width: 85%;">
								</colgroup>
								<tr>
									<td>
										<p><strong>1</strong></p>
									</td>
									<td>
										<p><code><code><a href="lua.html#class:boolean">boolean</a></code></code></p>
									</td>
									<td>
										<p><i>optional, default value=false</i></p>
										<p>clear animated scenes</p>
									</td>
								</tr>
							</table>

							<h4>Returns:</h4>
							<ol>
								<li><code>nil</code></li>
							</ol>
							<p class="file_comment">defined in ../../common/EmpireBattle/Source/BattleScript/BattleEditorScriptInterface.cpp, line 9898</p>
						</dd>
					</dl>
					<dl class="function">
						<dt>
							<a name="function:battle:start_terrain_composite_scene"><h3 class="function_name"><strong><code>battle:start_terrain_composite_scene(<code><a href="lua.html#class:string">string</a></code> </strong></code><i class="parameter">scene key</i><code><strong>)</code></strong></h3></a>
						</dt>
						<dd>
							Starts a composite scene. The composite scene should be specified by its path from the working data folder.

							<h4>Parameters:</h4>
							<table class="parameter_list">
								<colgroup>
									<col style="width: 3%;">
									<col style="width: 12%;">
									<col style="width: 85%;">
								</colgroup>
								<tr>
									<td>
										<p><strong>1</strong></p>
									</td>
									<td>
										<p><code><code><a href="lua.html#class:string">string</a></code></code></p>
									</td>
									<td>
										<p>Composite scene key.</p>
									</td>
								</tr>
							</table>

							<h4>Returns:</h4>
							<ol>
								<li><code>nil</code></li>
							</ol>

							<h4>Example:</h4>
							<div id="example_code"><code>
								 bm:start_terrain_composite_scene("composite_scene/seamonster/merwyrm_roar_02.csc")<br />
							</code></div>
							<p class="file_comment">defined in ../../common/EmpireBattle/Source/BattleScript/BattleEditorScriptInterface.cpp, line 9907</p>
						</dd>
					</dl>
					<dl class="function">
						<dt>
							<a name="function:battle:stop_terrain_composite_scene"><h3 class="function_name"><strong><code>battle:stop_terrain_composite_scene(<code><a href="lua.html#class:string">string</a></code> </strong></code><i class="parameter">scene key</i><code><strong>)</code></strong></h3></a>
						</dt>
						<dd>
							Stops a composite scene. The composite scene should be specified by its path from the working data folder.

							<h4>Parameters:</h4>
							<table class="parameter_list">
								<colgroup>
									<col style="width: 3%;">
									<col style="width: 12%;">
									<col style="width: 85%;">
								</colgroup>
								<tr>
									<td>
										<p><strong>1</strong></p>
									</td>
									<td>
										<p><code><code><a href="lua.html#class:string">string</a></code></code></p>
									</td>
									<td>
										<p>Composite scene key.</p>
									</td>
								</tr>
							</table>

							<h4>Returns:</h4>
							<ol>
								<li><code>nil</code></li>
							</ol>

							<h4>Example:</h4>
							<div id="example_code"><code>
								 bm:stop_terrain_composite_scene("composite_scene/seamonster/merwyrm_roar_02.csc")<br />
							</code></div>
							<p class="file_comment">defined in ../../common/EmpireBattle/Source/BattleScript/BattleEditorScriptInterface.cpp, line 9917</p>
						</dd>
					</dl>
				</div>


				<div>
					<a style="float:right;" href="#top">Back to top</a>
					<a name="section:battle:Advice and Audio"><h2 class="section_header">Advice and Audio</h2></a>
				</div>
				<div class="section_body">
					<dl class="function">
						<dt>
							<a name="function:battle:play_adc"><h3 class="function_name"><strong><code>battle:play_adc(<code><a href="lua.html#class:string">string</a></code> </strong></code><i class="parameter">adc key</i><code><strong>, <code><a href="lua.html#class:number">number</a></code> </strong></code><i class="parameter">x</i><code><strong>, <code><a href="lua.html#class:number">number</a></code> </strong></code><i class="parameter">y</i><code><strong>, <code><a href="lua.html#class:number">number</a></code> </strong></code><i class="parameter">z</i><code><strong>, <code><a href="lua.html#class:boolean">boolean</a></code> </strong></code><i class="parameter">for player</i><code><strong>)</code></strong></h3></a>
						</dt>
						<dd>
							Manually triggers an aide-de-camp message at a specified location on the battlefield.

							<h4>Parameters:</h4>
							<table class="parameter_list">
								<colgroup>
									<col style="width: 3%;">
									<col style="width: 12%;">
									<col style="width: 85%;">
								</colgroup>
								<tr>
									<td>
										<p><strong>1</strong></p>
									</td>
									<td>
										<p><code><code><a href="lua.html#class:string">string</a></code></code></p>
									</td>
									<td>
										<p>Aide-de-camp key, from the <code>aide_de_camp_speeches</code> database table.</p>
									</td>
								</tr>
								<tr>
									<td>
										<p><strong>2</strong></p>
									</td>
									<td>
										<p><code><code><a href="lua.html#class:number">number</a></code></code></p>
									</td>
									<td>
										<p>X co-ordinate of message, in m.</p>
									</td>
								</tr>
								<tr>
									<td>
										<p><strong>3</strong></p>
									</td>
									<td>
										<p><code><code><a href="lua.html#class:number">number</a></code></code></p>
									</td>
									<td>
										<p>Y co-ordinate (altitude) of message, in m.</p>
									</td>
								</tr>
								<tr>
									<td>
										<p><strong>4</strong></p>
									</td>
									<td>
										<p><code><code><a href="lua.html#class:number">number</a></code></code></p>
									</td>
									<td>
										<p>Z co-ordinate of message, in m.</p>
									</td>
								</tr>
								<tr>
									<td>
										<p><strong>5</strong></p>
									</td>
									<td>
										<p><code><code><a href="lua.html#class:boolean">boolean</a></code></code></p>
									</td>
									<td>
										<p>Aide-de-camp message is for the player's alliance.</p>
									</td>
								</tr>
							</table>

							<h4>Returns:</h4>
							<ol>
								<li><code>nil</code></li>
							</ol>
							<p class="file_comment">defined in ../../common/EmpireBattle/Source/BattleScript/BattleEditorScriptInterface.cpp, line 9940</p>
						</dd>
					</dl>
					<dl class="function">
						<dt>
							<a name="function:battle:suspend_contextual_advice"><h3 class="function_name"><strong><code>battle:suspend_contextual_advice(<code><a href="lua.html#class:boolean">boolean</a></code> </strong></code><i class="parameter">should suspend</i><code><strong>)</code></strong></h3></a>
						</dt>
						<dd>
							Prevents advice from being triggered with <code><a href="common.html#function:common:advance_contextual_advice_thread">common.advance_contextual_advice_thread</a></code>, which has the effect of suspending advice not triggered deliberately by battle scripts. This has been made largely redundant by changes in the way scripts trigger advice, but can still be called.

							<h4>Parameters:</h4>
							<table class="parameter_list">
								<colgroup>
									<col style="width: 3%;">
									<col style="width: 12%;">
									<col style="width: 85%;">
								</colgroup>
								<tr>
									<td>
										<p><strong>1</strong></p>
									</td>
									<td>
										<p><code><code><a href="lua.html#class:boolean">boolean</a></code></code></p>
									</td>
									<td>
										<p>should suspend</p>
									</td>
								</tr>
							</table>

							<h4>Returns:</h4>
							<ol>
								<li><code>nil</code></li>
							</ol>
							<p class="file_comment">defined in ../../common/EmpireBattle/Source/BattleScript/BattleEditorScriptInterface.cpp, line 9953</p>
						</dd>
					</dl>
					<dl class="function">
						<dt>
							<a name="function:battle:close_advisor"><h3 class="function_name"><strong><code>battle:close_advisor()</code></strong></h3></a>
						</dt>
						<dd>
							Dismisses the advisor, if currently shown.


							<h4>Returns:</h4>
							<ol>
								<li><code>nil</code></li>
							</ol>
							<p class="file_comment">defined in ../../common/EmpireBattle/Source/BattleScript/BattleEditorScriptInterface.cpp, line 9962</p>
						</dd>
					</dl>
					<dl class="function">
						<dt>
							<a name="function:battle:advice_finished"><h3 class="function_name"><strong><code>battle:advice_finished()</code></strong></h3></a>
						</dt>
						<dd>
							Returns whether or not any advice is currently playing. A value of <code>true</code> is returned if no advice is playing, <code>false</code> if it is.


							<h4>Returns:</h4>
							<ol>
								<li><code><code><a href="lua.html#class:boolean">boolean</a></code></code> advice finished</li>
							</ol>
							<p class="file_comment">defined in ../../common/EmpireBattle/Source/BattleScript/BattleEditorScriptInterface.cpp, line 9970</p>
						</dd>
					</dl>
					<dl class="function">
						<dt>
							<a name="function:battle:vo_finished"><h3 class="function_name"><strong><code>battle:vo_finished()</code></strong></h3></a>
						</dt>
						<dd>
							Returns whether or not any voiceover sounds are currently playing. A value of <code>true</code> is returned if no voiceover sounds are playing, <code>false</code> otherwise.


							<h4>Returns:</h4>
							<ol>
								<li><code><code><a href="lua.html#class:boolean">boolean</a></code></code> vo finished</li>
							</ol>
							<p class="file_comment">defined in ../../common/EmpireBattle/Source/BattleScript/BattleEditorScriptInterface.cpp, line 9979</p>
						</dd>
					</dl>
					<dl class="function">
						<dt>
							<a name="function:battle:suppress_unit_voices"><h3 class="function_name"><strong><code>battle:suppress_unit_voices(<code><a href="lua.html#class:boolean">boolean</a></code> </strong></code><i class="parameter">should suppress</i><code><strong>)</code></strong></h3></a>
						</dt>
						<dd>
							Disables or re-enables unit voices in battle. If unit voices are suppressed, ambient voiceover related to units will not be played.

							<h4>Parameters:</h4>
							<table class="parameter_list">
								<colgroup>
									<col style="width: 3%;">
									<col style="width: 12%;">
									<col style="width: 85%;">
								</colgroup>
								<tr>
									<td>
										<p><strong>1</strong></p>
									</td>
									<td>
										<p><code><code><a href="lua.html#class:boolean">boolean</a></code></code></p>
									</td>
									<td>
										<p>should suppress</p>
									</td>
								</tr>
							</table>

							<h4>Returns:</h4>
							<ol>
								<li><code>nil</code></li>
							</ol>
							<p class="file_comment">defined in ../../common/EmpireBattle/Source/BattleScript/BattleEditorScriptInterface.cpp, line 9989</p>
						</dd>
					</dl>
					<dl class="function">
						<dt>
							<a name="function:battle:suppress_unit_musicians"><h3 class="function_name"><strong><code>battle:suppress_unit_musicians(<code><a href="lua.html#class:boolean">boolean</a></code> </strong></code><i class="parameter">should suppress</i><code><strong>)</code></strong></h3></a>
						</dt>
						<dd>
							Disables or re-enables unit musicians in battle.

							<h4>Parameters:</h4>
							<table class="parameter_list">
								<colgroup>
									<col style="width: 3%;">
									<col style="width: 12%;">
									<col style="width: 85%;">
								</colgroup>
								<tr>
									<td>
										<p><strong>1</strong></p>
									</td>
									<td>
										<p><code><code><a href="lua.html#class:boolean">boolean</a></code></code></p>
									</td>
									<td>
										<p>should suppress</p>
									</td>
								</tr>
							</table>

							<h4>Returns:</h4>
							<ol>
								<li><code>nil</code></li>
							</ol>
							<p class="file_comment">defined in ../../common/EmpireBattle/Source/BattleScript/BattleEditorScriptInterface.cpp, line 10005</p>
						</dd>
					</dl>
					<dl class="function">
						<dt>
							<a name="function:battle:play_music"><h3 class="function_name"><strong><code>battle:play_music(<code><a href="lua.html#class:string">string</a></code> </strong></code><i class="parameter">music name</i><code><strong>)</code></strong></h3></a>
						</dt>
						<dd>
							Plays a specified piece of music. The music to play is specified by its sound event name.

							<h4>Parameters:</h4>
							<table class="parameter_list">
								<colgroup>
									<col style="width: 3%;">
									<col style="width: 12%;">
									<col style="width: 85%;">
								</colgroup>
								<tr>
									<td>
										<p><strong>1</strong></p>
									</td>
									<td>
										<p><code><code><a href="lua.html#class:string">string</a></code></code></p>
									</td>
									<td>
										<p>music name</p>
									</td>
								</tr>
							</table>

							<h4>Returns:</h4>
							<ol>
								<li><code>nil</code></li>
							</ol>
							<p class="file_comment">defined in ../../common/EmpireBattle/Source/BattleScript/BattleEditorScriptInterface.cpp, line 10014</p>
						</dd>
					</dl>
					<dl class="function">
						<dt>
							<a name="function:battle:play_music_custom_fade"><h3 class="function_name"><strong><code>battle:play_music_custom_fade(<code><a href="lua.html#class:string">string</a></code> </strong></code><i class="parameter">music name</i><code><strong>, <code><a href="lua.html#class:number">number</a></code> </strong></code><i class="parameter">fade time</i><code><strong>)</code></strong></h3></a>
						</dt>
						<dd>
							Plays a specified piece of music with a custom fade-in duration. The music to play is specified by its sound event name.

							<h4>Parameters:</h4>
							<table class="parameter_list">
								<colgroup>
									<col style="width: 3%;">
									<col style="width: 12%;">
									<col style="width: 85%;">
								</colgroup>
								<tr>
									<td>
										<p><strong>1</strong></p>
									</td>
									<td>
										<p><code><code><a href="lua.html#class:string">string</a></code></code></p>
									</td>
									<td>
										<p>Music sound event.</p>
									</td>
								</tr>
								<tr>
									<td>
										<p><strong>2</strong></p>
									</td>
									<td>
										<p><code><code><a href="lua.html#class:number">number</a></code></code></p>
									</td>
									<td>
										<p>Fade time in seconds.</p>
									</td>
								</tr>
							</table>

							<h4>Returns:</h4>
							<ol>
								<li><code>nil</code></li>
							</ol>
							<p class="file_comment">defined in ../../common/EmpireBattle/Source/BattleScript/BattleEditorScriptInterface.cpp, line 10023</p>
						</dd>
					</dl>
					<dl class="function">
						<dt>
							<a name="function:battle:stop_music"><h3 class="function_name"><strong><code>battle:stop_music(<code><a href="lua.html#class:boolean">boolean</a></code> </strong></code><i class="parameter">skipped</i><code><strong>)</code></strong></h3></a>
						</dt>
						<dd>
							Stops the currently-playing music.

							<h4>Parameters:</h4>
							<table class="parameter_list">
								<colgroup>
									<col style="width: 3%;">
									<col style="width: 12%;">
									<col style="width: 85%;">
								</colgroup>
								<tr>
									<td>
										<p><strong>1</strong></p>
									</td>
									<td>
										<p><code><code><a href="lua.html#class:boolean">boolean</a></code></code></p>
									</td>
									<td>
										<p>whether this stop was because of a skipped cutscene</p>
									</td>
								</tr>
							</table>

							<h4>Returns:</h4>
							<ol>
								<li><code>nil</code></li>
							</ol>
							<p class="file_comment">defined in ../../common/EmpireBattle/Source/BattleScript/BattleEditorScriptInterface.cpp, line 10033</p>
						</dd>
					</dl>
					<dl class="function">
						<dt>
							<a name="function:battle:stop_music_custom_fade"><h3 class="function_name"><strong><code>battle:stop_music_custom_fade(<code><a href="lua.html#class:boolean">boolean</a></code> </strong></code><i class="parameter">skipped</i><code><strong>, <code><a href="lua.html#class:number">number</a></code> </strong></code><i class="parameter">fade time</i><code><strong>)</code></strong></h3></a>
						</dt>
						<dd>
							Stops the currently-playing music with a custom fade time.

							<h4>Parameters:</h4>
							<table class="parameter_list">
								<colgroup>
									<col style="width: 3%;">
									<col style="width: 12%;">
									<col style="width: 85%;">
								</colgroup>
								<tr>
									<td>
										<p><strong>1</strong></p>
									</td>
									<td>
										<p><code><code><a href="lua.html#class:boolean">boolean</a></code></code></p>
									</td>
									<td>
										<p>whether this stop was because of a skipped cutscene</p>
									</td>
								</tr>
								<tr>
									<td>
										<p><strong>2</strong></p>
									</td>
									<td>
										<p><code><code><a href="lua.html#class:number">number</a></code></code></p>
									</td>
									<td>
										<p>Fade time in seconds.</p>
									</td>
								</tr>
							</table>

							<h4>Returns:</h4>
							<ol>
								<li><code>nil</code></li>
							</ol>
							<p class="file_comment">defined in ../../common/EmpireBattle/Source/BattleScript/BattleEditorScriptInterface.cpp, line 10042</p>
						</dd>
					</dl>
					<dl class="function">
						<dt>
							<a name="function:battle:get_volume"><h3 class="function_name"><strong><code>battle:get_volume(<code><a href="lua.html#class:number">number</a></code> </strong></code><i class="parameter">volume type</i><code><strong>)</code></strong></h3></a>
						</dt>
						<dd>
							Gets the volume level of a specific volume type. Valid volume types are given in the <code><a href="global.html#section:global:Volume Types">Volume Types</a></code> section of this documentation. The volume level will be returned as a number between 0 (inaudible) and 100 (full volume).

							<h4>Parameters:</h4>
							<table class="parameter_list">
								<colgroup>
									<col style="width: 3%;">
									<col style="width: 12%;">
									<col style="width: 85%;">
								</colgroup>
								<tr>
									<td>
										<p><strong>1</strong></p>
									</td>
									<td>
										<p><code><code><a href="lua.html#class:number">number</a></code></code></p>
									</td>
									<td>
										<p>volume type</p>
									</td>
								</tr>
							</table>

							<h4>Returns:</h4>
							<ol>
								<li><code><code><a href="lua.html#class:number">number</a></code></code> volume level</li>
							</ol>
							<p class="file_comment">defined in ../../common/EmpireBattle/Source/BattleScript/BattleEditorScriptInterface.cpp, line 10059</p>
						</dd>
					</dl>
					<dl class="function">
						<dt>
							<a name="function:battle:set_volume"><h3 class="function_name"><strong><code>battle:set_volume(<code><a href="lua.html#class:number">number</a></code> </strong></code><i class="parameter">volume type</i><code><strong>, <code><a href="lua.html#class:number">number</a></code> </strong></code><i class="parameter">volume level</i><code><strong>)</code></strong></h3></a>
						</dt>
						<dd>
							Sets the volume level of a specific volume type. Valid volume types are given in the <code><a href="global.html#section:global:Volume Types">Volume Types</a></code> section of this documentation. The volume level should be set as a number between 0 (inaudible) and 100 (full volume).

							<h4>Parameters:</h4>
							<table class="parameter_list">
								<colgroup>
									<col style="width: 3%;">
									<col style="width: 12%;">
									<col style="width: 85%;">
								</colgroup>
								<tr>
									<td>
										<p><strong>1</strong></p>
									</td>
									<td>
										<p><code><code><a href="lua.html#class:number">number</a></code></code></p>
									</td>
									<td>
										<p>volume type</p>
									</td>
								</tr>
								<tr>
									<td>
										<p><strong>2</strong></p>
									</td>
									<td>
										<p><code><code><a href="lua.html#class:number">number</a></code></code></p>
									</td>
									<td>
										<p>volume level</p>
									</td>
								</tr>
							</table>

							<h4>Returns:</h4>
							<ol>
								<li><code>nil</code></li>
							</ol>
							<p class="file_comment">defined in ../../common/EmpireBattle/Source/BattleScript/BattleEditorScriptInterface.cpp, line 10069</p>
						</dd>
					</dl>
					<dl class="function">
						<dt>
							<a name="function:battle:fade_volume"><h3 class="function_name"><strong><code>battle:fade_volume(<code><a href="lua.html#class:number">number</a></code> </strong></code><i class="parameter">volume type</i><code><strong>, <code><a href="lua.html#class:number">number</a></code> </strong></code><i class="parameter">target level</i><code><strong>, <code><a href="lua.html#class:number">number</a></code> </strong></code><i class="parameter">fade time</i><code><strong>)</code></strong></h3></a>
						</dt>
						<dd>
							Gradually fades the volume level of a specified volume type to a specified value over a specified interval. Valid volume types are given in the <code><a href="global.html#section:global:Volume Types">Volume Types</a></code> section of this documentation. The volume level should be set as a number between 0 (inaudible) and 100 (full volume).

							<h4>Parameters:</h4>
							<table class="parameter_list">
								<colgroup>
									<col style="width: 3%;">
									<col style="width: 12%;">
									<col style="width: 85%;">
								</colgroup>
								<tr>
									<td>
										<p><strong>1</strong></p>
									</td>
									<td>
										<p><code><code><a href="lua.html#class:number">number</a></code></code></p>
									</td>
									<td>
										<p>Volume type.</p>
									</td>
								</tr>
								<tr>
									<td>
										<p><strong>2</strong></p>
									</td>
									<td>
										<p><code><code><a href="lua.html#class:number">number</a></code></code></p>
									</td>
									<td>
										<p>Target volume level.</p>
									</td>
								</tr>
								<tr>
									<td>
										<p><strong>3</strong></p>
									</td>
									<td>
										<p><code><code><a href="lua.html#class:number">number</a></code></code></p>
									</td>
									<td>
										<p>Fade time in seconds.</p>
									</td>
								</tr>
							</table>

							<h4>Returns:</h4>
							<ol>
								<li><code>nil</code></li>
							</ol>
							<p class="file_comment">defined in ../../common/EmpireBattle/Source/BattleScript/BattleEditorScriptInterface.cpp, line 10079</p>
						</dd>
					</dl>
					<dl class="function">
						<dt>
							<a name="function:battle:set_music_vm_variable"><h3 class="function_name"><strong><code>battle:set_music_vm_variable(<br />&emsp;&emsp;<code><a href="lua.html#class:string">string</a></code> </strong></code><i class="parameter">variable name</i><code><strong>, <br />&emsp;&emsp;<code><a href="lua.html#class:boolean">boolean</a></code> </strong></code><i class="parameter">or <code><a href="lua.html#class:string">string</a></code> or <code><a href="lua.html#class:number">number</a></code> The value to set the target variable to</i><code><strong><br />)</code></strong></h3></a>
						</dt>
						<dd>
							Sets the value of the given music vm variable, this can be read by the battle music script

							<h4>Parameters:</h4>
							<table class="parameter_list">
								<colgroup>
									<col style="width: 3%;">
									<col style="width: 12%;">
									<col style="width: 85%;">
								</colgroup>
								<tr>
									<td>
										<p><strong>1</strong></p>
									</td>
									<td>
										<p><code><code><a href="lua.html#class:string">string</a></code></code></p>
									</td>
									<td>
										<p>variable name</p>
									</td>
								</tr>
								<tr>
									<td>
										<p><strong>2</strong></p>
									</td>
									<td>
										<p><code><code><a href="lua.html#class:boolean">boolean</a></code></code></p>
									</td>
									<td>
										<p>or <code><a href="lua.html#class:string">string</a></code> or <code><a href="lua.html#class:number">number</a></code> The value to set the target variable to</p>
									</td>
								</tr>
							</table>

							<h4>Returns:</h4>
							<ol>
								<li><code>nil</code></li>
							</ol>
							<p class="file_comment">defined in ../../common/EmpireBattle/Source/BattleScript/BattleEditorScriptInterface.cpp, line 10090</p>
						</dd>
					</dl>
				</div>


				<div>
					<a style="float:right;" href="#top">Back to top</a>
					<a name="section:battle:Objectives and Markers"><h2 class="section_header">Objectives and Markers</h2></a>
				</div>
				<div class="section_body">
					<dl class="function">
						<dt>
							<a name="function:battle:add_ping_icon"><h3 class="function_name"><strong><code>battle:add_ping_icon(<code><a href="lua.html#class:number">number</a></code> </strong></code><i class="parameter">x</i><code><strong>, <code><a href="lua.html#class:number">number</a></code> </strong></code><i class="parameter">y</i><code><strong>, <code><a href="lua.html#class:number">number</a></code> </strong></code><i class="parameter">x</i><code><strong>, [<code><a href="lua.html#class:number">number</a></code> </strong></code><i class="parameter">type</i><code><strong>], [<code><a href="lua.html#class:boolean">boolean</a></code> </strong></code><i class="parameter">is waypoint</i><code><strong>], [<code><a href="lua.html#class:number">number</a></code> </strong></code><i class="parameter">rotation</i><code><strong>])</code></strong></h3></a>
						</dt>
						<dd>
							Adds a 3d ping marker model at a specified [x/y/z] position. It is sufficient just to supply the position, but a type can be used to change the model displayed - see the table below for a list of ping types.<br />
							List of ping types:<br />
							<table class="simple"><tr><td>Type Number</td><td>Type Name</td></tr>

							<tr><td>0</td><td>MPT_NONE</td></tr>

							<tr><td>1</td><td>MPT_STANDARD</td></tr>

							<tr><td>2</td><td>MPT_MOVE</td></tr>

							<tr><td>3</td><td>MPT_ATTACK</td></tr>

							<tr><td>4</td><td>MPT_DEFEND</td></tr>

							<tr><td>5</td><td>MPT_HELP_MOUNTABLE_ARTILLERY</td></tr>

							<tr><td>6</td><td>MPT_HELP_DISEMBARK</td></tr>

							<tr><td>7</td><td>MPT_NOTIFICATION</td></tr>

							<tr><td>8</td><td>MPT_SCRIPT_LOOK_AT</td></tr>

							<tr><td>9</td><td>MPT_SCRIPT_MOVE_TO</td></tr>

							<tr><td>10</td><td>MPT_SCRIPT_SELECT</td></tr>

							<tr><td>11</td><td>MPT_SCRIPT_POINTER</td></tr>

							<tr><td>12</td><td>MPT_SCRIPT_LOOK_AT_VFX</td></tr>

							<tr><td>13</td><td>MPT_SCRIPT_MOVE_TO_VFX</td></tr>

							<tr><td>14</td><td>MPT_SCRIPT_SELECT_VFX</td></tr></table>

							<tr><td>15</td><td>MPT_SCRIPT_OBJECTIVE</td></tr></table>

							<tr><td>16</td><td>MPT_SCRIPT_BATTLE_TRAP</td></tr></table>

							The waypoint flag can be used to link models together. The rotation flag can be used to specify a rotation for the model - the default is to just fade the camera.

							<h4>Parameters:</h4>
							<table class="parameter_list">
								<colgroup>
									<col style="width: 3%;">
									<col style="width: 12%;">
									<col style="width: 85%;">
								</colgroup>
								<tr>
									<td>
										<p><strong>1</strong></p>
									</td>
									<td>
										<p><code><code><a href="lua.html#class:number">number</a></code></code></p>
									</td>
									<td>
										<p>X co-ordinate in metres.</p>
									</td>
								</tr>
								<tr>
									<td>
										<p><strong>2</strong></p>
									</td>
									<td>
										<p><code><code><a href="lua.html#class:number">number</a></code></code></p>
									</td>
									<td>
										<p>Y co-ordinate (altitude) in metres. This parameter specifies the height above the water plane, so if mis-set the marker can appear under the ground.</p>
									</td>
								</tr>
								<tr>
									<td>
										<p><strong>3</strong></p>
									</td>
									<td>
										<p><code><code><a href="lua.html#class:number">number</a></code></code></p>
									</td>
									<td>
										<p>X co-ordinate in metres.</p>
									</td>
								</tr>
								<tr>
									<td>
										<p><strong>4</strong></p>
									</td>
									<td>
										<p><code><code><a href="lua.html#class:number">number</a></code></code></p>
									</td>
									<td>
										<p><i>optional, default value=0</i></p>
										<p>Marker type - see list of valid marker types above.</p>
									</td>
								</tr>
								<tr>
									<td>
										<p><strong>5</strong></p>
									</td>
									<td>
										<p><code><code><a href="lua.html#class:boolean">boolean</a></code></code></p>
									</td>
									<td>
										<p><i>optional, default value=false</i></p>
										<p>Is waypoint.</p>
									</td>
								</tr>
								<tr>
									<td>
										<p><strong>6</strong></p>
									</td>
									<td>
										<p><code><code><a href="lua.html#class:number">number</a></code></code></p>
									</td>
									<td>
										<p><i>optional, default value=nil</i></p>
										<p>Rotation.</p>
									</td>
								</tr>
							</table>

							<h4>Returns:</h4>
							<ol>
								<li><code>nil</code></li>
							</ol>
							<p class="file_comment">defined in ../../common/EmpireBattle/Source/BattleScript/BattleEditorScriptInterface.cpp, line 10103</p>
						</dd>
					</dl>
					<dl class="function">
						<dt>
							<a name="function:battle:remove_ping_icon"><h3 class="function_name"><strong><code>battle:remove_ping_icon(<code><a href="lua.html#class:number">number</a></code> </strong></code><i class="parameter">x</i><code><strong>, <code><a href="lua.html#class:number">number</a></code> </strong></code><i class="parameter">y</i><code><strong>, <code><a href="lua.html#class:number">number</a></code> </strong></code><i class="parameter">x</i><code><strong>)</code></strong></h3></a>
						</dt>
						<dd>
							Removes the ping marker that was previously added with <code><a href="#function:battle:add_ping_icon">battle:add_ping_icon</a></code> at a specified [x/y/z] position.

							<h4>Parameters:</h4>
							<table class="parameter_list">
								<colgroup>
									<col style="width: 3%;">
									<col style="width: 12%;">
									<col style="width: 85%;">
								</colgroup>
								<tr>
									<td>
										<p><strong>1</strong></p>
									</td>
									<td>
										<p><code><code><a href="lua.html#class:number">number</a></code></code></p>
									</td>
									<td>
										<p>X co-ordinate in metres.</p>
									</td>
								</tr>
								<tr>
									<td>
										<p><strong>2</strong></p>
									</td>
									<td>
										<p><code><code><a href="lua.html#class:number">number</a></code></code></p>
									</td>
									<td>
										<p>Y co-ordinate (altitude) in metres.</p>
									</td>
								</tr>
								<tr>
									<td>
										<p><strong>3</strong></p>
									</td>
									<td>
										<p><code><code><a href="lua.html#class:number">number</a></code></code></p>
									</td>
									<td>
										<p>X co-ordinate in metres.</p>
									</td>
								</tr>
							</table>

							<h4>Returns:</h4>
							<ol>
								<li><code>nil</code></li>
							</ol>
							<p class="file_comment">defined in ../../common/EmpireBattle/Source/BattleScript/BattleEditorScriptInterface.cpp, line 10137</p>
						</dd>
					</dl>
					<dl class="function">
						<dt>
							<a name="function:battle:show_objective"><h3 class="function_name"><strong><code>battle:show_objective(<code><a href="lua.html#class:string">string</a></code> </strong></code><i class="parameter">objective key</i><code><strong>, <code><a href="lua.html#class:number">number</a></code> </strong></code><i class="parameter">duration</i><code><strong>, <code><a href="lua.html#class:number">number</a></code> </strong></code><i class="parameter">fade duration</i><code><strong>)</code></strong></h3></a>
						</dt>
						<dd>
							Shows an objective message on-screen. This is an old method of showing an objective-style message, which will fade in at the bottom-centre of the screen, remain on-screen for a specified period and then fade out.

							<h4>Parameters:</h4>
							<table class="parameter_list">
								<colgroup>
									<col style="width: 3%;">
									<col style="width: 12%;">
									<col style="width: 85%;">
								</colgroup>
								<tr>
									<td>
										<p><strong>1</strong></p>
									</td>
									<td>
										<p><code><code><a href="lua.html#class:string">string</a></code></code></p>
									</td>
									<td>
										<p>Objective key, from the <code>scripted_objectives</code> table.</p>
									</td>
								</tr>
								<tr>
									<td>
										<p><strong>2</strong></p>
									</td>
									<td>
										<p><code><code><a href="lua.html#class:number">number</a></code></code></p>
									</td>
									<td>
										<p>Duration that the objective should remain on-screen in ms.</p>
									</td>
								</tr>
								<tr>
									<td>
										<p><strong>3</strong></p>
									</td>
									<td>
										<p><code><code><a href="lua.html#class:number">number</a></code></code></p>
									</td>
									<td>
										<p>Duration over which the objective should fade to transparent once its display duration has elapsed.</p>
									</td>
								</tr>
							</table>

							<h4>Returns:</h4>
							<ol>
								<li><code>nil</code></li>
							</ol>

							<h4>Example - Show an objective key for 5 seconds, then fading out over 2 seconds.:</h4>
							<div id="example_code"><code>
								 bm:show_objective("my_objective_key", 5000, 2000)<br />
							</code></div>
							<p class="file_comment">defined in ../../common/EmpireBattle/Source/BattleScript/BattleEditorScriptInterface.cpp, line 10148</p>
						</dd>
					</dl>
					<dl class="function">
						<dt>
							<a name="function:battle:add_animated_arrow"><h3 class="function_name"><strong><code>battle:add_animated_arrow(<code><a href="lua.html#class:number">number</a></code> </strong></code><i class="parameter">animation time</i><code><strong>, <code><a href="lua.html#class:number">number</a></code> </strong></code><i class="parameter">remain time</i><code><strong>, <code><a href="lua.html#class:boolean">boolean</a></code> </strong></code><i class="parameter">loop</i><code><strong>, ... </strong></code><i class="parameter">positions</i><code><strong>)</code></strong></h3></a>
						</dt>
						<dd>
							Adds an animated arrow on the terrain that can be used to indicate a path for the player. The arrow will animate between two or four supplied <code><a href="battle_vector.html#class:battle_vector">battle_vector</a></code> positions.<br />
							The function returns a numeric index for the animated arrow. If necessary, this can be used to remove the arrow with <code><a href="#function:battle:remove_animated_arrow">battle:remove_animated_arrow</a></code>.

							<h4>Parameters:</h4>
							<table class="parameter_list">
								<colgroup>
									<col style="width: 3%;">
									<col style="width: 12%;">
									<col style="width: 85%;">
								</colgroup>
								<tr>
									<td>
										<p><strong>1</strong></p>
									</td>
									<td>
										<p><code><code><a href="lua.html#class:number">number</a></code></code></p>
									</td>
									<td>
										<p>Time over which the arrow animation should play, in seconds.</p>
									</td>
								</tr>
								<tr>
									<td>
										<p><strong>2</strong></p>
									</td>
									<td>
										<p><code><code><a href="lua.html#class:number">number</a></code></code></p>
									</td>
									<td>
										<p>Time for which the arrow should remain after its animation has finished, in seconds.</p>
									</td>
								</tr>
								<tr>
									<td>
										<p><strong>3</strong></p>
									</td>
									<td>
										<p><code><code><a href="lua.html#class:boolean">boolean</a></code></code></p>
									</td>
									<td>
										<p>Sets whether the animation should loop indefinitely. If this is set then <code><a href="#function:battle:remove_animated_arrow">battle:remove_animated_arrow</a></code> is the only method of removing the arrow.</p>
									</td>
								</tr>
								<tr>
									<td>
										<p><strong>4</strong></p>
									</td>
									<td>
										<p><code>...</code></p>
									</td>
									<td>
										<p>Two or four <code><a href="battle_vector.html#class:battle_vector">battle_vector</a></code> positions can specified as co-ordinates through which the arrow animates.</p>
									</td>
								</tr>
							</table>

							<h4>Returns:</h4>
							<ol>
								<li><code><code><a href="lua.html#class:number">number</a></code></code> arrow index</li>
							</ol>
							<p class="file_comment">defined in ../../common/EmpireBattle/Source/BattleScript/BattleEditorScriptInterface.cpp, line 10161</p>
						</dd>
					</dl>
					<dl class="function">
						<dt>
							<a name="function:battle:remove_animated_arrow"><h3 class="function_name"><strong><code>battle:remove_animated_arrow(<code><a href="lua.html#class:number">number</a></code> </strong></code><i class="parameter">arrow index</i><code><strong>)</code></strong></h3></a>
						</dt>
						<dd>
							Removes an animated arrow previously added with <code><a href="#function:battle:add_animated_arrow">battle:add_animated_arrow</a></code>. The arrow to remove is specified by the numeric index returned by <code>add_animated_arrow</code>.

							<h4>Parameters:</h4>
							<table class="parameter_list">
								<colgroup>
									<col style="width: 3%;">
									<col style="width: 12%;">
									<col style="width: 85%;">
								</colgroup>
								<tr>
									<td>
										<p><strong>1</strong></p>
									</td>
									<td>
										<p><code><code><a href="lua.html#class:number">number</a></code></code></p>
									</td>
									<td>
										<p>arrow index</p>
									</td>
								</tr>
							</table>

							<h4>Returns:</h4>
							<ol>
								<li><code>nil</code></li>
							</ol>
							<p class="file_comment">defined in ../../common/EmpireBattle/Source/BattleScript/BattleEditorScriptInterface.cpp, line 10175</p>
						</dd>
					</dl>
				</div>


				<div>
					<a style="float:right;" href="#top">Back to top</a>
					<a name="section:battle:Fullscreen Movies"><h2 class="section_header">Fullscreen Movies</h2></a>
				</div>
				<div class="section_body">
					<dl class="function">
						<dt>
							<a name="function:battle:play_movie"><h3 class="function_name"><strong><code>battle:play_movie(<code><a href="lua.html#class:string">string</a></code> </strong></code><i class="parameter">movie path</i><code><strong>, <code><a href="lua.html#class:boolean">boolean</a></code> </strong></code><i class="parameter">play movie audio</i><code><strong>)</code></strong></h3></a>
						</dt>
						<dd>
							Plays a fullscreen movie during a battle. The movie should be specified by a file path from the <code>Movies</code> folder in working data (see the <code>videos</code> table for examples of valid paths).

							<h4>Parameters:</h4>
							<table class="parameter_list">
								<colgroup>
									<col style="width: 3%;">
									<col style="width: 12%;">
									<col style="width: 85%;">
								</colgroup>
								<tr>
									<td>
										<p><strong>1</strong></p>
									</td>
									<td>
										<p><code><code><a href="lua.html#class:string">string</a></code></code></p>
									</td>
									<td>
										<p>Path to movie file. The file extension may be omitted.</p>
									</td>
								</tr>
								<tr>
									<td>
										<p><strong>2</strong></p>
									</td>
									<td>
										<p><code><code><a href="lua.html#class:boolean">boolean</a></code></code></p>
									</td>
									<td>
										<p>Play movie audio - if <code>false</code> is supplied then game audio is heard instead.</p>
									</td>
								</tr>
							</table>

							<h4>Returns:</h4>
							<ol>
								<li><code>nil</code></li>
							</ol>

							<h4>Example:</h4>
							<div id="example_code"><code>
								 bm:play_movie("startup_movie_01", true)<br />
							</code></div>
							<p class="file_comment">defined in ../../common/EmpireBattle/Source/BattleScript/BattleEditorScriptInterface.cpp, line 10187</p>
						</dd>
					</dl>
					<dl class="function">
						<dt>
							<a name="function:battle:is_movie_playing"><h3 class="function_name"><strong><code>battle:is_movie_playing()</code></strong></h3></a>
						</dt>
						<dd>
							Returns whether or not a fullscreen movie is currently playing.


							<h4>Returns:</h4>
							<ol>
								<li><code><code><a href="lua.html#class:boolean">boolean</a></code></code> is movie playing</li>
							</ol>
							<p class="file_comment">defined in ../../common/EmpireBattle/Source/BattleScript/BattleEditorScriptInterface.cpp, line 10198</p>
						</dd>
					</dl>
				</div>


				<div>
					<a style="float:right;" href="#top">Back to top</a>
					<a name="section:battle:UI and UI Suppression"><h2 class="section_header">UI and UI Suppression</h2></a>
				</div>
				<div class="section_body">
					<dl class="function">
						<dt>
							<a name="function:battle:ui_component"><h3 class="function_name"><strong><code>battle:ui_component(<code><a href="lua.html#class:string">string</a></code> </strong></code><i class="parameter">uicomponent name</i><code><strong>)</code></strong></h3></a>
						</dt>
						<dd>
							Searches from the root uicomponent for a uicomponent with the specified name, returning the first that matches. It is encouraged that <code><a href="global.html#function:global:find_uicomponent">find_uicomponent</a></code> is used in place of this function.

							<h4>Parameters:</h4>
							<table class="parameter_list">
								<colgroup>
									<col style="width: 3%;">
									<col style="width: 12%;">
									<col style="width: 85%;">
								</colgroup>
								<tr>
									<td>
										<p><strong>1</strong></p>
									</td>
									<td>
										<p><code><code><a href="lua.html#class:string">string</a></code></code></p>
									</td>
									<td>
										<p>uicomponent name</p>
									</td>
								</tr>
							</table>

							<h4>Returns:</h4>
							<ol>
								<li><code><code><a href="uicomponent.html#class:uicomponent">uicomponent</a></code></code> uicomponent, or <code><a href="lua.html#class:nil">nil</a></code> if no component found</li>
							</ol>
							<p class="file_comment">defined in ../../common/EmpireBattle/Source/BattleScript/BattleEditorScriptInterface.cpp, line 10210</p>
						</dd>
					</dl>
					<dl class="function">
						<dt>
							<a name="function:battle:enable_cinematic_ui"><h3 class="function_name"><strong><code>battle:enable_cinematic_ui(<br />&emsp;&emsp;<code><a href="lua.html#class:boolean">boolean</a></code> </strong></code><i class="parameter">enable cinematic ui</i><code><strong>, <br />&emsp;&emsp;[<code><a href="lua.html#class:boolean">boolean</a></code> </strong></code><i class="parameter">show cursor</i><code><strong>], <br />&emsp;&emsp;[<code><a href="lua.html#class:boolean">boolean</a></code> </strong></code><i class="parameter">enable cinematic bars</i><code><strong>]<br />)</code></strong></h3></a>
						</dt>
						<dd>
							Enables or disables a script lock on the state of the cinematic UI. Additional parameters may be used to enable/disable the mouse cursor and cinematic bars respectively.<br />
							Note that it is rare for clients scripts to need to call this directly - consider using the <code><a href="cutscene.html#class:cutscene">cutscene</a></code> functionality provided by the script libraries.

							<h4>Parameters:</h4>
							<table class="parameter_list">
								<colgroup>
									<col style="width: 3%;">
									<col style="width: 12%;">
									<col style="width: 85%;">
								</colgroup>
								<tr>
									<td>
										<p><strong>1</strong></p>
									</td>
									<td>
										<p><code><code><a href="lua.html#class:boolean">boolean</a></code></code></p>
									</td>
									<td>
										<p>Enable or disables the script lock on the cinematic UI. By setting this, the script will lock the state of the cinematic UI (whether the cursor is shown, or the cinematic bars are visible). If this is set the wider UI will not be able to show/unshow the cursor or cinematic bars until the lock is disabled again.</p>
									</td>
								</tr>
								<tr>
									<td>
										<p><strong>2</strong></p>
									</td>
									<td>
										<p><code><code><a href="lua.html#class:boolean">boolean</a></code></code></p>
									</td>
									<td>
										<p><i>optional, default value=nil</i></p>
										<p>Shows or hides the cursor. If this flag is not supplied then the state of the cursor will remain unchanged.</p>
									</td>
								</tr>
								<tr>
									<td>
										<p><strong>3</strong></p>
									</td>
									<td>
										<p><code><code><a href="lua.html#class:boolean">boolean</a></code></code></p>
									</td>
									<td>
										<p><i>optional, default value=nil</i></p>
										<p>Enables the cinematic bars. If this flag is not supplied then the state of the cinematic bars will remain unchanged.</p>
									</td>
								</tr>
							</table>

							<h4>Returns:</h4>
							<ol>
								<li><code>nil</code></li>
							</ol>

							<h4>Example - Enable the cinematic UI, disabling the mouse cursor and showing cinematic borders:</h4>
								By enabling the cinematic UI with the first argument, the UI will know not to re-enable the mouse cursor or hide the cinematic borders.
							<div id="example_code"><code>
								 bm:enable_cinematic_ui(true, false, true)<br />
							</code></div>

							<h4>Example - Disable the cinematic UI, re-enable the mouse and hide the cinematic borders afterwards:</h4>
							<div id="example_code"><code>
								 bm:enable_cinematic_ui(false, true, false)<br />
							</code></div>
							<p class="file_comment">defined in ../../common/EmpireBattle/Source/BattleScript/BattleEditorScriptInterface.cpp, line 10220</p>
						</dd>
					</dl>
					<dl class="function">
						<dt>
							<a name="function:battle:enable_unit_ids"><h3 class="function_name"><strong><code>battle:enable_unit_ids(<code><a href="lua.html#class:boolean">boolean</a></code> </strong></code><i class="parameter">show ids</i><code><strong>)</code></strong></h3></a>
						</dt>
						<dd>
							Enables or disables the unit IDs - the flags or icons floating above each unit in battle. This provides exactly the same functionality as <code><a href="#function:battle:set_banners_enabled">battle:set_banners_enabled</a></code>, except the removal/reinstatement of banners in this case will be preserved in replays.<br />
							Note that the <code><a href="cutscene.html#class:cutscene">cutscene</a></code> functionality provided by the script libraries automatically disables unit ids while the cutscene is playing - use <code><a href="cutscene.html#function:cutscene:set_should_disable_unit_ids">cutscene:set_should_disable_unit_ids</a></code> to disable this for a given cutscene rather than calling this function directly.

							<h4>Parameters:</h4>
							<table class="parameter_list">
								<colgroup>
									<col style="width: 3%;">
									<col style="width: 12%;">
									<col style="width: 85%;">
								</colgroup>
								<tr>
									<td>
										<p><strong>1</strong></p>
									</td>
									<td>
										<p><code><code><a href="lua.html#class:boolean">boolean</a></code></code></p>
									</td>
									<td>
										<p>show ids</p>
									</td>
								</tr>
							</table>

							<h4>Returns:</h4>
							<ol>
								<li><code>nil</code></li>
							</ol>
							<p class="file_comment">defined in ../../common/EmpireBattle/Source/BattleScript/BattleEditorScriptInterface.cpp, line 10237</p>
						</dd>
					</dl>
					<dl class="function">
						<dt>
							<a name="function:battle:enable_cinematic_camera"><h3 class="function_name"><strong><code>battle:enable_cinematic_camera(<code><a href="lua.html#class:boolean">boolean</a></code> </strong></code><i class="parameter">enable cinematic camera</i><code><strong>)</code></strong></h3></a>
						</dt>
						<dd>
							Enables or disables the cinematic camera. The cinematic camera is not limited by altitude or proximity to the player's army - it can be positioned anywhere on the battlefield, including below the ground. This can be enabled for cutscenes but should be disabled for live gameplay.<br />
							Note that it is rare for clients scripts to need to call this directly - consider using the <code><a href="cutscene.html#class:cutscene">cutscene</a></code> functionality provided by the script libraries. A cutscene can be prevented from enabling the cinematic camera with <code><a href="cutscene.html#function:cutscene:set_should_enable_cinematic_camera">cutscene:set_should_enable_cinematic_camera</a></code>.

							<h4>Parameters:</h4>
							<table class="parameter_list">
								<colgroup>
									<col style="width: 3%;">
									<col style="width: 12%;">
									<col style="width: 85%;">
								</colgroup>
								<tr>
									<td>
										<p><strong>1</strong></p>
									</td>
									<td>
										<p><code><code><a href="lua.html#class:boolean">boolean</a></code></code></p>
									</td>
									<td>
										<p>enable cinematic camera</p>
									</td>
								</tr>
							</table>

							<h4>Returns:</h4>
							<ol>
								<li><code>nil</code></li>
							</ol>
							<p class="file_comment">defined in ../../common/EmpireBattle/Source/BattleScript/BattleEditorScriptInterface.cpp, line 10247</p>
						</dd>
					</dl>
					<dl class="function">
						<dt>
							<a name="function:battle:enable_tooltips"><h3 class="function_name"><strong><code>battle:enable_tooltips(<code><a href="lua.html#class:boolean">boolean</a></code> </strong></code><i class="parameter">enable tooltips</i><code><strong>)</code></strong></h3></a>
						</dt>
						<dd>
							Enables or disables tooltips.

							<h4>Parameters:</h4>
							<table class="parameter_list">
								<colgroup>
									<col style="width: 3%;">
									<col style="width: 12%;">
									<col style="width: 85%;">
								</colgroup>
								<tr>
									<td>
										<p><strong>1</strong></p>
									</td>
									<td>
										<p><code><code><a href="lua.html#class:boolean">boolean</a></code></code></p>
									</td>
									<td>
										<p>enable tooltips</p>
									</td>
								</tr>
							</table>

							<h4>Returns:</h4>
							<ol>
								<li><code>nil</code></li>
							</ol>
							<p class="file_comment">defined in ../../common/EmpireBattle/Source/BattleScript/BattleEditorScriptInterface.cpp, line 10257</p>
						</dd>
					</dl>
					<dl class="function">
						<dt>
							<a name="function:battle:force_minimised_tooltips"><h3 class="function_name"><strong><code>battle:force_minimised_tooltips(<code><a href="lua.html#class:boolean">boolean</a></code> </strong></code><i class="parameter">set minimised tooltips</i><code><strong>)</code></strong></h3></a>
						</dt>
						<dd>
							Forces tooltips into minimised mode.

							<h4>Parameters:</h4>
							<table class="parameter_list">
								<colgroup>
									<col style="width: 3%;">
									<col style="width: 12%;">
									<col style="width: 85%;">
								</colgroup>
								<tr>
									<td>
										<p><strong>1</strong></p>
									</td>
									<td>
										<p><code><code><a href="lua.html#class:boolean">boolean</a></code></code></p>
									</td>
									<td>
										<p>set minimised tooltips</p>
									</td>
								</tr>
							</table>

							<h4>Returns:</h4>
							<ol>
								<li><code>nil</code></li>
							</ol>
							<p class="file_comment">defined in ../../common/EmpireBattle/Source/BattleScript/BattleEditorScriptInterface.cpp, line 10266</p>
						</dd>
					</dl>
					<dl class="function">
						<dt>
							<a name="function:battle:disable_groups"><h3 class="function_name"><strong><code>battle:disable_groups(<code><a href="lua.html#class:boolean">boolean</a></code> </strong></code><i class="parameter">disable grouping</i><code><strong>)</code></strong></h3></a>
						</dt>
						<dd>
							Disables or enables grouping functionality.

							<h4>Parameters:</h4>
							<table class="parameter_list">
								<colgroup>
									<col style="width: 3%;">
									<col style="width: 12%;">
									<col style="width: 85%;">
								</colgroup>
								<tr>
									<td>
										<p><strong>1</strong></p>
									</td>
									<td>
										<p><code><code><a href="lua.html#class:boolean">boolean</a></code></code></p>
									</td>
									<td>
										<p>disable grouping</p>
									</td>
								</tr>
							</table>

							<h4>Returns:</h4>
							<ol>
								<li><code>nil</code></li>
							</ol>
							<p class="file_comment">defined in ../../common/EmpireBattle/Source/BattleScript/BattleEditorScriptInterface.cpp, line 10275</p>
						</dd>
					</dl>
					<dl class="function">
						<dt>
							<a name="function:battle:disable_formations"><h3 class="function_name"><strong><code>battle:disable_formations(<code><a href="lua.html#class:boolean">boolean</a></code> </strong></code><i class="parameter">disable formations</i><code><strong>)</code></strong></h3></a>
						</dt>
						<dd>
							Disables or enables formations functionality.

							<h4>Parameters:</h4>
							<table class="parameter_list">
								<colgroup>
									<col style="width: 3%;">
									<col style="width: 12%;">
									<col style="width: 85%;">
								</colgroup>
								<tr>
									<td>
										<p><strong>1</strong></p>
									</td>
									<td>
										<p><code><code><a href="lua.html#class:boolean">boolean</a></code></code></p>
									</td>
									<td>
										<p>disable formations</p>
									</td>
								</tr>
							</table>

							<h4>Returns:</h4>
							<ol>
								<li><code>nil</code></li>
							</ol>
							<p class="file_comment">defined in ../../common/EmpireBattle/Source/BattleScript/BattleEditorScriptInterface.cpp, line 10284</p>
						</dd>
					</dl>
					<dl class="function">
						<dt>
							<a name="function:battle:disable_orders"><h3 class="function_name"><strong><code>battle:disable_orders(<code><a href="lua.html#class:boolean">boolean</a></code> </strong></code><i class="parameter">disable orders</i><code><strong>)</code></strong></h3></a>
						</dt>
						<dd>
							Disables or enables the giving of any orders at all.

							<h4>Parameters:</h4>
							<table class="parameter_list">
								<colgroup>
									<col style="width: 3%;">
									<col style="width: 12%;">
									<col style="width: 85%;">
								</colgroup>
								<tr>
									<td>
										<p><strong>1</strong></p>
									</td>
									<td>
										<p><code><code><a href="lua.html#class:boolean">boolean</a></code></code></p>
									</td>
									<td>
										<p>disable orders</p>
									</td>
								</tr>
							</table>

							<h4>Returns:</h4>
							<ol>
								<li><code>nil</code></li>
							</ol>
							<p class="file_comment">defined in ../../common/EmpireBattle/Source/BattleScript/BattleEditorScriptInterface.cpp, line 10293</p>
						</dd>
					</dl>
					<dl class="function">
						<dt>
							<a name="function:battle:steal_escape_key"><h3 class="function_name"><strong><code>battle:steal_escape_key()</code></strong></h3></a>
						</dt>
						<dd>
							Steals the escape key from the UI. This prevents the UI from intercepting ESC key presses and allows script to detect and process them instead. When the escape key is stolen, a script function called <code>Esc_Key_Pressed</code> will be called when the escape key is pressed by the player.<br />
							Note that the escape key will remain stolen from the UI until <code><a href="#function:battle:release_escape_key">battle:release_escape_key</a></code> is called.


							<h4>Returns:</h4>
							<ol>
								<li><code>nil</code></li>
							</ol>
							<p class="file_comment">defined in ../../common/EmpireBattle/Source/BattleScript/BattleEditorScriptInterface.cpp, line 10302</p>
						</dd>
					</dl>
					<dl class="function">
						<dt>
							<a name="function:battle:release_escape_key"><h3 class="function_name"><strong><code>battle:release_escape_key()</code></strong></h3></a>
						</dt>
						<dd>
							Releases the stolen escape key from the script, allows the UI to intercepting ESC key presses again. This must be called at some point after <code><a href="#function:battle:steal_escape_key">battle:steal_escape_key</a></code> is called.


							<h4>Returns:</h4>
							<ol>
								<li><code>nil</code></li>
							</ol>
							<p class="file_comment">defined in ../../common/EmpireBattle/Source/BattleScript/BattleEditorScriptInterface.cpp, line 10311</p>
						</dd>
					</dl>
					<dl class="function">
						<dt>
							<a name="function:battle:steal_input_focus"><h3 class="function_name"><strong><code>battle:steal_input_focus()</code></strong></h3></a>
						</dt>
						<dd>
							Steals all keyboard input from the UI, effectively disabling the keyboard in the game. After input focus is stolen by a call to this function, it must be released again with <code><a href="#function:battle:release_input_focus">battle:release_input_focus</a></code> at some point.


							<h4>Returns:</h4>
							<ol>
								<li><code>nil</code></li>
							</ol>
							<p class="file_comment">defined in ../../common/EmpireBattle/Source/BattleScript/BattleEditorScriptInterface.cpp, line 10319</p>
						</dd>
					</dl>
					<dl class="function">
						<dt>
							<a name="function:battle:release_input_focus"><h3 class="function_name"><strong><code>battle:release_input_focus()</code></strong></h3></a>
						</dt>
						<dd>
							Releases keyboard input back to the UI after its theft with <code><a href="#function:battle:steal_input_focus">battle:steal_input_focus</a></code>.


							<h4>Returns:</h4>
							<ol>
								<li><code>nil</code></li>
							</ol>
							<p class="file_comment">defined in ../../common/EmpireBattle/Source/BattleScript/BattleEditorScriptInterface.cpp, line 10327</p>
						</dd>
					</dl>
					<dl class="function">
						<dt>
							<a name="function:battle:disable_shortcut"><h3 class="function_name"><strong><code>battle:disable_shortcut(<code><a href="lua.html#class:string">string</a></code> </strong></code><i class="parameter">shortcut name</i><code><strong>, <code><a href="lua.html#class:boolean">boolean</a></code> </strong></code><i class="parameter">should disable</i><code><strong>)</code></strong></h3></a>
						</dt>
						<dd>
							Disables or re-enables a keyboard shortcut by name. A list of keyboard shortcuts is available from the UI team.

							<h4>Parameters:</h4>
							<table class="parameter_list">
								<colgroup>
									<col style="width: 3%;">
									<col style="width: 12%;">
									<col style="width: 85%;">
								</colgroup>
								<tr>
									<td>
										<p><strong>1</strong></p>
									</td>
									<td>
										<p><code><code><a href="lua.html#class:string">string</a></code></code></p>
									</td>
									<td>
										<p>shortcut name</p>
									</td>
								</tr>
								<tr>
									<td>
										<p><strong>2</strong></p>
									</td>
									<td>
										<p><code><code><a href="lua.html#class:boolean">boolean</a></code></code></p>
									</td>
									<td>
										<p>should disable</p>
									</td>
								</tr>
							</table>

							<h4>Returns:</h4>
							<ol>
								<li><code>nil</code></li>
							</ol>
							<p class="file_comment">defined in ../../common/EmpireBattle/Source/BattleScript/BattleEditorScriptInterface.cpp, line 10335</p>
						</dd>
					</dl>
					<dl class="function">
						<dt>
							<a name="function:battle:set_banners_enabled"><h3 class="function_name"><strong><code>battle:set_banners_enabled(<code><a href="lua.html#class:boolean">boolean</a></code> </strong></code><i class="parameter">show ids</i><code><strong>)</code></strong></h3></a>
						</dt>
						<dd>
							Enables or disables the unit IDs - the flags or icons floating above each unit in battle. This provides exactly the same functionality as <code><a href="#function:battle:enable_unit_ids">battle:enable_unit_ids</a></code>, except the removal/reinstatement of banners in this case will be not preserved in replays.<br />
							Note that the <code><a href="cutscene.html#class:cutscene">cutscene</a></code> functionality provided by the script libraries automatically disables unit ids while the cutscene is playing - use <code><a href="cutscene.html#function:cutscene:set_should_disable_unit_ids">cutscene:set_should_disable_unit_ids</a></code> to disable this for a given cutscene rather than calling this function directly.

							<h4>Parameters:</h4>
							<table class="parameter_list">
								<colgroup>
									<col style="width: 3%;">
									<col style="width: 12%;">
									<col style="width: 85%;">
								</colgroup>
								<tr>
									<td>
										<p><strong>1</strong></p>
									</td>
									<td>
										<p><code><code><a href="lua.html#class:boolean">boolean</a></code></code></p>
									</td>
									<td>
										<p>show ids</p>
									</td>
								</tr>
							</table>

							<h4>Returns:</h4>
							<ol>
								<li><code>nil</code></li>
							</ol>
							<p class="file_comment">defined in ../../common/EmpireBattle/Source/BattleScript/BattleEditorScriptInterface.cpp, line 10345</p>
						</dd>
					</dl>
				</div>


				<div>
					<a style="float:right;" href="#top">Back to top</a>
					<a name="section:battle:Querying"><h2 class="section_header">Querying</h2></a>
				</div>
				<div class="section_body">
					<dl class="function">
						<dt>
							<a name="function:battle:is_replay"><h3 class="function_name"><strong><code>battle:is_replay()</code></strong></h3></a>
						</dt>
						<dd>
							Returns whether this battle is a replay.


							<h4>Returns:</h4>
							<ol>
								<li><code><code><a href="lua.html#class:boolean">boolean</a></code></code> is replay</li>
							</ol>
							<p class="file_comment">defined in ../../common/EmpireBattle/Source/BattleScript/BattleEditorScriptInterface.cpp, line 10358</p>
						</dd>
					</dl>
					<dl class="function">
						<dt>
							<a name="function:battle:is_tutorial"><h3 class="function_name"><strong><code>battle:is_tutorial()</code></strong></h3></a>
						</dt>
						<dd>
							Returns the value of the <code>is_tutorial</code> flag. This can be set in the battle setup to activate certain behaviours.


							<h4>Returns:</h4>
							<ol>
								<li><code><code><a href="lua.html#class:boolean">boolean</a></code></code> is_tutorial flag</li>
							</ol>
							<p class="file_comment">defined in ../../common/EmpireBattle/Source/BattleScript/BattleEditorScriptInterface.cpp, line 10367</p>
						</dd>
					</dl>
					<dl class="function">
						<dt>
							<a name="function:battle:is_multiplayer"><h3 class="function_name"><strong><code>battle:is_multiplayer()</code></strong></h3></a>
						</dt>
						<dd>
							Returns whether this battle is running in multiplayer mode.


							<h4>Returns:</h4>
							<ol>
								<li><code><code><a href="lua.html#class:boolean">boolean</a></code></code> is multiplayer</li>
							</ol>
							<p class="file_comment">defined in ../../common/EmpireBattle/Source/BattleScript/BattleEditorScriptInterface.cpp, line 10376</p>
						</dd>
					</dl>
					<dl class="function">
						<dt>
							<a name="function:battle:is_from_campaign"><h3 class="function_name"><strong><code>battle:is_from_campaign()</code></strong></h3></a>
						</dt>
						<dd>
							Returns whether this is a battle fought from campaign.


							<h4>Returns:</h4>
							<ol>
								<li><code><code><a href="lua.html#class:boolean">boolean</a></code></code> is from campaign</li>
							</ol>
							<p class="file_comment">defined in ../../common/EmpireBattle/Source/BattleScript/BattleEditorScriptInterface.cpp, line 10385</p>
						</dd>
					</dl>
					<dl class="function">
						<dt>
							<a name="function:battle:is_quest_battle"><h3 class="function_name"><strong><code>battle:is_quest_battle()</code></strong></h3></a>
						</dt>
						<dd>
							Returns whether this battle is a quest battle.


							<h4>Returns:</h4>
							<ol>
								<li><code><code><a href="lua.html#class:boolean">boolean</a></code></code> is quest battle</li>
							</ol>
							<p class="file_comment">defined in ../../common/EmpireBattle/Source/BattleScript/BattleEditorScriptInterface.cpp, line 10394</p>
						</dd>
					</dl>
					<dl class="function">
						<dt>
							<a name="function:battle:prepare_for_fade_in"><h3 class="function_name"><strong><code>battle:prepare_for_fade_in()</code></strong></h3></a>
						</dt>
						<dd>
							Returns the value of the <code>prepare_for_fade_in</code> flag. This can be set in the battle setup to show a black screen when the battle starts up.


							<h4>Returns:</h4>
							<ol>
								<li><code><code><a href="lua.html#class:boolean">boolean</a></code></code> prepare_for_fade_in flag</li>
							</ol>
							<p class="file_comment">defined in ../../common/EmpireBattle/Source/BattleScript/BattleEditorScriptInterface.cpp, line 10403</p>
						</dd>
					</dl>
					<dl class="function">
						<dt>
							<a name="function:battle:battle_outcome_decided"><h3 class="function_name"><strong><code>battle:battle_outcome_decided()</code></strong></h3></a>
						</dt>
						<dd>
							Returns whether a victor has been decided in the battle, or whether the battle has been determined to be a draw. This happens when the <code>VictoryCountdown</code> phase change occurs.


							<h4>Returns:</h4>
							<ol>
								<li><code><code><a href="lua.html#class:boolean">boolean</a></code></code> outcome decided</li>
							</ol>
							<p class="file_comment">defined in ../../common/EmpireBattle/Source/BattleScript/BattleEditorScriptInterface.cpp, line 10412</p>
						</dd>
					</dl>
					<dl class="function">
						<dt>
							<a name="function:battle:victorious_alliance"><h3 class="function_name"><strong><code>battle:victorious_alliance()</code></strong></h3></a>
						</dt>
						<dd>
							Returns the id of the alliance which has won the battle. If battle results are not finalised then <code>0</code> is returned. If the battle result is drawn then <code>-1</code> is returned.


							<h4>Returns:</h4>
							<ol>
								<li><code><code><a href="lua.html#class:number">number</a></code></code> alliance id</li>
							</ol>
							<p class="file_comment">defined in ../../common/EmpireBattle/Source/BattleScript/BattleEditorScriptInterface.cpp, line 10421</p>
						</dd>
					</dl>
					<dl class="function">
						<dt>
							<a name="function:battle:is_draw"><h3 class="function_name"><strong><code>battle:is_draw()</code></strong></h3></a>
						</dt>
						<dd>
							Returns <code>true</code> if the battle result has been finalised and is a draw, or <code>false</code> otherwise.


							<h4>Returns:</h4>
							<ol>
								<li><code><code><a href="lua.html#class:boolean">boolean</a></code></code> is draw</li>
							</ol>
							<p class="file_comment">defined in ../../common/EmpireBattle/Source/BattleScript/BattleEditorScriptInterface.cpp, line 10430</p>
						</dd>
					</dl>
					<dl class="function">
						<dt>
							<a name="function:battle:is_siege_battle"><h3 class="function_name"><strong><code>battle:is_siege_battle()</code></strong></h3></a>
						</dt>
						<dd>
							Returns whether or not the battle is a siege battle.


							<h4>Returns:</h4>
							<ol>
								<li><code><code><a href="lua.html#class:boolean">boolean</a></code></code> is siege battle</li>
							</ol>
							<p class="file_comment">defined in ../../common/EmpireBattle/Source/BattleScript/BattleEditorScriptInterface.cpp, line 10439</p>
						</dd>
					</dl>
					<dl class="function">
						<dt>
							<a name="function:battle:is_ambush_battle"><h3 class="function_name"><strong><code>battle:is_ambush_battle()</code></strong></h3></a>
						</dt>
						<dd>
							Returns whether or not the battle is an ambush battle.


							<h4>Returns:</h4>
							<ol>
								<li><code><code><a href="lua.html#class:boolean">boolean</a></code></code> is ambush battle</li>
							</ol>
							<p class="file_comment">defined in ../../common/EmpireBattle/Source/BattleScript/BattleEditorScriptInterface.cpp, line 10448</p>
						</dd>
					</dl>
					<dl class="function">
						<dt>
							<a name="function:battle:is_storm_of_magic_battle"><h3 class="function_name"><strong><code>battle:is_storm_of_magic_battle()</code></strong></h3></a>
						</dt>
						<dd>
							Returns whether this is a storm of magic battle.


							<h4>Returns:</h4>
							<ol>
								<li><code><code><a href="lua.html#class:boolean">boolean</a></code></code> is storm of magic battle</li>
							</ol>
							<p class="file_comment">defined in ../../common/EmpireBattle/Source/BattleScript/BattleEditorScriptInterface.cpp, line 10457</p>
						</dd>
					</dl>
					<dl class="function">
						<dt>
							<a name="function:battle:battle_type"><h3 class="function_name"><strong><code>battle:battle_type()</code></strong></h3></a>
						</dt>
						<dd>
							Returns the battle type as a string.


							<h4>Returns:</h4>
							<ol>
								<li><code><code><a href="lua.html#class:string">string</a></code></code> battle type</li>
							</ol>
							<p class="file_comment">defined in ../../common/EmpireBattle/Source/BattleScript/BattleEditorScriptInterface.cpp, line 10466</p>
						</dd>
					</dl>
					<dl class="function">
						<dt>
							<a name="function:battle:unit_scale_factor"><h3 class="function_name"><strong><code>battle:unit_scale_factor()</code></strong></h3></a>
						</dt>
						<dd>
							Returns the unit scale factor as a multiplier. The value returned is a multiplier of the unit size if the scale is set to ultra, so the multiplier should be greater than 0 and less than or equal to 1.


							<h4>Returns:</h4>
							<ol>
								<li><code><code><a href="lua.html#class:number">number</a></code></code> unit scale factor</li>
							</ol>
							<p class="file_comment">defined in ../../common/EmpireBattle/Source/BattleScript/BattleEditorScriptInterface.cpp, line 10475</p>
						</dd>
					</dl>
					<dl class="function">
						<dt>
							<a name="function:battle:unit_scale_factor_index"><h3 class="function_name"><strong><code>battle:unit_scale_factor_index()</code></strong></h3></a>
						</dt>
						<dd>
							Returns the unit scale factor index. This is <code>0</code> for small unit sizes, <code>1</code> for normal unit sizes, <code>2</code> for large unit sizes and <code>3</code> for ultra unit sizes.


							<h4>Returns:</h4>
							<ol>
								<li><code><code><a href="lua.html#class:number">number</a></code></code> unit scale factor index</li>
							</ol>
							<p class="file_comment">defined in ../../common/EmpireBattle/Source/BattleScript/BattleEditorScriptInterface.cpp, line 10484</p>
						</dd>
					</dl>
					<dl class="function">
						<dt>
							<a name="function:battle:get_terrain_height"><h3 class="function_name"><strong><code>battle:get_terrain_height(<code><a href="lua.html#class:number">number</a></code> </strong></code><i class="parameter">x</i><code><strong>, <code><a href="lua.html#class:number">number</a></code> </strong></code><i class="parameter">y</i><code><strong>)</code></strong></h3></a>
						</dt>
						<dd>
							Returns the height of the terrain at the specified x/y co-ordinates. This is intended for use to calculate camera and ping marker positions.

							<h4>Parameters:</h4>
							<table class="parameter_list">
								<colgroup>
									<col style="width: 3%;">
									<col style="width: 12%;">
									<col style="width: 85%;">
								</colgroup>
								<tr>
									<td>
										<p><strong>1</strong></p>
									</td>
									<td>
										<p><code><code><a href="lua.html#class:number">number</a></code></code></p>
									</td>
									<td>
										<p>X co-ordinate in m.</p>
									</td>
								</tr>
								<tr>
									<td>
										<p><strong>2</strong></p>
									</td>
									<td>
										<p><code><code><a href="lua.html#class:number">number</a></code></code></p>
									</td>
									<td>
										<p>Y co-ordinate in m.</p>
									</td>
								</tr>
							</table>

							<h4>Returns:</h4>
							<ol>
								<li><code><code><a href="lua.html#class:number">number</a></code></code> height in m.</li>
							</ol>
							<p class="file_comment">defined in ../../common/EmpireBattle/Source/BattleScript/BattleEditorScriptInterface.cpp, line 10493</p>
						</dd>
					</dl>
					<dl class="function">
						<dt>
							<a name="function:battle:is_area_clear"><h3 class="function_name"><strong><code>battle:is_area_clear(<code><a href="battle_vector.html#class:battle_vector">battle_vector</a></code> </strong></code><i class="parameter">position</i><code><strong>, <code><a href="lua.html#class:number">number</a></code> </strong></code><i class="parameter">bearing</i><code><strong>, <code><a href="lua.html#class:number">number</a></code> </strong></code><i class="parameter">width</i><code><strong>, <code><a href="lua.html#class:number">number</a></code> </strong></code><i class="parameter">depth</i><code><strong>, [<code><a href="lua.html#class:boolean">boolean</a></code> </strong></code><i class="parameter">is naval</i><code><strong>])</code></strong></h3></a>
						</dt>
						<dd>
							Returns whether an area is clear of pathfinding restrictions. The area is specified by a position, a bearing, and the width/depth of a bounding box centred at that position and drawn at that bearing.

							<h4>Parameters:</h4>
							<table class="parameter_list">
								<colgroup>
									<col style="width: 3%;">
									<col style="width: 12%;">
									<col style="width: 85%;">
								</colgroup>
								<tr>
									<td>
										<p><strong>1</strong></p>
									</td>
									<td>
										<p><code><code><a href="battle_vector.html#class:battle_vector">battle_vector</a></code></code></p>
									</td>
									<td>
										<p>Position.</p>
									</td>
								</tr>
								<tr>
									<td>
										<p><strong>2</strong></p>
									</td>
									<td>
										<p><code><code><a href="lua.html#class:number">number</a></code></code></p>
									</td>
									<td>
										<p>Bearing in degrees.</p>
									</td>
								</tr>
								<tr>
									<td>
										<p><strong>3</strong></p>
									</td>
									<td>
										<p><code><code><a href="lua.html#class:number">number</a></code></code></p>
									</td>
									<td>
										<p>Width of oriented-bounding box in metres.</p>
									</td>
								</tr>
								<tr>
									<td>
										<p><strong>4</strong></p>
									</td>
									<td>
										<p><code><code><a href="lua.html#class:number">number</a></code></code></p>
									</td>
									<td>
										<p>Depth of oriented-bounding box in metres.</p>
									</td>
								</tr>
								<tr>
									<td>
										<p><strong>5</strong></p>
									</td>
									<td>
										<p><code><code><a href="lua.html#class:boolean">boolean</a></code></code></p>
									</td>
									<td>
										<p><i>optional, default value=false</i></p>
										<p>Is the area on sea.</p>
									</td>
								</tr>
							</table>

							<h4>Returns:</h4>
							<ol>
								<li><code><code><a href="lua.html#class:boolean">boolean</a></code></code> area is clear</li>
							</ol>

							<h4>Example:</h4>
							<div id="example_code"><code>
								 -- Checks if an area of 40m x 60m is clear of pathfinding restrictions.<br />
								 -- The source position is [100, 100] and the area is drawn at a bearing of 90 degrees (i.e. east).<br />
								 -- The corners of the area being checked would be at [70, 120], [130, 120], [130, 80], [70, 80]<br />
								 return bm:is_area_clear(v(100, 100), 90, 40, 60);<br />
							</code></div>
							<p class="file_comment">defined in ../../common/EmpireBattle/Source/BattleScript/BattleEditorScriptInterface.cpp, line 10504</p>
						</dd>
					</dl>
					<dl class="function">
						<dt>
							<a name="function:battle:ground_type"><h3 class="function_name"><strong><code>battle:ground_type(<code><a href="battle_vector.html#class:battle_vector">battle_vector</a></code> </strong></code><i class="parameter">position</i><code><strong>)</code></strong></h3></a>
						</dt>
						<dd>
							Returns the ground type at a supplied position.

							<h4>Parameters:</h4>
							<table class="parameter_list">
								<colgroup>
									<col style="width: 3%;">
									<col style="width: 12%;">
									<col style="width: 85%;">
								</colgroup>
								<tr>
									<td>
										<p><strong>1</strong></p>
									</td>
									<td>
										<p><code><code><a href="battle_vector.html#class:battle_vector">battle_vector</a></code></code></p>
									</td>
									<td>
										<p>position</p>
									</td>
								</tr>
							</table>

							<h4>Returns:</h4>
							<ol>
								<li><code><code><a href="lua.html#class:string">string</a></code></code> ground type</li>
							</ol>
							<p class="file_comment">defined in ../../common/EmpireBattle/Source/BattleScript/BattleEditorScriptInterface.cpp, line 10522</p>
						</dd>
					</dl>
					<dl class="function">
						<dt>
							<a name="function:battle:random_number"><h3 class="function_name"><strong><code>battle:random_number()</code></strong></h3></a>
						</dt>
						<dd>
							Generate a battle-synchronised random number between 0 and 1.


							<h4>Returns:</h4>
							<ol>
								<li><code><code><a href="lua.html#class:number">number</a></code></code> random number</li>
							</ol>
							<p class="file_comment">defined in ../../common/EmpireBattle/Source/BattleScript/BattleEditorScriptInterface.cpp, line 10532</p>
						</dd>
					</dl>
				</div>


				<div>
					<a style="float:right;" href="#top">Back to top</a>
					<a name="section:battle:Benchmarking and Autotesting"><h2 class="section_header">Benchmarking and Autotesting</h2></a>
				</div>
				<div class="section_body">
					<dl class="function">
						<dt>
							<a name="function:battle:is_benchmarking_mode"><h3 class="function_name"><strong><code>battle:is_benchmarking_mode()</code></strong></h3></a>
						</dt>
						<dd>
							Returns whether this battle has been loaded in benchmarking mode or not. This should only return <code>true</code> if the battle was loaded through the benchmark menu on the frontend.


							<h4>Returns:</h4>
							<ol>
								<li><code><code><a href="lua.html#class:boolean">boolean</a></code></code> is benchmarking mode</li>
							</ol>
							<p class="file_comment">defined in ../../common/EmpireBattle/Source/BattleScript/BattleEditorScriptInterface.cpp, line 10544</p>
						</dd>
					</dl>
					<dl class="function">
						<dt>
							<a name="function:battle:end_benchmark"><h3 class="function_name"><strong><code>battle:end_benchmark()</code></strong></h3></a>
						</dt>
						<dd>
							Ends a currently-running benchmark, showing benchmarking statistics and ending the battle.


							<h4>Returns:</h4>
							<ol>
								<li><code>nil</code></li>
							</ol>
							<p class="file_comment">defined in ../../common/EmpireBattle/Source/BattleScript/BattleEditorScriptInterface.cpp, line 10553</p>
						</dd>
					</dl>
					<dl class="function">
						<dt>
							<a name="function:battle:quit_to_windows_from_script"><h3 class="function_name"><strong><code>battle:quit_to_windows_from_script()</code></strong></h3></a>
						</dt>
						<dd>
							Causes the game to completely shut down.


							<h4>Returns:</h4>
							<ol>
								<li><code>nil</code></li>
							</ol>
							<p class="file_comment">defined in ../../common/EmpireBattle/Source/BattleScript/BattleEditorScriptInterface.cpp, line 10561</p>
						</dd>
					</dl>
					<dl class="function">
						<dt>
							<a name="function:battle:appdata_screenshots"><h3 class="function_name"><strong><code>battle:appdata_screenshots()</code></strong></h3></a>
						</dt>
						<dd>
							Returns a path to the screenshots directory. This is used by the autotest system.


							<h4>Returns:</h4>
							<ol>
								<li><code><code><a href="lua.html#class:string">string</a></code></code> screenshot directory</li>
							</ol>
							<p class="file_comment">defined in ../../common/EmpireBattle/Source/BattleScript/BattleEditorScriptInterface.cpp, line 10569</p>
						</dd>
					</dl>
				</div>


				<div>
					<a style="float:right;" href="#top">Back to top</a>
					<a name="section:battle:Global Attributes and Abilities"><h2 class="section_header">Global Attributes and Abilities</h2></a>
				</div>
				<div class="section_body">
					<dl class="function">
						<dt>
							<a name="function:battle:set_stat_attribute"><h3 class="function_name"><strong><code>battle:set_stat_attribute(<code><a href="lua.html#class:string">string</a></code> </strong></code><i class="parameter">attribute key</i><code><strong>, <code><a href="lua.html#class:boolean">boolean</a></code> </strong></code><i class="parameter">enable/disable</i><code><strong>)</code></strong></h3></a>
						</dt>
						<dd>
							Enables or disables a unit attribute for all units on the battlefield. Attribute keys are listed in the <code><a href="battle_unit.html#section:battle_unit:Unit Attributes">Unit Attributes</a></code> section of this documentation.

							<h4>Parameters:</h4>
							<table class="parameter_list">
								<colgroup>
									<col style="width: 3%;">
									<col style="width: 12%;">
									<col style="width: 85%;">
								</colgroup>
								<tr>
									<td>
										<p><strong>1</strong></p>
									</td>
									<td>
										<p><code><code><a href="lua.html#class:string">string</a></code></code></p>
									</td>
									<td>
										<p>attribute key</p>
									</td>
								</tr>
								<tr>
									<td>
										<p><strong>2</strong></p>
									</td>
									<td>
										<p><code><code><a href="lua.html#class:boolean">boolean</a></code></code></p>
									</td>
									<td>
										<p>enable/disable</p>
									</td>
								</tr>
							</table>

							<h4>Returns:</h4>
							<ol>
								<li><code>nil</code></li>
							</ol>
							<p class="file_comment">defined in ../../common/EmpireBattle/Source/BattleScript/BattleEditorScriptInterface.cpp, line 10591</p>
						</dd>
					</dl>
					<dl class="function">
						<dt>
							<a name="function:battle:set_special_abilities_flags"><h3 class="function_name"><strong><code>battle:set_special_abilities_flags(<code><a href="lua.html#class:string">string</a></code> </strong></code><i class="parameter">flag key</i><code><strong>, <code><a href="lua.html#class:boolean">boolean</a></code> </strong></code><i class="parameter">enable/disable</i><code><strong>)</code></strong></h3></a>
						</dt>
						<dd>
							Activates or deactivates a special ability flag for all units on the battlefield. Valid special ability flags are listed in the <code><a href="battle_unit.html#section:battle_unit:Special Ability Flags">Special Ability Flags</a></code> section of this documentation.

							<h4>Parameters:</h4>
							<table class="parameter_list">
								<colgroup>
									<col style="width: 3%;">
									<col style="width: 12%;">
									<col style="width: 85%;">
								</colgroup>
								<tr>
									<td>
										<p><strong>1</strong></p>
									</td>
									<td>
										<p><code><code><a href="lua.html#class:string">string</a></code></code></p>
									</td>
									<td>
										<p>flag key</p>
									</td>
								</tr>
								<tr>
									<td>
										<p><strong>2</strong></p>
									</td>
									<td>
										<p><code><code><a href="lua.html#class:boolean">boolean</a></code></code></p>
									</td>
									<td>
										<p>enable/disable</p>
									</td>
								</tr>
							</table>

							<h4>Returns:</h4>
							<ol>
								<li><code>nil</code></li>
							</ol>
							<p class="file_comment">defined in ../../common/EmpireBattle/Source/BattleScript/BattleEditorScriptInterface.cpp, line 10614</p>
						</dd>
					</dl>
					<dl class="function">
						<dt>
							<a name="function:battle:disable_all_abilities"><h3 class="function_name"><strong><code>battle:disable_all_abilities()</code></strong></h3></a>
						</dt>
						<dd>
							Disable all abilities on the battle


							<h4>Returns:</h4>
							<ol>
								<li><code>nil</code></li>
							</ol>
							<p class="file_comment">defined in ../../common/EmpireBattle/Source/BattleScript/BattleEditorScriptInterface.cpp, line 10637</p>
						</dd>
					</dl>
					<dl class="function">
						<dt>
							<a name="function:battle:enable_all_abilities"><h3 class="function_name"><strong><code>battle:enable_all_abilities()</code></strong></h3></a>
						</dt>
						<dd>
							Disable all abilities on the battle


							<h4>Returns:</h4>
							<ol>
								<li><code>nil</code></li>
							</ol>
							<p class="file_comment">defined in ../../common/EmpireBattle/Source/BattleScript/BattleEditorScriptInterface.cpp, line 10643</p>
						</dd>
					</dl>
				</div>


				<div>
					<a style="float:right;" href="#top">Back to top</a>
					<a name="section:battle:Survival Battles"><h2 class="section_header">Survival Battles</h2></a>
				</div>
				<div class="section_body">
					<dl class="function">
						<dt>
							<a name="function:battle:notify_survival_started"><h3 class="function_name"><strong><code>battle:notify_survival_started()</code></strong></h3></a>
						</dt>
						<dd>
							Notifies the game that a survival battle has started.


							<h4>Returns:</h4>
							<ol>
								<li><code>nil</code></li>
							</ol>
							<p class="file_comment">defined in ../../common/EmpireBattle/Source/BattleScript/BattleEditorScriptInterface.cpp, line 10654</p>
						</dd>
					</dl>
					<dl class="function">
						<dt>
							<a name="function:battle:notify_survival_total_waves"><h3 class="function_name"><strong><code>battle:notify_survival_total_waves(<code><a href="lua.html#class:number">number</a></code> </strong></code><i class="parameter">total number of waves.</i><code><strong>)</code></strong></h3></a>
						</dt>
						<dd>
							Notifies the game how many total waves there are in a survival battle.

							<h4>Parameters:</h4>
							<table class="parameter_list">
								<colgroup>
									<col style="width: 3%;">
									<col style="width: 12%;">
									<col style="width: 85%;">
								</colgroup>
								<tr>
									<td>
										<p><strong>1</strong></p>
									</td>
									<td>
										<p><code><code><a href="lua.html#class:number">number</a></code></code></p>
									</td>
									<td>
										<p>total number of waves.</p>
									</td>
								</tr>
							</table>

							<h4>Returns:</h4>
							<ol>
								<li><code>nil</code></li>
							</ol>
							<p class="file_comment">defined in ../../common/EmpireBattle/Source/BattleScript/BattleEditorScriptInterface.cpp, line 10661</p>
						</dd>
					</dl>
					<dl class="function">
						<dt>
							<a name="function:battle:notify_wave_state_changed"><h3 class="function_name"><strong><code>battle:notify_wave_state_changed(<code><a href="lua.html#class:number">number</a></code> </strong></code><i class="parameter">wave index</i><code><strong>, <code><a href="lua.html#class:string">string</a></code> </strong></code><i class="parameter">new state</i><code><strong>, <code><a href="lua.html#class:boolean">boolean</a></code> </strong></code><i class="parameter">is final wave</i><code><strong>)</code></strong></h3></a>
						</dt>
						<dd>
							Instructs the game that a survival battle wave has changed state. This function is used to create a new survival battle wave, or update the state of an existing wave. Waves are specified a numeric index, starting from <code>0</code> - if a wave index is specified that the system has not seen before, then a new wave is started.<br />
							A survival battle wave can occupy one of three states - <code>incoming</code>, <code>in_progress</code> or <code>defeated</code>. The new state of the wave must be specified as a string.

							<h4>Parameters:</h4>
							<table class="parameter_list">
								<colgroup>
									<col style="width: 3%;">
									<col style="width: 12%;">
									<col style="width: 85%;">
								</colgroup>
								<tr>
									<td>
										<p><strong>1</strong></p>
									</td>
									<td>
										<p><code><code><a href="lua.html#class:number">number</a></code></code></p>
									</td>
									<td>
										<p>Index of survival battle wave to update (or create, if index has not been used before).</p>
									</td>
								</tr>
								<tr>
									<td>
										<p><strong>2</strong></p>
									</td>
									<td>
										<p><code><code><a href="lua.html#class:string">string</a></code></code></p>
									</td>
									<td>
										<p>New state of survival battle wave, either <code>incoming</code>, <code>in_progress</code> or <code>defeated</code>.</p>
									</td>
								</tr>
								<tr>
									<td>
										<p><strong>3</strong></p>
									</td>
									<td>
										<p><code><code><a href="lua.html#class:boolean">boolean</a></code></code></p>
									</td>
									<td>
										<p>Is this wave the final wave in the battle.</p>
									</td>
								</tr>
							</table>

							<h4>Returns:</h4>
							<ol>
								<li><code>nil</code></li>
							</ol>
							<p class="file_comment">defined in ../../common/EmpireBattle/Source/BattleScript/BattleEditorScriptInterface.cpp, line 10669</p>
						</dd>
					</dl>
					<dl class="function">
						<dt>
							<a name="function:battle:notify_wave_units_changed"><h3 class="function_name"><strong><code>battle:notify_wave_units_changed(<code><a href="lua.html#class:number">number</a></code> </strong></code><i class="parameter">wave index</i><code><strong>, <code><a href="lua.html#class:string">string</a></code> </strong></code><i class="parameter">new state</i><code><strong>, <code><a href="lua.html#class:boolean">boolean</a></code> </strong></code><i class="parameter">is final wave</i><code><strong>)</code></strong></h3></a>
						</dt>
						<dd>
							Instructs the game that a survival battle wave unit composition has been changed on a specific wave id.<br />
							A survival battle wave can occupy one of three states - <code>incoming</code>, <code>in_progress</code> or <code>defeated</code>. The new state of the wave must be specified as a string.

							<h4>Parameters:</h4>
							<table class="parameter_list">
								<colgroup>
									<col style="width: 3%;">
									<col style="width: 12%;">
									<col style="width: 85%;">
								</colgroup>
								<tr>
									<td>
										<p><strong>1</strong></p>
									</td>
									<td>
										<p><code><code><a href="lua.html#class:number">number</a></code></code></p>
									</td>
									<td>
										<p>Index of survival battle wave to update (or create, if index has not been used before).</p>
									</td>
								</tr>
								<tr>
									<td>
										<p><strong>2</strong></p>
									</td>
									<td>
										<p><code><code><a href="lua.html#class:string">string</a></code></code></p>
									</td>
									<td>
										<p>New state of survival battle wave, either <code>incoming</code>, <code>in_progress</code> or <code>defeated</code>.</p>
									</td>
								</tr>
								<tr>
									<td>
										<p><strong>3</strong></p>
									</td>
									<td>
										<p><code><code><a href="lua.html#class:boolean">boolean</a></code></code></p>
									</td>
									<td>
										<p>Is this wave the final wave in the battle.</p>
									</td>
								</tr>
							</table>

							<h4>Returns:</h4>
							<ol>
								<li><code>nil</code></li>
							</ol>
							<p class="file_comment">defined in ../../common/EmpireBattle/Source/BattleScript/BattleEditorScriptInterface.cpp, line 10680</p>
						</dd>
					</dl>
					<dl class="function">
						<dt>
							<a name="function:battle:notify_wave_progress_changed"><h3 class="function_name"><strong><code>battle:notify_wave_progress_changed(<code><a href="lua.html#class:number">number</a></code> </strong></code><i class="parameter">wave index</i><code><strong>, <code><a href="lua.html#class:number">number</a></code> </strong></code><i class="parameter">progress</i><code><strong>)</code></strong></h3></a>
						</dt>
						<dd>
							Updates the progress bar on the UI of the specified survival battle wave. This gives the player an indication of how far through the wave they are.

							<h4>Parameters:</h4>
							<table class="parameter_list">
								<colgroup>
									<col style="width: 3%;">
									<col style="width: 12%;">
									<col style="width: 85%;">
								</colgroup>
								<tr>
									<td>
										<p><strong>1</strong></p>
									</td>
									<td>
										<p><code><code><a href="lua.html#class:number">number</a></code></code></p>
									</td>
									<td>
										<p>Index of survival battle wave to update. This should match the index of the wave previously specified to <code><a href="#function:battle:notify_wave_state_changed">battle:notify_wave_state_changed</a></code>.</p>
									</td>
								</tr>
								<tr>
									<td>
										<p><strong>2</strong></p>
									</td>
									<td>
										<p><code><code><a href="lua.html#class:number">number</a></code></code></p>
									</td>
									<td>
										<p>Progress of the survival battle wave, specified as a unary (0-1) value.</p>
									</td>
								</tr>
							</table>

							<h4>Returns:</h4>
							<ol>
								<li><code>nil</code></li>
							</ol>
							<p class="file_comment">defined in ../../common/EmpireBattle/Source/BattleScript/BattleEditorScriptInterface.cpp, line 10691</p>
						</dd>
					</dl>
					<dl class="function">
						<dt>
							<a name="function:battle:notify_survival_completion"><h3 class="function_name"><strong><code>battle:notify_survival_completion()</code></strong></h3></a>
						</dt>
						<dd>
							Notifies the game that all survival battle waves are completed. This informs battle victory conditions related to survival battle waves that the survival battle has been successfully completed.


							<h4>Returns:</h4>
							<ol>
								<li><code>nil</code></li>
							</ol>
							<p class="file_comment">defined in ../../common/EmpireBattle/Source/BattleScript/BattleEditorScriptInterface.cpp, line 10701</p>
						</dd>
					</dl>
				</div>


				<div>
					<a style="float:right;" href="#top">Back to top</a>
					<a name="section:battle:Battle Results"><h2 class="section_header">Battle Results</h2></a>
				</div>
				<div class="section_body">
					<dl class="function">
						<dt>
							<a name="function:battle:force_battle_end"><h3 class="function_name"><strong><code>battle:force_battle_end(<br />&emsp;&emsp;<code><a href="lua.html#class:number">number</a></code> </strong></code><i class="parameter">winning alliance number</i><code><strong>, <br />&emsp;&emsp;<code><a href="lua.html#class:string">string</a></code> </strong></code><i class="parameter">reason</i><code><strong>, <br />&emsp;&emsp;[<code><a href="lua.html#class:boolean">boolean</a></code> </strong></code><i class="parameter">immediate</i><code><strong>], <br />&emsp;&emsp;[<code><a href="lua.html#class:boolean">boolean</a></code> </strong></code><i class="parameter">force winner</i><code><strong>]<br />)</code></strong></h3></a>
						</dt>
						<dd>
							Ends the battle in favour of one side or the other. A draw may also be specified.<br />
							A reason string must be specified from the following list:<br />
							<ul><li><code>none</code></li><br />
							<li><code>timeout</code></li><br />
							<li><code>kill_or_rout</code></li><br />
							<li><code>kill_enemy</code></li><br />
							<li><code>capture_settlement</code></li><br />
							<li><code>capture_locations</code></li><br />
							<li><code>sink_or_surrender_fleet</code></li><br />
							<li><code>autoresolve</code></li><br />
							<li><code>surrender</code></li><br />
							<li><code>mp_disconnected</code></li><br />
							<li><code>scripted</code></li><br />
							<li><code>capture_baggage_train</code></li><br />
							<li><code>avatar_autoresolve</code></li><br />
							<li><code>mp_insufficient_human_players</code></li><br />
							<li><code>scored_resoultion</code></li><br />
							<li><code>tug_of_war</code></li><br />
							<li><code>capture_location_score</code></li><br />
							<li><code>wave_completion</code></li><br />
							<li><code>capture_tickets</code></li><br />
							<li><code>kill_or_rout_ignore_reinforcements</code></li><br />
							<li><code>kill_or_rout_no_support_available</code></li><br />
							<li><code>decision</code></li></ul>

							<h4>Parameters:</h4>
							<table class="parameter_list">
								<colgroup>
									<col style="width: 3%;">
									<col style="width: 12%;">
									<col style="width: 85%;">
								</colgroup>
								<tr>
									<td>
										<p><strong>1</strong></p>
									</td>
									<td>
										<p><code><code><a href="lua.html#class:number">number</a></code></code></p>
									</td>
									<td>
										<p>Winning alliance number. If <code>0</code> is supplied then the battle will end as a draw.</p>
									</td>
								</tr>
								<tr>
									<td>
										<p><strong>2</strong></p>
									</td>
									<td>
										<p><code><code><a href="lua.html#class:string">string</a></code></code></p>
									</td>
									<td>
										<p>Reason why the battle is ending - see list above.</p>
									</td>
								</tr>
								<tr>
									<td>
										<p><strong>3</strong></p>
									</td>
									<td>
										<p><code><code><a href="lua.html#class:boolean">boolean</a></code></code></p>
									</td>
									<td>
										<p><i>optional, default value=true</i></p>
										<p>End the battle immediately. If <code>false</code> the battle will end in the next conflict phase update.</p>
									</td>
								</tr>
								<tr>
									<td>
										<p><strong>4</strong></p>
									</td>
									<td>
										<p><code><code><a href="lua.html#class:boolean">boolean</a></code></code></p>
									</td>
									<td>
										<p><i>optional, default value=true</i></p>
										<p>Force the winning alliance value. If <code>false</code> is supplied the winning alliance will only be set if the battle has not already decided on a victor.</p>
									</td>
								</tr>
							</table>

							<h4>Returns:</h4>
							<ol>
								<li><code>nil</code></li>
							</ol>
							<p class="file_comment">defined in ../../common/EmpireBattle/Source/BattleScript/BattleEditorScriptInterface.cpp, line 10715</p>
						</dd>
					</dl>
					<dl class="function">
						<dt>
							<a name="function:battle:force_custom_battle_result"><h3 class="function_name"><strong><code>battle:force_custom_battle_result(<code><a href="lua.html#class:string">string</a></code> </strong></code><i class="parameter">result key</i><code><strong>, <code><a href="lua.html#class:boolean">boolean</a></code> </strong></code><i class="parameter">for winner</i><code><strong>)</code></strong></h3></a>
						</dt>
						<dd>
							Forces a particular result for the battle being fought, for either the winner or the loser of the battle.

							<h4>Parameters:</h4>
							<table class="parameter_list">
								<colgroup>
									<col style="width: 3%;">
									<col style="width: 12%;">
									<col style="width: 85%;">
								</colgroup>
								<tr>
									<td>
										<p><strong>1</strong></p>
									</td>
									<td>
										<p><code><code><a href="lua.html#class:string">string</a></code></code></p>
									</td>
									<td>
										<p>Result key, from the <code>battle_result_types</code> database table.</p>
									</td>
								</tr>
								<tr>
									<td>
										<p><strong>2</strong></p>
									</td>
									<td>
										<p><code><code><a href="lua.html#class:boolean">boolean</a></code></code></p>
									</td>
									<td>
										<p>Is the result for the battle winner - supply <code>false</code> to apply the result for the loser instead.</p>
									</td>
								</tr>
							</table>

							<h4>Returns:</h4>
							<ol>
								<li><code>nil</code></li>
							</ol>
							<p class="file_comment">defined in ../../common/EmpireBattle/Source/BattleScript/BattleEditorScriptInterface.cpp, line 10750</p>
						</dd>
					</dl>
				</div>


				<div>
					<a style="float:right;" href="#top">Back to top</a>
					<a name="section:battle:Miscellaneous"><h2 class="section_header">Miscellaneous</h2></a>
				</div>
				<div class="section_body">
					<dl class="function">
						<dt>
							<a name="function:battle:trigger_projectile_launch"><h3 class="function_name"><strong><code>battle:trigger_projectile_launch(<br />&emsp;&emsp;<code><a href="lua.html#class:string">string</a></code> </strong></code><i class="parameter">projectile key</i><code><strong>, <br />&emsp;&emsp;<code><a href="battle_vector.html#class:battle_vector">battle_vector</a></code> </strong></code><i class="parameter">launch position</i><code><strong>, <br />&emsp;&emsp;<code><a href="battle_vector.html#class:battle_vector">battle_vector</a></code> </strong></code><i class="parameter">target position</i><code><strong><br />)</code></strong></h3></a>
						</dt>
						<dd>
							Trigger a projectile launch from one position to another. Be careful to shoot downwards if you have artillery projectiles, as they are designed to be lobbed.

							<h4>Parameters:</h4>
							<table class="parameter_list">
								<colgroup>
									<col style="width: 3%;">
									<col style="width: 12%;">
									<col style="width: 85%;">
								</colgroup>
								<tr>
									<td>
										<p><strong>1</strong></p>
									</td>
									<td>
										<p><code><code><a href="lua.html#class:string">string</a></code></code></p>
									</td>
									<td>
										<p>Projectile key from the <code>projectiles</code> table.</p>
									</td>
								</tr>
								<tr>
									<td>
										<p><strong>2</strong></p>
									</td>
									<td>
										<p><code><code><a href="battle_vector.html#class:battle_vector">battle_vector</a></code></code></p>
									</td>
									<td>
										<p>Launch position.</p>
									</td>
								</tr>
								<tr>
									<td>
										<p><strong>3</strong></p>
									</td>
									<td>
										<p><code><code><a href="battle_vector.html#class:battle_vector">battle_vector</a></code></code></p>
									</td>
									<td>
										<p>Target position.</p>
									</td>
								</tr>
							</table>

							<h4>Returns:</h4>
							<ol>
								<li><code>nil</code></li>
							</ol>
							<p class="file_comment">defined in ../../common/EmpireBattle/Source/BattleScript/BattleEditorScriptInterface.cpp, line 10766</p>
						</dd>
					</dl>
					<dl class="function">
						<dt>
							<a name="function:battle:unlock_achievement"><h3 class="function_name"><strong><code>battle:unlock_achievement(<code><a href="lua.html#class:string">string</a></code> </strong></code><i class="parameter">achievement key</i><code><strong>)</code></strong></h3></a>
						</dt>
						<dd>
							Unlocks a steam achievement by string key. Achievements have to be set up elsewhere to be unlockable with this function.

							<h4>Parameters:</h4>
							<table class="parameter_list">
								<colgroup>
									<col style="width: 3%;">
									<col style="width: 12%;">
									<col style="width: 85%;">
								</colgroup>
								<tr>
									<td>
										<p><strong>1</strong></p>
									</td>
									<td>
										<p><code><code><a href="lua.html#class:string">string</a></code></code></p>
									</td>
									<td>
										<p>achievement key</p>
									</td>
								</tr>
							</table>

							<h4>Returns:</h4>
							<ol>
								<li><code>nil</code></li>
							</ol>
							<p class="file_comment">defined in ../../common/EmpireBattle/Source/BattleScript/BattleEditorScriptInterface.cpp, line 10777</p>
						</dd>
					</dl>
					<dl class="function">
						<dt>
							<a name="function:battle:output_battle_xml"><h3 class="function_name"><strong><code>battle:output_battle_xml(<code><a href="lua.html#class:string">string</a></code> </strong></code><i class="parameter">filename</i><code><strong>)</code></strong></h3></a>
						</dt>
						<dd>
							Writes out a battle xml file with the supplied filename containing the current battle setup. This can be useful for creating scripted battles.

							<h4>Parameters:</h4>
							<table class="parameter_list">
								<colgroup>
									<col style="width: 3%;">
									<col style="width: 12%;">
									<col style="width: 85%;">
								</colgroup>
								<tr>
									<td>
										<p><strong>1</strong></p>
									</td>
									<td>
										<p><code><code><a href="lua.html#class:string">string</a></code></code></p>
									</td>
									<td>
										<p>filename</p>
									</td>
								</tr>
							</table>

							<h4>Returns:</h4>
							<ol>
								<li><code><code><a href="lua.html#class:boolean">boolean</a></code></code> operation succeeded</li>
							</ol>
							<p class="file_comment">defined in ../../common/EmpireBattle/Source/BattleScript/BattleEditorScriptInterface.cpp, line 10786</p>
						</dd>
					</dl>
					<dl class="function">
						<dt>
							<a name="function:battle:save_unit_pair_balance_data"><h3 class="function_name"><strong><code>battle:save_unit_pair_balance_data(<code><a href="battle_unit.html#class:battle_unit">battle_unit</a></code> </strong></code><i class="parameter">unit_1</i><code><strong>, <code><a href="battle_unit.html#class:battle_unit">battle_unit</a></code> </strong></code><i class="parameter">unit_2</i><code><strong>, <code><a href="lua.html#class:number">number</a></code> </strong></code><i class="parameter">engagement_winner</i><code><strong>)</code></strong></h3></a>
						</dt>
						<dd>
							Called by the unit balance tests. Saves the unit pair battle statistics and stats in DBLOG. (text file or SQL database depending of build the configuration. 

							<h4>Parameters:</h4>
							<table class="parameter_list">
								<colgroup>
									<col style="width: 3%;">
									<col style="width: 12%;">
									<col style="width: 85%;">
								</colgroup>
								<tr>
									<td>
										<p><strong>1</strong></p>
									</td>
									<td>
										<p><code><code><a href="battle_unit.html#class:battle_unit">battle_unit</a></code></code></p>
									</td>
									<td>
										<p>unit_1</p>
									</td>
								</tr>
								<tr>
									<td>
										<p><strong>2</strong></p>
									</td>
									<td>
										<p><code><code><a href="battle_unit.html#class:battle_unit">battle_unit</a></code></code></p>
									</td>
									<td>
										<p>unit_2</p>
									</td>
								</tr>
								<tr>
									<td>
										<p><strong>3</strong></p>
									</td>
									<td>
										<p><code><code><a href="lua.html#class:number">number</a></code></code></p>
									</td>
									<td>
										<p>Alliance of the winner of this engagement, 0 to draw</p>
									</td>
								</tr>
							</table>

							<h4>Returns:</h4>
							<ol>
								<li><code>nil</code></li>
							</ol>
							<p class="file_comment">defined in ../../common/EmpireBattle/Source/BattleScript/BattleEditorScriptInterface.cpp, line 10795</p>
						</dd>
					</dl>
				</div>


			</div>

		</div>

		<div id="about">Last updated 12/08/2022 11:56:59</div>

	</div>

	<script src="../searchdata.js"></script>
	<script src="../search.js"></script>
	<script>const page_env = "battle"; const path_to_document_root = "../";</script>

</body>
</html>