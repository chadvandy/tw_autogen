<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
<head>
	<title>Script Unit script class</title>
	<link rel="stylesheet" href="../stylesheet.css" type="text/css" />
</head>

<body>

	<a name="top"></a>

	<div id="container">

		<div style="background-color:#e2edff" id="main">

			<div style="background-color:#e2edff" id="navigation_left">
				<br/>
				<h1 class="navigation_header"><i>Battle Documentation</i></h1>
				<a href="../index.html">Scripting Homepage</a>
				<h2 style="background-color:#c1e6ff">Search</h2>
				<ul>
				<form id="search_env_checkbox" class="search_env_checkbox">
					<label for="search_current_env_only">Search battle only</label>
					<input type="checkbox" name="search_current_env_only" checked /><br />
				</form>
				<form id="search" class="search_form" onsubmit="return false">
					<input class="search_input" type="text" placeholder="Search.."/><br />
					<div id="search_dropdown" class="search_dropdown"></div>
				</form>				<h2 style="background-color:#c1e6ff">Game Areas</h2>
				<ul>
					<li><a href="../campaign/campaign_index.html">Campaign Index</a></li>
					<li><strong> > Battle Index</strong></li>
					<li><a href="../frontend/frontend_index.html">Frontend Index</a></li>
				</ul>

				<h2 style="background-color:#c1e6ff">On this page</h2>
				<ul>
				<div class="key">
					<strong>Key</strong>
					<table class="key">
						<tr>
							<td width="75%">Loaded in Campaign</td>
							<td><img alt="Loaded in Campaign" style="float:right;" src="../images/loaded_in_campaign.png" height="10" width="10" /></td>
						</tr>
						<tr>
							<td width="75%">Loaded in Battle</td>
							<td><img alt="Loaded in Battle" style="float:right;" src="../images/loaded_in_battle.png" height="10" width="10" /></td>
						</tr>
						<tr>
							<td width="75%">Loaded in Frontend</td>
							<td><img alt="Loaded in Frontend" style="float:right;" src="../images/loaded_in_frontend.png" height="10" width="10" /></td>
						</tr>
						</table>
				</div>
					<li><a href="#class:script_unit">Script Unit</a><img alt="Loaded in Battle" style="float:right; margin-right:1em;" src="../images/loaded_in_battle.png" height="10" width="10" /></li>
					<ul>
						<li>&emsp;&emsp;<a href="#section:script_unit:Creation">Creation</a></li>
							<li>&emsp;&emsp;&emsp;&emsp;<a href="#function:script_unit:new_by_reference">new_by_reference</a></li>
							<li>&emsp;&emsp;&emsp;&emsp;<a href="#function:script_unit:new">new</a></li>
						<li>&emsp;&emsp;<a href="#section:script_unit:Unit and Unitcontroller Access">Unit and Unitcontroller Access</a></li>
							<li>&emsp;&emsp;&emsp;&emsp;<a href="#function:script_unit:army">army</a></li>
							<li>&emsp;&emsp;&emsp;&emsp;<a href="#function:script_unit:alliance">alliance</a></li>
						<li>&emsp;&emsp;<a href="#section:script_unit:Start Location">Start Location</a></li>
							<li>&emsp;&emsp;&emsp;&emsp;<a href="#function:script_unit:goto_start_location">goto_start_location</a></li>
							<li>&emsp;&emsp;&emsp;&emsp;<a href="#function:script_unit:teleport_to_start_location">teleport_to_start_location</a></li>
							<li>&emsp;&emsp;&emsp;&emsp;<a href="#function:script_unit:teleport_to_start_location_offset">teleport_to_start_location_offset</a></li>
							<li>&emsp;&emsp;&emsp;&emsp;<a href="#function:script_unit:goto_start_location_offset">goto_start_location_offset</a></li>
							<li>&emsp;&emsp;&emsp;&emsp;<a href="#function:script_unit:respawn_in_start_location">respawn_in_start_location</a></li>
						<li>&emsp;&emsp;<a href="#section:script_unit:Current Location">Current Location</a></li>
							<li>&emsp;&emsp;&emsp;&emsp;<a href="#function:script_unit:position_offset">position_offset</a></li>
							<li>&emsp;&emsp;&emsp;&emsp;<a href="#function:script_unit:goto_location_offset">goto_location_offset</a></li>
							<li>&emsp;&emsp;&emsp;&emsp;<a href="#function:script_unit:teleport_to_location_offset">teleport_to_location_offset</a></li>
							<li>&emsp;&emsp;&emsp;&emsp;<a href="#function:script_unit:goto_location_offset_when_deployed">goto_location_offset_when_deployed</a></li>
							<li>&emsp;&emsp;&emsp;&emsp;<a href="#function:script_unit:stop_goto_location_offset_when_deployed">stop_goto_location_offset_when_deployed</a></li>
							<li>&emsp;&emsp;&emsp;&emsp;<a href="#function:script_unit:turn_to_face">turn_to_face</a></li>
							<li>&emsp;&emsp;&emsp;&emsp;<a href="#function:script_unit:teleport_to_location">teleport_to_location</a></li>
						<li>&emsp;&emsp;<a href="#section:script_unit:Location Caching">Location Caching</a></li>
							<li>&emsp;&emsp;&emsp;&emsp;<a href="#function:script_unit:cache_location">cache_location</a></li>
							<li>&emsp;&emsp;&emsp;&emsp;<a href="#function:script_unit:get_cached_position">get_cached_position</a></li>
							<li>&emsp;&emsp;&emsp;&emsp;<a href="#function:script_unit:get_cached_bearing">get_cached_bearing</a></li>
							<li>&emsp;&emsp;&emsp;&emsp;<a href="#function:script_unit:get_cached_width">get_cached_width</a></li>
							<li>&emsp;&emsp;&emsp;&emsp;<a href="#function:script_unit:goto_cached_location">goto_cached_location</a></li>
							<li>&emsp;&emsp;&emsp;&emsp;<a href="#function:script_unit:teleport_to_cached_location">teleport_to_cached_location</a></li>
							<li>&emsp;&emsp;&emsp;&emsp;<a href="#function:script_unit:has_moved">has_moved</a></li>
							<li>&emsp;&emsp;&emsp;&emsp;<a href="#function:script_unit:cache_destination">cache_destination</a></li>
							<li>&emsp;&emsp;&emsp;&emsp;<a href="#function:script_unit:cache_destination_and_halt">cache_destination_and_halt</a></li>
							<li>&emsp;&emsp;&emsp;&emsp;<a href="#function:script_unit:get_cached_destination_position">get_cached_destination_position</a></li>
							<li>&emsp;&emsp;&emsp;&emsp;<a href="#function:script_unit:get_cached_destination_bearing">get_cached_destination_bearing</a></li>
							<li>&emsp;&emsp;&emsp;&emsp;<a href="#function:script_unit:get_cached_destination_width">get_cached_destination_width</a></li>
							<li>&emsp;&emsp;&emsp;&emsp;<a href="#function:script_unit:goto_cached_destination">goto_cached_destination</a></li>
						<li>&emsp;&emsp;<a href="#section:script_unit:Combat Status">Combat Status</a></li>
							<li>&emsp;&emsp;&emsp;&emsp;<a href="#function:script_unit:is_under_attack">is_under_attack</a></li>
							<li>&emsp;&emsp;&emsp;&emsp;<a href="#function:script_unit:is_in_melee">is_in_melee</a></li>
						<li>&emsp;&emsp;<a href="#section:script_unit:Orders">Orders</a></li>
							<li>&emsp;&emsp;&emsp;&emsp;<a href="#function:script_unit:halt">halt</a></li>
							<li>&emsp;&emsp;&emsp;&emsp;<a href="#function:script_unit:celebrate">celebrate</a></li>
							<li>&emsp;&emsp;&emsp;&emsp;<a href="#function:script_unit:taunt">taunt</a></li>
							<li>&emsp;&emsp;&emsp;&emsp;<a href="#function:script_unit:play_sound_charge">play_sound_charge</a></li>
							<li>&emsp;&emsp;&emsp;&emsp;<a href="#function:script_unit:play_sound_taunt">play_sound_taunt</a></li>
							<li>&emsp;&emsp;&emsp;&emsp;<a href="#function:script_unit:deploy_reinforcement">deploy_reinforcement</a></li>
							<li>&emsp;&emsp;&emsp;&emsp;<a href="#function:script_unit:change_behaviour_active">change_behaviour_active</a></li>
							<li>&emsp;&emsp;&emsp;&emsp;<a href="#function:script_unit:withdraw">withdraw</a></li>
							<li>&emsp;&emsp;&emsp;&emsp;<a href="#function:script_unit:set_melee_mode">set_melee_mode</a></li>
							<li>&emsp;&emsp;&emsp;&emsp;<a href="#function:script_unit:set_stat_attribute">set_stat_attribute</a></li>
						<li>&emsp;&emsp;<a href="#section:script_unit:Enabling and Visibility">Enabling and Visibility</a></li>
							<li>&emsp;&emsp;&emsp;&emsp;<a href="#function:script_unit:set_enabled">set_enabled</a></li>
							<li>&emsp;&emsp;&emsp;&emsp;<a href="#function:script_unit:set_always_visible">set_always_visible</a></li>
							<li>&emsp;&emsp;&emsp;&emsp;<a href="#function:script_unit:set_always_visible_no_hidden">set_always_visible_no_hidden</a></li>
							<li>&emsp;&emsp;&emsp;&emsp;<a href="#function:script_unit:set_always_visible_no_leave_battle">set_always_visible_no_leave_battle</a></li>
							<li>&emsp;&emsp;&emsp;&emsp;<a href="#function:script_unit:set_always_visible_no_hidden_no_leave_battle">set_always_visible_no_hidden_no_leave_battle</a></li>
							<li>&emsp;&emsp;&emsp;&emsp;<a href="#function:script_unit:mark_as_ally">mark_as_ally</a></li>
							<li>&emsp;&emsp;&emsp;&emsp;<a href="#function:script_unit:is_hidden">is_hidden</a></li>
							<li>&emsp;&emsp;&emsp;&emsp;<a href="#function:script_unit:set_invisible_to_all">set_invisible_to_all</a></li>
							<li>&emsp;&emsp;&emsp;&emsp;<a href="#function:script_unit:is_visible_to_enemy">is_visible_to_enemy</a></li>
						<li>&emsp;&emsp;<a href="#section:script_unit:Script Control">Script Control</a></li>
							<li>&emsp;&emsp;&emsp;&emsp;<a href="#function:script_unit:take_control">take_control</a></li>
							<li>&emsp;&emsp;&emsp;&emsp;<a href="#function:script_unit:release_control">release_control</a></li>
						<li>&emsp;&emsp;<a href="#section:script_unit:Ammo and Fatigue">Ammo and Fatigue</a></li>
							<li>&emsp;&emsp;&emsp;&emsp;<a href="#function:script_unit:modify_ammo">modify_ammo</a></li>
							<li>&emsp;&emsp;&emsp;&emsp;<a href="#function:script_unit:refill_ammo">refill_ammo</a></li>
							<li>&emsp;&emsp;&emsp;&emsp;<a href="#function:script_unit:grant_infinite_ammo">grant_infinite_ammo</a></li>
							<li>&emsp;&emsp;&emsp;&emsp;<a href="#function:script_unit:refresh">refresh</a></li>
							<li>&emsp;&emsp;&emsp;&emsp;<a href="#function:script_unit:cache_ammo">cache_ammo</a></li>
							<li>&emsp;&emsp;&emsp;&emsp;<a href="#function:script_unit:restore_cached_ammo">restore_cached_ammo</a></li>
						<li>&emsp;&emsp;<a href="#section:script_unit:Health and Invincibility">Health and Invincibility</a></li>
							<li>&emsp;&emsp;&emsp;&emsp;<a href="#function:script_unit:cache_health">cache_health</a></li>
							<li>&emsp;&emsp;&emsp;&emsp;<a href="#function:script_unit:has_taken_casualties">has_taken_casualties</a></li>
							<li>&emsp;&emsp;&emsp;&emsp;<a href="#function:script_unit:unary_hitpoints">unary_hitpoints</a></li>
							<li>&emsp;&emsp;&emsp;&emsp;<a href="#function:script_unit:max_casualties">max_casualties</a></li>
							<li>&emsp;&emsp;&emsp;&emsp;<a href="#function:script_unit:set_invincible">set_invincible</a></li>
							<li>&emsp;&emsp;&emsp;&emsp;<a href="#function:script_unit:set_invincible_for_time_proportion">set_invincible_for_time_proportion</a></li>
						<li>&emsp;&emsp;<a href="#section:script_unit:Morale and Invincibility">Morale and Invincibility</a></li>
							<li>&emsp;&emsp;&emsp;&emsp;<a href="#function:script_unit:fearless_until_casualties">fearless_until_casualties</a></li>
							<li>&emsp;&emsp;&emsp;&emsp;<a href="#function:script_unit:rout_on_casualties">rout_on_casualties</a></li>
							<li>&emsp;&emsp;&emsp;&emsp;<a href="#function:script_unit:invincible_if_standing">invincible_if_standing</a></li>
							<li>&emsp;&emsp;&emsp;&emsp;<a href="#function:script_unit:prevent_rallying_if_routing">prevent_rallying_if_routing</a></li>
							<li>&emsp;&emsp;&emsp;&emsp;<a href="#function:script_unit:stop_prevent_rallying_if_routing">stop_prevent_rallying_if_routing</a></li>
							<li>&emsp;&emsp;&emsp;&emsp;<a href="#function:script_unit:morale_behavior_fearless">morale_behavior_fearless</a></li>
							<li>&emsp;&emsp;&emsp;&emsp;<a href="#function:script_unit:morale_behavior_rout">morale_behavior_rout</a></li>
							<li>&emsp;&emsp;&emsp;&emsp;<a href="#function:script_unit:morale_behavior_default">morale_behavior_default</a></li>
							<li>&emsp;&emsp;&emsp;&emsp;<a href="#function:script_unit:morale_behavior_fearless_if_standing">morale_behavior_fearless_if_standing</a></li>
							<li>&emsp;&emsp;&emsp;&emsp;<a href="#function:script_unit:morale_behavior_default_if_standing">morale_behavior_default_if_standing</a></li>
							<li>&emsp;&emsp;&emsp;&emsp;<a href="#function:script_unit:hide_unbreakable_in_ui">hide_unbreakable_in_ui</a></li>
						<li>&emsp;&emsp;<a href="#section:script_unit:Killing">Killing</a></li>
							<li>&emsp;&emsp;&emsp;&emsp;<a href="#function:script_unit:kill">kill</a></li>
							<li>&emsp;&emsp;&emsp;&emsp;<a href="#function:script_unit:kill_proportion">kill_proportion</a></li>
							<li>&emsp;&emsp;&emsp;&emsp;<a href="#function:script_unit:kill_proportion_over_time">kill_proportion_over_time</a></li>
							<li>&emsp;&emsp;&emsp;&emsp;<a href="#function:script_unit:stop_kill_proportion_over_time">stop_kill_proportion_over_time</a></li>
						<li>&emsp;&emsp;<a href="#section:script_unit:Enemy Alliance">Enemy Alliance</a></li>
							<li>&emsp;&emsp;&emsp;&emsp;<a href="#function:script_unit:get_enemy_alliance_num">get_enemy_alliance_num</a></li>
							<li>&emsp;&emsp;&emsp;&emsp;<a href="#function:script_unit:get_enemy_alliance">get_enemy_alliance</a></li>
						<li>&emsp;&emsp;<a href="#section:script_unit:Highlight Unit Card">Highlight Unit Card</a></li>
							<li>&emsp;&emsp;&emsp;&emsp;<a href="#function:script_unit:highlight_unit_card">highlight_unit_card</a></li>
						<li>&emsp;&emsp;<a href="#section:script_unit:Ping Icons">Ping Icons</a></li>
							<li>&emsp;&emsp;&emsp;&emsp;<a href="#function:script_unit:add_ping_icon">add_ping_icon</a></li>
							<li>&emsp;&emsp;&emsp;&emsp;<a href="#function:script_unit:remove_ping_icon">remove_ping_icon</a></li>
						<li>&emsp;&emsp;<a href="#section:script_unit:Attack Closest Enemy">Attack Closest Enemy</a></li>
							<li>&emsp;&emsp;&emsp;&emsp;<a href="#function:script_unit:start_attack_closest_enemy">start_attack_closest_enemy</a></li>
							<li>&emsp;&emsp;&emsp;&emsp;<a href="#function:script_unit:stop_attack_closest_enemy">stop_attack_closest_enemy</a></li>
					</ul>
					<li><a href="#class:script_units">Scriptunits</a><img alt="Loaded in Battle" style="float:right; margin-right:1em;" src="../images/loaded_in_battle.png" height="10" width="10" /></li>
					<ul>
						<li>&emsp;&emsp;<a href="#section:script_units:Declaration">Declaration</a></li>
							<li>&emsp;&emsp;&emsp;&emsp;<a href="#function:script_units:new">new</a></li>
						<li>&emsp;&emsp;<a href="#section:script_units:Debug Mode">Debug Mode</a></li>
							<li>&emsp;&emsp;&emsp;&emsp;<a href="#function:script_units:set_debug">set_debug</a></li>
						<li>&emsp;&emsp;<a href="#section:script_units:Adding and Removing Scriptunits">Adding and Removing Scriptunits</a></li>
							<li>&emsp;&emsp;&emsp;&emsp;<a href="#function:script_units:add_sunits">add_sunits</a></li>
							<li>&emsp;&emsp;&emsp;&emsp;<a href="#function:script_units:merge">merge</a></li>
							<li>&emsp;&emsp;&emsp;&emsp;<a href="#function:script_units:remove_sunit">remove_sunit</a></li>
							<li>&emsp;&emsp;&emsp;&emsp;<a href="#function:script_units:remove_sunits">remove_sunits</a></li>
						<li>&emsp;&emsp;<a href="#section:script_units:Querying">Querying</a></li>
							<li>&emsp;&emsp;&emsp;&emsp;<a href="#function:script_units:get_sunit_by_name">get_sunit_by_name</a></li>
							<li>&emsp;&emsp;&emsp;&emsp;<a href="#function:script_units:get_sunit_for_unit">get_sunit_for_unit</a></li>
							<li>&emsp;&emsp;&emsp;&emsp;<a href="#function:script_units:get_sunit_by_type">get_sunit_by_type</a></li>
							<li>&emsp;&emsp;&emsp;&emsp;<a href="#function:script_units:count">count</a></li>
							<li>&emsp;&emsp;&emsp;&emsp;<a href="#function:script_units:item">item</a></li>
							<li>&emsp;&emsp;&emsp;&emsp;<a href="#function:script_units:contains">contains</a></li>
							<li>&emsp;&emsp;&emsp;&emsp;<a href="#function:script_units:get_sunit_table">get_sunit_table</a></li>
							<li>&emsp;&emsp;&emsp;&emsp;<a href="#function:script_units:get_unit_table">get_unit_table</a></li>
							<li>&emsp;&emsp;&emsp;&emsp;<a href="#function:script_units:filter">filter</a></li>
							<li>&emsp;&emsp;&emsp;&emsp;<a href="#function:script_units:sort">sort</a></li>
							<li>&emsp;&emsp;&emsp;&emsp;<a href="#function:script_units:out">out</a></li>
							<li>&emsp;&emsp;&emsp;&emsp;<a href="#function:script_units:duplicate">duplicate</a></li>
							<li>&emsp;&emsp;&emsp;&emsp;<a href="#function:script_units:get_unitcontroller">get_unitcontroller</a></li>
							<li>&emsp;&emsp;&emsp;&emsp;<a href="#function:script_units:num_generals">num_generals</a></li>
							<li>&emsp;&emsp;&emsp;&emsp;<a href="#function:script_units:get_general_sunit">get_general_sunit</a></li>
						<li>&emsp;&emsp;<a href="#section:script_units:Position Tests">Position Tests</a></li>
							<li>&emsp;&emsp;&emsp;&emsp;<a href="#function:script_units:centre_point">centre_point</a></li>
							<li>&emsp;&emsp;&emsp;&emsp;<a href="#function:script_units:radius">radius</a></li>
							<li>&emsp;&emsp;&emsp;&emsp;<a href="#function:script_units:width">width</a></li>
							<li>&emsp;&emsp;&emsp;&emsp;<a href="#function:script_units:average_bearing">average_bearing</a></li>
							<li>&emsp;&emsp;&emsp;&emsp;<a href="#function:script_units:get_northernmost">get_northernmost</a></li>
							<li>&emsp;&emsp;&emsp;&emsp;<a href="#function:script_units:get_southernmost">get_southernmost</a></li>
							<li>&emsp;&emsp;&emsp;&emsp;<a href="#function:script_units:get_westernmost">get_westernmost</a></li>
							<li>&emsp;&emsp;&emsp;&emsp;<a href="#function:script_units:get_easternmost">get_easternmost</a></li>
							<li>&emsp;&emsp;&emsp;&emsp;<a href="#function:script_units:get_closest">get_closest</a></li>
							<li>&emsp;&emsp;&emsp;&emsp;<a href="#function:script_units:get_furthest">get_furthest</a></li>
							<li>&emsp;&emsp;&emsp;&emsp;<a href="#function:script_units:get_centremost">get_centremost</a></li>
							<li>&emsp;&emsp;&emsp;&emsp;<a href="#function:script_units:get_outlying">get_outlying</a></li>
						<li>&emsp;&emsp;<a href="#section:script_units:Morale">Morale</a></li>
							<li>&emsp;&emsp;&emsp;&emsp;<a href="#function:script_units:are_any_routing_or_dead">are_any_routing_or_dead</a></li>
							<li>&emsp;&emsp;&emsp;&emsp;<a href="#function:script_units:are_all_routing_or_dead">are_all_routing_or_dead</a></li>
							<li>&emsp;&emsp;&emsp;&emsp;<a href="#function:script_units:rout_over_time">rout_over_time</a></li>
						<li>&emsp;&emsp;<a href="#section:script_units:Deployment">Deployment</a></li>
							<li>&emsp;&emsp;&emsp;&emsp;<a href="#function:script_units:have_any_deployed">have_any_deployed</a></li>
							<li>&emsp;&emsp;&emsp;&emsp;<a href="#function:script_units:have_all_deployed">have_all_deployed</a></li>
							<li>&emsp;&emsp;&emsp;&emsp;<a href="#function:script_units:num_deployed">num_deployed</a></li>
							<li>&emsp;&emsp;&emsp;&emsp;<a href="#function:script_units:are_any_active_on_battlefield">are_any_active_on_battlefield</a></li>
						<li>&emsp;&emsp;<a href="#section:script_units:Movement and Combat Tests">Movement and Combat Tests</a></li>
							<li>&emsp;&emsp;&emsp;&emsp;<a href="#function:script_units:have_any_moved">have_any_moved</a></li>
							<li>&emsp;&emsp;&emsp;&emsp;<a href="#function:script_units:num_moved">num_moved</a></li>
							<li>&emsp;&emsp;&emsp;&emsp;<a href="#function:script_units:have_all_moved">have_all_moved</a></li>
							<li>&emsp;&emsp;&emsp;&emsp;<a href="#function:script_units:are_any_running">are_any_running</a></li>
							<li>&emsp;&emsp;&emsp;&emsp;<a href="#function:script_units:are_all_running">are_all_running</a></li>
							<li>&emsp;&emsp;&emsp;&emsp;<a href="#function:script_units:is_under_attack">is_under_attack</a></li>
							<li>&emsp;&emsp;&emsp;&emsp;<a href="#function:script_units:is_in_melee">is_in_melee</a></li>
							<li>&emsp;&emsp;&emsp;&emsp;<a href="#function:script_units:unary_hitpoints">unary_hitpoints</a></li>
							<li>&emsp;&emsp;&emsp;&emsp;<a href="#function:script_units:number_of_enemies_killed">number_of_enemies_killed</a></li>
						<li>&emsp;&emsp;<a href="#section:script_units:Movement and Teleportation">Movement and Teleportation</a></li>
							<li>&emsp;&emsp;&emsp;&emsp;<a href="#function:script_units:disordered_teleport">disordered_teleport</a></li>
						<li>&emsp;&emsp;<a href="#section:script_units:Respawning">Respawning</a></li>
							<li>&emsp;&emsp;&emsp;&emsp;<a href="#function:script_units:respawn_in_start_location">respawn_in_start_location</a></li>
						<li>&emsp;&emsp;<a href="#section:script_units:Changing formation">Changing formation</a></li>
							<li>&emsp;&emsp;&emsp;&emsp;<a href="#function:script_units:change_formation">change_formation</a></li>
						<li>&emsp;&emsp;<a href="#section:script_units:Visibility">Visibility</a></li>
							<li>&emsp;&emsp;&emsp;&emsp;<a href="#function:script_units:is_hidden">is_hidden</a></li>
							<li>&emsp;&emsp;&emsp;&emsp;<a href="#function:script_units:is_visible_to_enemy">is_visible_to_enemy</a></li>
						<li>&emsp;&emsp;<a href="#section:script_units:Reinforcement Behaviour">Reinforcement Behaviour</a></li>
							<li>&emsp;&emsp;&emsp;&emsp;<a href="#function:script_units:deploy_at_random_intervals">deploy_at_random_intervals</a></li>
							<li>&emsp;&emsp;&emsp;&emsp;<a href="#function:script_units:cancel_deploy_at_random_intervals">cancel_deploy_at_random_intervals</a></li>
						<li>&emsp;&emsp;<a href="#section:script_units:Kill Aura">Kill Aura</a></li>
							<li>&emsp;&emsp;&emsp;&emsp;<a href="#function:script_units:start_kill_aura">start_kill_aura</a></li>
							<li>&emsp;&emsp;&emsp;&emsp;<a href="#function:script_units:stop_kill_aura">stop_kill_aura</a></li>
						<li>&emsp;&emsp;<a href="#section:script_units:Attack Enemy Scriptunits">Attack Enemy Scriptunits</a></li>
							<li>&emsp;&emsp;&emsp;&emsp;<a href="#function:script_units:attack_enemy_scriptunits">attack_enemy_scriptunits</a></li>
							<li>&emsp;&emsp;&emsp;&emsp;<a href="#function:script_units:stop_attack_enemy_scriptunits">stop_attack_enemy_scriptunits</a></li>
						<li>&emsp;&emsp;<a href="#section:script_units:Highlighting Unit Cards">Highlighting Unit Cards</a></li>
							<li>&emsp;&emsp;&emsp;&emsp;<a href="#function:script_units:highlight_unit_cards">highlight_unit_cards</a></li>
						<li>&emsp;&emsp;<a href="#section:script_units:Serialised Army State">Serialised Army State</a></li>
							<li>&emsp;&emsp;&emsp;&emsp;<a href="#function:script_units:serialise_state">serialise_state</a></li>
							<li>&emsp;&emsp;&emsp;&emsp;<a href="#function:script_units:save_state_to_svr">save_state_to_svr</a></li>
							<li>&emsp;&emsp;&emsp;&emsp;<a href="#function:script_units:load_state_from_svr">load_state_from_svr</a></li>
					</ul>

				</ul>
			</div>

			<div style="background-color:#e2edff" id="navigation_right">				<h2 style="background-color:#c1e6ff">Battle Topics</h2>
				<ul>
					<li><a href="battle_index.html">Battle Index</a></li>
					<li><a href="battle_hierarchy.html">Battle Hierarchy</a></li>
					<li><a href="lua.html">Lua Language</a></li>
					<li><a href="scripted_events.html">Scripted Events</a></li>

				</ul>

				<h2 style="background-color:#c1e6ff">Game Code Interfaces</h2>
				<ul>
					<li><a href="battle.html">Battle</a></li>
					<li><a href="battle_alliances.html">Alliances</a></li>
					<li><a href="battle_alliance.html">Alliance</a></li>
					<li><a href="battle_armies.html">Armies</a></li>
					<li><a href="battle_army.html">Army</a></li>
					<li><a href="battle_units.html">Units</a></li>
					<li><a href="battle_unit.html">Unit</a></li>
					<li><a href="battle_unitcontroller.html">Unitcontroller</a></li>
					<li><a href="ai_planner.html">AI Planners</a></li>
					<li><a href="battle_assault_equipment.html">Assault Equipment</a></li>
					<li><a href="battle_building.html">Building</a></li>
					<li><a href="battle_buildings.html">Buildings</a></li>
					<li><a href="battle_camera.html">Camera</a></li>
					<li><a href="battle_capture_location.html">Capture Location</a></li>
					<li><a href="battle_composite_scenes_system.html">Composite Scenes System</a></li>
					<li><a href="battle_debug_drawing.html">Debug Drawing</a></li>
					<li><a href="battle_reinforcements.html">reinforcements Reinforcements</a></li>
					<li><a href="battle_sound_effect.html">Sound Effects</a></li>
					<li><a href="battle_subtitles.html">Subtitles</a></li>
					<li><a href="battle_toggle_system.html">Toggle System</a></li>
					<li><a href="battle_vector.html">Vector</a></li>
					<li><a href="common.html">Common</a></li>
					<li><a href="scriptedvalueregistry.html">ScriptedValueRegistry</a></li>
					<li><a href="uicomponent.html">UIComponents</a></li>

				</ul>

				<h2 style="background-color:#c1e6ff">Script Interfaces</h2>
				<ul>
					<li><a href="battle_manager.html">Battle Manager</a></li>
					<li><a href="core.html">Core</a></li>
					<li><a href="advice_manager.html">Advice Manager</a></li>
					<li><a href="battle_ui_manager.html">Battle UI Manager</a></li>
					<li><a href="convex_area.html">Convex Areas</a></li>
					<li><a href="cutscene.html">Battle Cutscenes</a></li>
					<li><a href="generated_battle.html">Generated Battle</a></li>
					<li><a href="global.html">Global</a></li>
					<li><a href="infotext_manager.html">Infotext Manager</a></li>
					<li><a href="movie_overlay.html">Movie Overlays</a></li>
					<li><a href="navigable_tour.html">Navigable Tours</a></li>
					<li><a href="objectives_manager.html">Objectives Manager</a></li>
					<li><a href="script_ai_planner.html">Script AI Planner</a></li>
					<li><a href="script_messager.html">Script Messager</a></li>
					<li><strong> > Script Unit</strong></li>
					<li><a href="scripted_tour.html">Scripted Tours</a></li>
					<li><a href="text_pointer.html">Text Pointers</a></li>
					<li><a href="timer_manager.html">Timer Manager</a></li>
					<li><a href="topic_leader.html">Topic Leader</a></li>
					<li><a href="validate.html">Validate</a></li>

				</ul>

				<h2 style="background-color:#c1e6ff">Data Interfaces</h2>
				<ul>
					<li><a href="st_helper.html">Scripted Tour Helpers</a></li>

				</ul>

				</ul>
			</div>

			<div id="content">
				<a name="class:script_unit"><h1 class="content_header">Script Unit</h1></a>
				<p>A scriptunit is a script object type which represents a single unit on the battlefield. Its primary function is to package a <code><a href="battle_unit.html#class:battle_unit">battle_unit</a></code> interface that represents the unit together with a <code><a href="battle_unitcontroller.html#class:battle_unitcontroller">battle_unitcontroller</a></code> that has control over that unit. By packaging these two interfaces together, a scriptunit provides access through one object to commands that test the state of a unit (the <code><a href="battle_unit.html#class:battle_unit">battle_unit</a></code> interface) as well as commands which issue orders to that unit (the <code><a href="battle_unitcontroller.html#class:battle_unitcontroller">battle_unitcontroller</a></code> interface). Scriptunit objects may be passed around in script with the receiving code being sure that it has access to both read and modify the state of the subject unit.</p>
				<p>The scriptunit interface provides direct access to the <code><a href="battle_unit.html#class:battle_unit">battle_unit</a></code> and <code><a href="battle_unitcontroller.html#class:battle_unitcontroller">battle_unitcontroller</a></code> interfaces related to the unit at the unit (<sunit_obj>.unit) and uc (<sunit_obj>.uc) elements respectively. The scriptunit interface also provides additional functionality related to the querying and control of units. See the list of functions on this page for more information.</p>
				<p>Scriptunit objects may be grouped together in a specialised container, the <code><a href="#class:script_units">script_units</a></code> object. This provides yet further functionality that can be offered when a collection of script units are assembled together. See the <code><a href="#class:script_units">script_units</a></code> documentation further down this page for more information.</p>
							<table class="loaded_in" style="margin-top: 1em;">
								<tr>
									<td>
										Loaded in Campaign
									</td>
									<td>
										<img alt="Loaded in Campaign" style="float:right;" src="../images/loaded_in_campaign.png" height="18" width="18" />
									</td>
								</tr>
								<tr>
									<td>
										Loaded in Battle
									</td>
									<td>
										<img alt="Loaded in Battle" style="float:right;" src="../images/loaded_in_battle.png" height="18" width="18" />
									</td>
								</tr>
								<tr>
									<td>
										Loaded in Frontend
									</td>
									<td>
										<img alt="Loaded in Frontend" style="float:right;" src="../images/loaded_in_frontend.png" height="18" width="18" />
									</td>
								</tr>
							</table>

				<div>
					<a style="float:right;" href="#top">Back to top</a>
					<a name="section:script_unit:Creation"><h2 class="section_header">Creation</h2></a>
				</div>
				<p>On creation, the <code><a href="battle_manager.html#class:battle_manager">battle_manager</a></code> automatically sets up a <code>script unit</code> object for each unit and a <code><a href="#class:script_units">script_units</a></code> collection object for each army in the battle. These can be retrieved from the <code><a href="battle_manager.html#class:battle_manager">battle_manager</a></code> with the functions listed in the <code><a href="battle_manager.html#section:battle_manager:Scriptunits">Scriptunits</a></code> section of this documentation.</p>
				<p>New script unit objects may nevertheless be created using <code><a href="#function:script_unit:new">script_unit:new</a></code> or <code><a href="#function:script_unit:new_by_reference">script_unit:new_by_reference</a></code>.</p>
				<div class="section_body">
					<dl class="function">
						<dt>
							<a name="function:script_unit:new_by_reference"><h3 class="function_name"><strong><code>script_unit:new_by_reference(<code><a href="battle_army.html#class:battle_army">battle_army</a></code> </strong></code><i class="parameter">army</i><code><strong>, value </strong></code><i class="parameter">reference</i><code><strong>)</code></strong></h3></a>
						</dt>
						<dd>
							Creates a new script unit. The unit object to encapsulate is looked up by the supplied army and reference name.

							<h4>Parameters:</h4>
							<table class="parameter_list">
								<colgroup>
									<col style="width: 3%;">
									<col style="width: 12%;">
									<col style="width: 85%;">
								</colgroup>
								<tr>
									<td>
										<p><strong>1</strong></p>
									</td>
									<td>
										<p><code><code><a href="battle_army.html#class:battle_army">battle_army</a></code></code></p>
									</td>
									<td>
										<p>Army the target unit is a member of.</p>
									</td>
								</tr>
								<tr>
									<td>
										<p><strong>2</strong></p>
									</td>
									<td>
										<p><code>value</code></p>
									</td>
									<td>
										<p>Reference for the unit. This can either be a <code><a href="lua.html#class:string">string</a></code> name, or an integer number representing the unit's index within the army ('1' is generally the general, for example). If a <code><a href="lua.html#class:string">string</a></code> name is supplied this must match the script name given to the unit in the battle setup - this is generally set in either the battle xml or in the relevant entry in the <code>battle_set_piece_armies_units_junctions</code> database table.</p>
									</td>
								</tr>
							</table>

							<h4>Returns:</h4>
							<ol>
								<li><code>script_unit</code> </li>
							</ol>
							<p class="file_comment">defined in ../../Warhammer/working_data/script/_lib/lib_battle_script_unit.lua, line 63</p>
						</dd>
					</dl>
					<dl class="function">
						<dt>
							<a name="function:script_unit:new"><h3 class="function_name"><strong><code>script_unit:new(<code><a href="battle_unit.html#class:battle_unit">battle_unit</a></code> </strong></code><i class="parameter">unit</i><code><strong>, [<code><a href="lua.html#class:string">string</a></code> </strong></code><i class="parameter">name</i><code><strong>])</code></strong></h3></a>
						</dt>
						<dd>
							Creates a new script unit from a supplied <code><a href="battle_unit.html#class:battle_unit">battle_unit</a></code>. An optional reference name may be passed which is used for debug output.

							<h4>Parameters:</h4>
							<table class="parameter_list">
								<colgroup>
									<col style="width: 3%;">
									<col style="width: 12%;">
									<col style="width: 85%;">
								</colgroup>
								<tr>
									<td>
										<p><strong>1</strong></p>
									</td>
									<td>
										<p><code><code><a href="battle_unit.html#class:battle_unit">battle_unit</a></code></code></p>
									</td>
									<td>
										<p>Unit object to be contained.</p>
									</td>
								</tr>
								<tr>
									<td>
										<p><strong>2</strong></p>
									</td>
									<td>
										<p><code><code><a href="lua.html#class:string">string</a></code></code></p>
									</td>
									<td>
										<p><i>optional, default value=nil</i></p>
										<p>Reference name for the unit.</p>
									</td>
								</tr>
							</table>

							<h4>Returns:</h4>
							<ol>
								<li><code>script_unit</code> </li>
							</ol>
							<p class="file_comment">defined in ../../Warhammer/working_data/script/_lib/lib_battle_script_unit.lua, line 130</p>
						</dd>
					</dl>
				</div>


				<div>
					<a style="float:right;" href="#top">Back to top</a>
					<a name="section:script_unit:Unit and Unitcontroller Access"><h2 class="section_header">Unit and Unitcontroller Access</h2></a>
				</div>
				<div class="section_body">

					<h3 class "variable_list">Variables in this section:</h3>
					<p>These variables may be accessed via <code>&lt;interface&gt;.&lt;variable_name&gt;</code>:</p>
					<table class="variable_list">
						<tr>
							<td class="variable_name">
								<a name="variable:script_unit:unit"><strong>unit</strong></a>
							</td>
							<td class="variable_type">
								<code><a href="battle_unit.html#class:battle_unit">battle_unit</a></code>
							</td>
							<td class="description">
								object representing the subject unit.
							</td>
						</tr>
						<tr>
							<td class="variable_name">
								<a name="variable:script_unit:uc"><strong>uc</strong></a>
							</td>
							<td class="variable_type">
								<code><a href="battle_unitcontroller.html#class:battle_unitcontroller">battle_unitcontroller</a></code>
							</td>
							<td class="description">
								unitcontroller object that controls the unit.
							</td>
						</tr>
						<tr>
							<td class="variable_name">
								<a name="variable:script_unit:army_index"><strong>army_index</strong></a>
							</td>
							<td class="variable_type">
								<code><a href="lua.html#class:number">number</a></code>
							</td>
							<td class="description">
								index of army that the unit belongs to.
							</td>
						</tr>
						<tr>
							<td class="variable_name">
								<a name="variable:script_unit:alliance_index"><strong>alliance_index</strong></a>
							</td>
							<td class="variable_type">
								<code><a href="lua.html#class:number">number</a></code>
							</td>
							<td class="description">
								index of alliance that the unit belongs to.
							</td>
						</tr>
					</table>
					<h3 class "variable_list">Functions in this section:</h3>
					<dl class="function">
						<dt>
							<a name="function:script_unit:army"><h3 class="function_name"><strong><code>script_unit:army()</code></strong></h3></a>
						</dt>
						<dd>
							Returns the army object to which the unit contained by this scriptunit currently belongs.


							<h4>Returns:</h4>
							<ol>
								<li><code><code><a href="battle_army.html#class:battle_army">battle_army</a></code></code> army</li>
							</ol>
							<p class="file_comment">defined in ../../Warhammer/working_data/script/_lib/lib_battle_script_unit.lua, line 233</p>
						</dd>
					</dl>
					<dl class="function">
						<dt>
							<a name="function:script_unit:alliance"><h3 class="function_name"><strong><code>script_unit:alliance()</code></strong></h3></a>
						</dt>
						<dd>
							Returns the alliance object to which the unit contained by this scriptunit belongs.


							<h4>Returns:</h4>
							<ol>
								<li><code><code><a href="battle_alliance.html#class:battle_alliance">battle_alliance</a></code></code> alliance</li>
							</ol>
							<p class="file_comment">defined in ../../Warhammer/working_data/script/_lib/lib_battle_script_unit.lua, line 241</p>
						</dd>
					</dl>
				</div>


				<div>
					<a style="float:right;" href="#top">Back to top</a>
					<a name="section:script_unit:Start Location"><h2 class="section_header">Start Location</h2></a>
				</div>
				<div class="section_body">

					<h3 class "variable_list">Variables in this section:</h3>
					<p>These variables may be accessed via <code>&lt;interface&gt;.&lt;variable_name&gt;</code>:</p>
					<table class="variable_list">
						<tr>
							<td class="variable_name">
								<a name="variable:script_unit:start_position"><strong>start_position</strong></a>
							</td>
							<td class="variable_type">
								<code><a href="battle_vector.html#class:battle_vector">battle_vector</a></code>
							</td>
							<td class="description">
								Vector position the unit started the battle at.
							</td>
						</tr>
						<tr>
							<td class="variable_name">
								<a name="variable:script_unit:start_bearing"><strong>start_bearing</strong></a>
							</td>
							<td class="variable_type">
								<code><a href="lua.html#class:number">number</a></code>
							</td>
							<td class="description">
								Bearing in degrees the unit started the battle at.
							</td>
						</tr>
						<tr>
							<td class="variable_name">
								<a name="variable:script_unit:start_width"><strong>start_width</strong></a>
							</td>
							<td class="variable_type">
								<code><a href="lua.html#class:number">number</a></code>
							</td>
							<td class="description">
								Width in m of the unit at the start of the battle.
							</td>
						</tr>
					</table>
					<h3 class "variable_list">Functions in this section:</h3>
					<dl class="function">
						<dt>
							<a name="function:script_unit:goto_start_location"><h3 class="function_name"><strong><code>script_unit:goto_start_location([boolean </strong></code><i class="parameter">should run</i><code><strong>])</code></strong></h3></a>
						</dt>
						<dd>
							Instructs the scriptunit to move to its start location.

							<h4>Parameters:</h4>
							<table class="parameter_list">
								<colgroup>
									<col style="width: 3%;">
									<col style="width: 12%;">
									<col style="width: 85%;">
								</colgroup>
								<tr>
									<td>
										<p><strong>1</strong></p>
									</td>
									<td>
										<p><code>boolean</code></p>
									</td>
									<td>
										<p><i>optional, default value=false</i></p>
										<p>should run</p>
									</td>
								</tr>
							</table>

							<h4>Returns:</h4>
							<ol>
								<li><code>nil</code></li>
							</ol>
							<p class="file_comment">defined in ../../Warhammer/working_data/script/_lib/lib_battle_script_unit.lua, line 267</p>
						</dd>
					</dl>
					<dl class="function">
						<dt>
							<a name="function:script_unit:teleport_to_start_location"><h3 class="function_name"><strong><code>script_unit:teleport_to_start_location()</code></strong></h3></a>
						</dt>
						<dd>
							Teleports the scriptunit to the position/bearing/width it started the battle at.


							<h4>Returns:</h4>
							<ol>
								<li><code>nil</code></li>
							</ol>
							<p class="file_comment">defined in ../../Warhammer/working_data/script/_lib/lib_battle_script_unit.lua, line 275</p>
						</dd>
					</dl>
					<dl class="function">
						<dt>
							<a name="function:script_unit:teleport_to_start_location_offset"><h3 class="function_name"><strong><code>script_unit:teleport_to_start_location_offset(<br />&emsp;&emsp;number </strong></code><i class="parameter">x offset</i><code><strong>, <br />&emsp;&emsp;number </strong></code><i class="parameter">z offset</i><code><strong>, <br />&emsp;&emsp;[number </strong></code><i class="parameter">bearing override</i><code><strong>], <br />&emsp;&emsp;[boolean </strong></code><i class="parameter">release control</i><code><strong>]<br />)</code></strong></h3></a>
						</dt>
						<dd>
							Teleports the scriptunit to an offset from the position/bearing/width it started the battle at. This offset will be calculated from the scriptunit's start bearing, so an offset of [0, -10] will teleport it 10m behind its starting position. The function also optionally takes an override bearing to alter the position calculation, as well as a flag to release the unit to script control afterwards.

							<h4>Parameters:</h4>
							<table class="parameter_list">
								<colgroup>
									<col style="width: 3%;">
									<col style="width: 12%;">
									<col style="width: 85%;">
								</colgroup>
								<tr>
									<td>
										<p><strong>1</strong></p>
									</td>
									<td>
										<p><code>number</code></p>
									</td>
									<td>
										<p>x offset in m</p>
									</td>
								</tr>
								<tr>
									<td>
										<p><strong>2</strong></p>
									</td>
									<td>
										<p><code>number</code></p>
									</td>
									<td>
										<p>z offset in m</p>
									</td>
								</tr>
								<tr>
									<td>
										<p><strong>3</strong></p>
									</td>
									<td>
										<p><code>number</code></p>
									</td>
									<td>
										<p><i>optional, default value=nil</i></p>
										<p>Bearing override in degrees. Supply a value here to override the bearing used to make the offset calculation.</p>
									</td>
								</tr>
								<tr>
									<td>
										<p><strong>4</strong></p>
									</td>
									<td>
										<p><code>boolean</code></p>
									</td>
									<td>
										<p><i>optional, default value=false</i></p>
										<p>Release control after teleporting. Set this to true if you want the player (or AI, if it's not player-controlled) to be able to control this unit immediately after teleporting.</p>
									</td>
								</tr>
							</table>

							<h4>Returns:</h4>
							<ol>
								<li><code>nil</code></li>
							</ol>
							<p class="file_comment">defined in ../../Warhammer/working_data/script/_lib/lib_battle_script_unit.lua, line 282</p>
						</dd>
					</dl>
					<dl class="function">
						<dt>
							<a name="function:script_unit:goto_start_location_offset"><h3 class="function_name"><strong><code>script_unit:goto_start_location_offset(<br />&emsp;&emsp;number </strong></code><i class="parameter">x offset</i><code><strong>, <br />&emsp;&emsp;number </strong></code><i class="parameter">z offset</i><code><strong>, <br />&emsp;&emsp;[boolean </strong></code><i class="parameter">should run</i><code><strong>], <br />&emsp;&emsp;[number </strong></code><i class="parameter">bearing override</i><code><strong>], <br />&emsp;&emsp;[boolean </strong></code><i class="parameter">release control</i><code><strong>]<br />)</code></strong></h3></a>
						</dt>
						<dd>
							Instructs the scriptunit to move to an offset from the position/bearing/width it started the battle at. This offset will be calculated from the scriptunit's start bearing, so an offset of [0, -10] will send it 10m behind its starting position. The function also optionally takes a flag to instruct the unit to run, an override bearing to alter the position calculation, as well as a flag to release the unit to script control afterwards.

							<h4>Parameters:</h4>
							<table class="parameter_list">
								<colgroup>
									<col style="width: 3%;">
									<col style="width: 12%;">
									<col style="width: 85%;">
								</colgroup>
								<tr>
									<td>
										<p><strong>1</strong></p>
									</td>
									<td>
										<p><code>number</code></p>
									</td>
									<td>
										<p>x offset in m</p>
									</td>
								</tr>
								<tr>
									<td>
										<p><strong>2</strong></p>
									</td>
									<td>
										<p><code>number</code></p>
									</td>
									<td>
										<p>z offset in m</p>
									</td>
								</tr>
								<tr>
									<td>
										<p><strong>3</strong></p>
									</td>
									<td>
										<p><code>boolean</code></p>
									</td>
									<td>
										<p><i>optional, default value=false</i></p>
										<p>Set to true to instruct the unit to move quickly to its destination.</p>
									</td>
								</tr>
								<tr>
									<td>
										<p><strong>4</strong></p>
									</td>
									<td>
										<p><code>number</code></p>
									</td>
									<td>
										<p><i>optional, default value=nil</i></p>
										<p>Bearing override in degrees. Supply a value here to override the bearing used to make the offset calculation.</p>
									</td>
								</tr>
								<tr>
									<td>
										<p><strong>5</strong></p>
									</td>
									<td>
										<p><code>boolean</code></p>
									</td>
									<td>
										<p><i>optional, default value=false</i></p>
										<p>Release control after the movement order is issued. Set this to true if you want the player (or AI, if it's not player-controlled) to be able to control this unit immediately after moving.</p>
									</td>
								</tr>
							</table>

							<h4>Returns:</h4>
							<ol>
								<li><code>nil</code></li>
							</ol>
							<p class="file_comment">defined in ../../Warhammer/working_data/script/_lib/lib_battle_script_unit.lua, line 314</p>
						</dd>
					</dl>
					<dl class="function">
						<dt>
							<a name="function:script_unit:respawn_in_start_location"><h3 class="function_name"><strong><code>script_unit:respawn_in_start_location([<code><a href="lua.html#class:boolean">boolean</a></code> </strong></code><i class="parameter">only if dead</i><code><strong>])</code></strong></h3></a>
						</dt>
						<dd>
							Respawns the unit at the location it started the battle. This resets its health, fatigue, casualties and other stats.

							<h4>Parameters:</h4>
							<table class="parameter_list">
								<colgroup>
									<col style="width: 3%;">
									<col style="width: 12%;">
									<col style="width: 85%;">
								</colgroup>
								<tr>
									<td>
										<p><strong>1</strong></p>
									</td>
									<td>
										<p><code><code><a href="lua.html#class:boolean">boolean</a></code></code></p>
									</td>
									<td>
										<p><i>optional, default value=false</i></p>
										<p>Respawn the unit only if it is dead, or if it has routed off the battlefield.</p>
									</td>
								</tr>
							</table>

							<h4>Returns:</h4>
							<ol>
								<li><code><code><a href="lua.html#class:boolean">boolean</a></code></code> unit was respawned</li>
							</ol>
							<p class="file_comment">defined in ../../Warhammer/working_data/script/_lib/lib_battle_script_unit.lua, line 347</p>
						</dd>
					</dl>
				</div>


				<div>
					<a style="float:right;" href="#top">Back to top</a>
					<a name="section:script_unit:Current Location"><h2 class="section_header">Current Location</h2></a>
				</div>
				<div class="section_body">
					<dl class="function">
						<dt>
							<a name="function:script_unit:position_offset"><h3 class="function_name"><strong><code>script_unit:position_offset(number </strong></code><i class="parameter">x offset</i><code><strong>, number </strong></code><i class="parameter">y offset</i><code><strong>, number </strong></code><i class="parameter">z offset</i><code><strong>, [number </strong></code><i class="parameter">bearing override</i><code><strong>])</code></strong></h3></a>
						</dt>
						<dd>
							Returns the position of the scriptunit, offset from its current position. This offset will be calculated from the scriptunit's current bearing, so an offset of [0, 0, -10] will report a position 10m behind its current position. An override bearing to alter the position calculation may optionally be supplied.

							<h4>Parameters:</h4>
							<table class="parameter_list">
								<colgroup>
									<col style="width: 3%;">
									<col style="width: 12%;">
									<col style="width: 85%;">
								</colgroup>
								<tr>
									<td>
										<p><strong>1</strong></p>
									</td>
									<td>
										<p><code>number</code></p>
									</td>
									<td>
										<p>x offset in m</p>
									</td>
								</tr>
								<tr>
									<td>
										<p><strong>2</strong></p>
									</td>
									<td>
										<p><code>number</code></p>
									</td>
									<td>
										<p>y offset (height) in m</p>
									</td>
								</tr>
								<tr>
									<td>
										<p><strong>3</strong></p>
									</td>
									<td>
										<p><code>number</code></p>
									</td>
									<td>
										<p>z offset in m</p>
									</td>
								</tr>
								<tr>
									<td>
										<p><strong>4</strong></p>
									</td>
									<td>
										<p><code>number</code></p>
									</td>
									<td>
										<p><i>optional, default value=nil</i></p>
										<p>Bearing override in degrees. Supply a value here to override the bearing used to make the offset calculation.</p>
									</td>
								</tr>
							</table>

							<h4>Returns:</h4>
							<ol>
								<li><code><code><a href="battle_vector.html#class:battle_vector">battle_vector</a></code></code> offset position</li>
							</ol>
							<p class="file_comment">defined in ../../Warhammer/working_data/script/_lib/lib_battle_script_unit.lua, line 379</p>
						</dd>
					</dl>
					<dl class="function">
						<dt>
							<a name="function:script_unit:goto_location_offset"><h3 class="function_name"><strong><code>script_unit:goto_location_offset(<br />&emsp;&emsp;number </strong></code><i class="parameter">x offset</i><code><strong>, <br />&emsp;&emsp;number </strong></code><i class="parameter">z offset</i><code><strong>, <br />&emsp;&emsp;[boolean </strong></code><i class="parameter">should run</i><code><strong>], <br />&emsp;&emsp;[number </strong></code><i class="parameter">bearing override</i><code><strong>], <br />&emsp;&emsp;[boolean </strong></code><i class="parameter">release control</i><code><strong>]<br />)</code></strong></h3></a>
						</dt>
						<dd>
							Instructs the scriptunit to move to an offset from its current position. This offset will be calculated from the scriptunit's current bearing, so an offset of [0, -10] will send it 10m behind its current position. The function also optionally takes a flag to instruct the unit to run, an override bearing to alter the position calculation, as well as a flag to release the unit to script control afterwards.

							<h4>Parameters:</h4>
							<table class="parameter_list">
								<colgroup>
									<col style="width: 3%;">
									<col style="width: 12%;">
									<col style="width: 85%;">
								</colgroup>
								<tr>
									<td>
										<p><strong>1</strong></p>
									</td>
									<td>
										<p><code>number</code></p>
									</td>
									<td>
										<p>x offset in m</p>
									</td>
								</tr>
								<tr>
									<td>
										<p><strong>2</strong></p>
									</td>
									<td>
										<p><code>number</code></p>
									</td>
									<td>
										<p>z offset in m</p>
									</td>
								</tr>
								<tr>
									<td>
										<p><strong>3</strong></p>
									</td>
									<td>
										<p><code>boolean</code></p>
									</td>
									<td>
										<p><i>optional, default value=false</i></p>
										<p>Set to true to instruct the unit to move quickly to its destination.</p>
									</td>
								</tr>
								<tr>
									<td>
										<p><strong>4</strong></p>
									</td>
									<td>
										<p><code>number</code></p>
									</td>
									<td>
										<p><i>optional, default value=nil</i></p>
										<p>Bearing override in degrees. Supply a value here to override the bearing used to make the offset calculation.</p>
									</td>
								</tr>
								<tr>
									<td>
										<p><strong>5</strong></p>
									</td>
									<td>
										<p><code>boolean</code></p>
									</td>
									<td>
										<p><i>optional, default value=false</i></p>
										<p>Release control after the movement order is issued. Set this to true if you want the player (or AI, if it's not player-controlled) to be able to control this unit immediately after moving.</p>
									</td>
								</tr>
							</table>

							<h4>Returns:</h4>
							<ol>
								<li><code>nil</code></li>
							</ol>
							<p class="file_comment">defined in ../../Warhammer/working_data/script/_lib/lib_battle_script_unit.lua, line 416</p>
						</dd>
					</dl>
					<dl class="function">
						<dt>
							<a name="function:script_unit:teleport_to_location_offset"><h3 class="function_name"><strong><code>script_unit:teleport_to_location_offset(<br />&emsp;&emsp;number </strong></code><i class="parameter">x offset</i><code><strong>, <br />&emsp;&emsp;number </strong></code><i class="parameter">z offset</i><code><strong>, <br />&emsp;&emsp;[number </strong></code><i class="parameter">bearing override</i><code><strong>], <br />&emsp;&emsp;[boolean </strong></code><i class="parameter">release control</i><code><strong>]<br />)</code></strong></h3></a>
						</dt>
						<dd>
							Instructs the scriptunit to teleport to an offset from its current position. This offset will be calculated from the scriptunit's current bearing, so an offset of [0, -10] will teleport it 10m behind its current position. The function also optionally takes an override bearing to alter the position calculation, as well as a flag to release the unit to script control afterwards.

							<h4>Parameters:</h4>
							<table class="parameter_list">
								<colgroup>
									<col style="width: 3%;">
									<col style="width: 12%;">
									<col style="width: 85%;">
								</colgroup>
								<tr>
									<td>
										<p><strong>1</strong></p>
									</td>
									<td>
										<p><code>number</code></p>
									</td>
									<td>
										<p>x offset in m</p>
									</td>
								</tr>
								<tr>
									<td>
										<p><strong>2</strong></p>
									</td>
									<td>
										<p><code>number</code></p>
									</td>
									<td>
										<p>z offset in m</p>
									</td>
								</tr>
								<tr>
									<td>
										<p><strong>3</strong></p>
									</td>
									<td>
										<p><code>number</code></p>
									</td>
									<td>
										<p><i>optional, default value=nil</i></p>
										<p>Bearing override in degrees. Supply a value here to override the bearing used to make the offset calculation.</p>
									</td>
								</tr>
								<tr>
									<td>
										<p><strong>4</strong></p>
									</td>
									<td>
										<p><code>boolean</code></p>
									</td>
									<td>
										<p><i>optional, default value=false</i></p>
										<p>Release control after the teleport order is issued. Set this to true if you want the player (or AI, if it's not player-controlled) to be able to control this unit immediately after teleporting.</p>
									</td>
								</tr>
							</table>

							<h4>Returns:</h4>
							<ol>
								<li><code>nil</code></li>
							</ol>
							<p class="file_comment">defined in ../../Warhammer/working_data/script/_lib/lib_battle_script_unit.lua, line 451</p>
						</dd>
					</dl>
					<dl class="function">
						<dt>
							<a name="function:script_unit:goto_location_offset_when_deployed"><h3 class="function_name"><strong><code>script_unit:goto_location_offset_when_deployed(<br />&emsp;&emsp;number </strong></code><i class="parameter">x offset</i><code><strong>, <br />&emsp;&emsp;number </strong></code><i class="parameter">z offset</i><code><strong>, <br />&emsp;&emsp;[boolean </strong></code><i class="parameter">should run</i><code><strong>], <br />&emsp;&emsp;[number </strong></code><i class="parameter">bearing override</i><code><strong>], <br />&emsp;&emsp;[boolean </strong></code><i class="parameter">release control</i><code><strong>]<br />)</code></strong></h3></a>
						</dt>
						<dd>
							Instructs the scriptunit to goto an offset from its location when it deploys. This offset will be calculated from the scriptunit's bearing at the time it finds itself on the battlefield, so an offset of [0, -5] will move it 50m forward. The function also optionally takes a flag instructing it to run, an override bearing to alter the position calculation, as well as a flag to release the unit to script control afterwards.

							<h4>Parameters:</h4>
							<table class="parameter_list">
								<colgroup>
									<col style="width: 3%;">
									<col style="width: 12%;">
									<col style="width: 85%;">
								</colgroup>
								<tr>
									<td>
										<p><strong>1</strong></p>
									</td>
									<td>
										<p><code>number</code></p>
									</td>
									<td>
										<p>x offset in m</p>
									</td>
								</tr>
								<tr>
									<td>
										<p><strong>2</strong></p>
									</td>
									<td>
										<p><code>number</code></p>
									</td>
									<td>
										<p>z offset in m</p>
									</td>
								</tr>
								<tr>
									<td>
										<p><strong>3</strong></p>
									</td>
									<td>
										<p><code>boolean</code></p>
									</td>
									<td>
										<p><i>optional, default value=false</i></p>
										<p>Set to true to instruct the unit to move quickly to its destination.</p>
									</td>
								</tr>
								<tr>
									<td>
										<p><strong>4</strong></p>
									</td>
									<td>
										<p><code>number</code></p>
									</td>
									<td>
										<p><i>optional, default value=nil</i></p>
										<p>Bearing override in degrees. Supply a value here to override the bearing used to make the offset calculation.</p>
									</td>
								</tr>
								<tr>
									<td>
										<p><strong>5</strong></p>
									</td>
									<td>
										<p><code>boolean</code></p>
									</td>
									<td>
										<p><i>optional, default value=false</i></p>
										<p>Release control after the movement order is issued. Set this to true if you want the player (or AI, if it's not player-controlled) to be able to control this unit immediately after moving.</p>
									</td>
								</tr>
							</table>

							<h4>Returns:</h4>
							<ol>
								<li><code>nil</code></li>
							</ol>
							<p class="file_comment">defined in ../../Warhammer/working_data/script/_lib/lib_battle_script_unit.lua, line 489</p>
						</dd>
					</dl>
					<dl class="function">
						<dt>
							<a name="function:script_unit:stop_goto_location_offset_when_deployed"><h3 class="function_name"><strong><code>script_unit:stop_goto_location_offset_when_deployed()</code></strong></h3></a>
						</dt>
						<dd>
							Stops a running <code><a href="#function:script_unit:goto_location_offset_when_deployed">script_unit:goto_location_offset_when_deployed</a></code> listener on the current unit. Call this after calling <code><a href="#function:script_unit:goto_location_offset_when_deployed">script_unit:goto_location_offset_when_deployed</a></code> to stop the listener for any reason.


							<h4>Returns:</h4>
							<ol>
								<li><code>nil</code></li>
							</ol>
							<p class="file_comment">defined in ../../Warhammer/working_data/script/_lib/lib_battle_script_unit.lua, line 510</p>
						</dd>
					</dl>
					<dl class="function">
						<dt>
							<a name="function:script_unit:turn_to_face"><h3 class="function_name"><strong><code>script_unit:turn_to_face(vector </strong></code><i class="parameter">position</i><code><strong>)</code></strong></h3></a>
						</dt>
						<dd>
							Instructs the scriptunit to turn to face a position vector.

							<h4>Parameters:</h4>
							<table class="parameter_list">
								<colgroup>
									<col style="width: 3%;">
									<col style="width: 12%;">
									<col style="width: 85%;">
								</colgroup>
								<tr>
									<td>
										<p><strong>1</strong></p>
									</td>
									<td>
										<p><code>vector</code></p>
									</td>
									<td>
										<p>position</p>
									</td>
								</tr>
							</table>

							<h4>Returns:</h4>
							<ol>
								<li><code>nil</code></li>
							</ol>
							<p class="file_comment">defined in ../../Warhammer/working_data/script/_lib/lib_battle_script_unit.lua, line 517</p>
						</dd>
					</dl>
					<dl class="function">
						<dt>
							<a name="function:script_unit:teleport_to_location"><h3 class="function_name"><strong><code>script_unit:teleport_to_location(vector </strong></code><i class="parameter">position</i><code><strong>, number </strong></code><i class="parameter">bearing</i><code><strong>, number </strong></code><i class="parameter">width</i><code><strong>)</code></strong></h3></a>
						</dt>
						<dd>
							Instructs the scriptunit to teleport to a location.

							<h4>Parameters:</h4>
							<table class="parameter_list">
								<colgroup>
									<col style="width: 3%;">
									<col style="width: 12%;">
									<col style="width: 85%;">
								</colgroup>
								<tr>
									<td>
										<p><strong>1</strong></p>
									</td>
									<td>
										<p><code>vector</code></p>
									</td>
									<td>
										<p>Position to teleport to.</p>
									</td>
								</tr>
								<tr>
									<td>
										<p><strong>2</strong></p>
									</td>
									<td>
										<p><code>number</code></p>
									</td>
									<td>
										<p>Bearing to face at the target position in degrees.</p>
									</td>
								</tr>
								<tr>
									<td>
										<p><strong>3</strong></p>
									</td>
									<td>
										<p><code>number</code></p>
									</td>
									<td>
										<p>Width in m of formation at target position.</p>
									</td>
								</tr>
							</table>

							<h4>Returns:</h4>
							<ol>
								<li><code>nil</code></li>
							</ol>
							<p class="file_comment">defined in ../../Warhammer/working_data/script/_lib/lib_battle_script_unit.lua, line 553</p>
						</dd>
					</dl>
				</div>


				<div>
					<a style="float:right;" href="#top">Back to top</a>
					<a name="section:script_unit:Location Caching"><h2 class="section_header">Location Caching</h2></a>
				</div>
				<div class="section_body">
					<dl class="function">
						<dt>
							<a name="function:script_unit:cache_location"><h3 class="function_name"><strong><code>script_unit:cache_location()</code></strong></h3></a>
						</dt>
						<dd>
							Caches the units current position, bearing and width.


							<h4>Returns:</h4>
							<ol>
								<li><code>nil</code></li>
							</ol>
							<p class="file_comment">defined in ../../Warhammer/working_data/script/_lib/lib_battle_script_unit.lua, line 593</p>
						</dd>
					</dl>
					<dl class="function">
						<dt>
							<a name="function:script_unit:get_cached_position"><h3 class="function_name"><strong><code>script_unit:get_cached_position()</code></strong></h3></a>
						</dt>
						<dd>
							Returns the vector position of the unit last time it was cached with <code><a href="#function:script_unit:cache_location">script_unit:cache_location</a></code>.


							<h4>Returns:</h4>
							<ol>
								<li><code>vector</code> position (or nil, if never cached).</li>
							</ol>
							<p class="file_comment">defined in ../../Warhammer/working_data/script/_lib/lib_battle_script_unit.lua, line 602</p>
						</dd>
					</dl>
					<dl class="function">
						<dt>
							<a name="function:script_unit:get_cached_bearing"><h3 class="function_name"><strong><code>script_unit:get_cached_bearing()</code></strong></h3></a>
						</dt>
						<dd>
							Returns the bearing of the unit in degrees last time it was cached with <code><a href="#function:script_unit:cache_location">script_unit:cache_location</a></code>.


							<h4>Returns:</h4>
							<ol>
								<li><code>number</code> bearing (or nil, if never cached).</li>
							</ol>
							<p class="file_comment">defined in ../../Warhammer/working_data/script/_lib/lib_battle_script_unit.lua, line 610</p>
						</dd>
					</dl>
					<dl class="function">
						<dt>
							<a name="function:script_unit:get_cached_width"><h3 class="function_name"><strong><code>script_unit:get_cached_width()</code></strong></h3></a>
						</dt>
						<dd>
							Returns the width of the unit in m last time it was cached with <code><a href="#function:script_unit:cache_location">script_unit:cache_location</a></code>.


							<h4>Returns:</h4>
							<ol>
								<li><code>number</code> width (or nil, if never cached).</li>
							</ol>
							<p class="file_comment">defined in ../../Warhammer/working_data/script/_lib/lib_battle_script_unit.lua, line 618</p>
						</dd>
					</dl>
					<dl class="function">
						<dt>
							<a name="function:script_unit:goto_cached_location"><h3 class="function_name"><strong><code>script_unit:goto_cached_location([boolean </strong></code><i class="parameter">should run</i><code><strong>])</code></strong></h3></a>
						</dt>
						<dd>
							Instructs the scriptunit to move to the location the unit occupied the last time it was cached with <code><a href="#function:script_unit:cache_location">script_unit:cache_location</a></code>.

							<h4>Parameters:</h4>
							<table class="parameter_list">
								<colgroup>
									<col style="width: 3%;">
									<col style="width: 12%;">
									<col style="width: 85%;">
								</colgroup>
								<tr>
									<td>
										<p><strong>1</strong></p>
									</td>
									<td>
										<p><code>boolean</code></p>
									</td>
									<td>
										<p><i>optional, default value=false</i></p>
										<p>Instructs the unit to move fast.</p>
									</td>
								</tr>
							</table>

							<h4>Returns:</h4>
							<ol>
								<li><code>nil</code></li>
							</ol>
							<p class="file_comment">defined in ../../Warhammer/working_data/script/_lib/lib_battle_script_unit.lua, line 626</p>
						</dd>
					</dl>
					<dl class="function">
						<dt>
							<a name="function:script_unit:teleport_to_cached_location"><h3 class="function_name"><strong><code>script_unit:teleport_to_cached_location()</code></strong></h3></a>
						</dt>
						<dd>
							Teleports the scriptunit to the location the unit occupied the last time it was cached with <code><a href="#function:script_unit:cache_location">script_unit:cache_location</a></code>.


							<h4>Returns:</h4>
							<ol>
								<li><code>nil</code></li>
							</ol>
							<p class="file_comment">defined in ../../Warhammer/working_data/script/_lib/lib_battle_script_unit.lua, line 637</p>
						</dd>
					</dl>
					<dl class="function">
						<dt>
							<a name="function:script_unit:has_moved"><h3 class="function_name"><strong><code>script_unit:has_moved([vector </strong></code><i class="parameter">position override</i><code><strong>], [number </strong></code><i class="parameter">threshold distance</i><code><strong>])</code></strong></h3></a>
						</dt>
						<dd>
							Returns true if the scriptunit has moved from the last cached position, or an optional supplied position. The movement threshold can also be overriden (by default it's 1m).

							<h4>Parameters:</h4>
							<table class="parameter_list">
								<colgroup>
									<col style="width: 3%;">
									<col style="width: 12%;">
									<col style="width: 85%;">
								</colgroup>
								<tr>
									<td>
										<p><strong>1</strong></p>
									</td>
									<td>
										<p><code>vector</code></p>
									</td>
									<td>
										<p><i>optional, default value=nil</i></p>
										<p>position override</p>
									</td>
								</tr>
								<tr>
									<td>
										<p><strong>2</strong></p>
									</td>
									<td>
										<p><code>number</code></p>
									</td>
									<td>
										<p><i>optional, default value=1</i></p>
										<p>threshold distance</p>
									</td>
								</tr>
							</table>

							<h4>Returns:</h4>
							<ol>
								<li><code>boolean</code> has moved</li>
							</ol>
							<p class="file_comment">defined in ../../Warhammer/working_data/script/_lib/lib_battle_script_unit.lua, line 646</p>
						</dd>
					</dl>
					<dl class="function">
						<dt>
							<a name="function:script_unit:cache_destination"><h3 class="function_name"><strong><code>script_unit:cache_destination()</code></strong></h3></a>
						</dt>
						<dd>
							Caches the current destination position of the scriptunit. Note that the if the subject unit is attacking rather than moving to a position it will have no valid destination. The function also caches whether the unit is running.


							<h4>Returns:</h4>
							<ol>
								<li><code>nil</code></li>
							</ol>
							<p class="file_comment">defined in ../../Warhammer/working_data/script/_lib/lib_battle_script_unit.lua, line 683</p>
						</dd>
					</dl>
					<dl class="function">
						<dt>
							<a name="function:script_unit:cache_destination_and_halt"><h3 class="function_name"><strong><code>script_unit:cache_destination_and_halt()</code></strong></h3></a>
						</dt>
						<dd>
							Caches the current destination position of the scriptunit with <code><a href="#function:script_unit:cache_destination">script_unit:cache_destination</a></code>, and then orders the unit to halt.


							<h4>Returns:</h4>
							<ol>
								<li><code>nil</code></li>
							</ol>
							<p class="file_comment">defined in ../../Warhammer/working_data/script/_lib/lib_battle_script_unit.lua, line 697</p>
						</dd>
					</dl>
					<dl class="function">
						<dt>
							<a name="function:script_unit:get_cached_destination_position"><h3 class="function_name"><strong><code>script_unit:get_cached_destination_position()</code></strong></h3></a>
						</dt>
						<dd>
							Returns the vector destination last cached by <code><a href="#function:script_unit:cache_destination">script_unit:cache_destination</a></code>.


							<h4>Returns:</h4>
							<ol>
								<li><code>vector</code> destination position (or nil if destination never cached).</li>
							</ol>
							<p class="file_comment">defined in ../../Warhammer/working_data/script/_lib/lib_battle_script_unit.lua, line 705</p>
						</dd>
					</dl>
					<dl class="function">
						<dt>
							<a name="function:script_unit:get_cached_destination_bearing"><h3 class="function_name"><strong><code>script_unit:get_cached_destination_bearing()</code></strong></h3></a>
						</dt>
						<dd>
							Returns the ordered bearing in degrees that was last cached by <code><a href="#function:script_unit:cache_destination">script_unit:cache_destination</a></code>.


							<h4>Returns:</h4>
							<ol>
								<li><code>number</code> bearing in degrees (or nil if destination never cached).</li>
							</ol>
							<p class="file_comment">defined in ../../Warhammer/working_data/script/_lib/lib_battle_script_unit.lua, line 713</p>
						</dd>
					</dl>
					<dl class="function">
						<dt>
							<a name="function:script_unit:get_cached_destination_width"><h3 class="function_name"><strong><code>script_unit:get_cached_destination_width()</code></strong></h3></a>
						</dt>
						<dd>
							Returns the ordered width in m that was last cached by <code><a href="#function:script_unit:cache_destination">script_unit:cache_destination</a></code>.


							<h4>Returns:</h4>
							<ol>
								<li><code>number</code> width in m (or nil if destination never cached).</li>
							</ol>
							<p class="file_comment">defined in ../../Warhammer/working_data/script/_lib/lib_battle_script_unit.lua, line 721</p>
						</dd>
					</dl>
					<dl class="function">
						<dt>
							<a name="function:script_unit:goto_cached_destination"><h3 class="function_name"><strong><code>script_unit:goto_cached_destination([boolean </strong></code><i class="parameter">should release</i><code><strong>])</code></strong></h3></a>
						</dt>
						<dd>
							Instructs the unit to move to the location last cached by <code><a href="#function:script_unit:cache_destination">script_unit:cache_destination</a></code>. If the unit was moving quickly when its destination was last cached, than it will resume moving quickly when this function is called.

							<h4>Parameters:</h4>
							<table class="parameter_list">
								<colgroup>
									<col style="width: 3%;">
									<col style="width: 12%;">
									<col style="width: 85%;">
								</colgroup>
								<tr>
									<td>
										<p><strong>1</strong></p>
									</td>
									<td>
										<p><code>boolean</code></p>
									</td>
									<td>
										<p><i>optional, default value=false</i></p>
										<p>Set to true to release script control of the unit after calling this function. Set this if it's desirable for the player (or AI, if it's not a player-controlled unit) to be able to control this unit after the order has been issued.</p>
									</td>
								</tr>
							</table>

							<h4>Returns:</h4>
							<ol>
								<li><code>nil</code></li>
							</ol>
							<p class="file_comment">defined in ../../Warhammer/working_data/script/_lib/lib_battle_script_unit.lua, line 729</p>
						</dd>
					</dl>
				</div>


				<div>
					<a style="float:right;" href="#top">Back to top</a>
					<a name="section:script_unit:Combat Status"><h2 class="section_header">Combat Status</h2></a>
				</div>
				<div class="section_body">
					<dl class="function">
						<dt>
							<a name="function:script_unit:is_under_attack"><h3 class="function_name"><strong><code>script_unit:is_under_attack()</code></strong></h3></a>
						</dt>
						<dd>
							Returns true if the unit is under missile attack, in melee, or has casualties since the last time <code>is_under_attack</code> was called. Designed to be called repeatedly.


							<h4>Returns:</h4>
							<ol>
								<li><code>boolean</code> is under attack</li>
							</ol>
							<p class="file_comment">defined in ../../Warhammer/working_data/script/_lib/lib_battle_script_unit.lua, line 761</p>
						</dd>
					</dl>
					<dl class="function">
						<dt>
							<a name="function:script_unit:is_in_melee"><h3 class="function_name"><strong><code>script_unit:is_in_melee()</code></strong></h3></a>
						</dt>
						<dd>
							Returns true if the unit is in melee. This is an unembellished wrapper for an underlying code function.


							<h4>Returns:</h4>
							<ol>
								<li><code>boolean</code> is in melee</li>
							</ol>
							<p class="file_comment">defined in ../../Warhammer/working_data/script/_lib/lib_battle_script_unit.lua, line 771</p>
						</dd>
					</dl>
				</div>


				<div>
					<a style="float:right;" href="#top">Back to top</a>
					<a name="section:script_unit:Orders"><h2 class="section_header">Orders</h2></a>
				</div>
				<p>Many of the functions in this section just wrap the function provided by code on the unitcontroller interface with no embellishments - by wrapping it here, however, access to it can be provided at the <code><a href="#class:script_units">script_units</a></code> level, so a scriptunits collection can be told to stop with one call to <code><a href="#function:script_unit:halt">script_unit:halt</a></code>, for example.</p>
				<div class="section_body">
					<dl class="function">
						<dt>
							<a name="function:script_unit:halt"><h3 class="function_name"><strong><code>script_unit:halt()</code></strong></h3></a>
						</dt>
						<dd>
							Instructs the scriptunit to halt. This is an unembellished wrapper for an underlying code function.


							<h4>Returns:</h4>
							<ol>
								<li><code>nil</code></li>
							</ol>
							<p class="file_comment">defined in ../../Warhammer/working_data/script/_lib/lib_battle_script_unit.lua, line 819</p>
						</dd>
					</dl>
					<dl class="function">
						<dt>
							<a name="function:script_unit:celebrate"><h3 class="function_name"><strong><code>script_unit:celebrate()</code></strong></h3></a>
						</dt>
						<dd>
							Instructs the scriptunit to celebrate. This is an unembellished wrapper for an underlying code function.


							<h4>Returns:</h4>
							<ol>
								<li><code>nil</code></li>
							</ol>
							<p class="file_comment">defined in ../../Warhammer/working_data/script/_lib/lib_battle_script_unit.lua, line 826</p>
						</dd>
					</dl>
					<dl class="function">
						<dt>
							<a name="function:script_unit:taunt"><h3 class="function_name"><strong><code>script_unit:taunt()</code></strong></h3></a>
						</dt>
						<dd>
							Instructs the scriptunit to taunt. This is an unembellished wrapper for an underlying code function.


							<h4>Returns:</h4>
							<ol>
								<li><code>nil</code></li>
							</ol>
							<p class="file_comment">defined in ../../Warhammer/working_data/script/_lib/lib_battle_script_unit.lua, line 832</p>
						</dd>
					</dl>
					<dl class="function">
						<dt>
							<a name="function:script_unit:play_sound_charge"><h3 class="function_name"><strong><code>script_unit:play_sound_charge()</code></strong></h3></a>
						</dt>
						<dd>
							Instructs the scriptunit to play a charge sound. This is an unembellished wrapper for an underlying code function.


							<h4>Returns:</h4>
							<ol>
								<li><code>nil</code></li>
							</ol>
							<p class="file_comment">defined in ../../Warhammer/working_data/script/_lib/lib_battle_script_unit.lua, line 839</p>
						</dd>
					</dl>
					<dl class="function">
						<dt>
							<a name="function:script_unit:play_sound_taunt"><h3 class="function_name"><strong><code>script_unit:play_sound_taunt()</code></strong></h3></a>
						</dt>
						<dd>
							Instructs the scriptunit to play a taunt sound. This is an unembellished wrapper for an underlying code function.


							<h4>Returns:</h4>
							<ol>
								<li><code>nil</code></li>
							</ol>
							<p class="file_comment">defined in ../../Warhammer/working_data/script/_lib/lib_battle_script_unit.lua, line 846</p>
						</dd>
					</dl>
					<dl class="function">
						<dt>
							<a name="function:script_unit:deploy_reinforcement"><h3 class="function_name"><strong><code>script_unit:deploy_reinforcement([boolean </strong></code><i class="parameter">should deploy</i><code><strong>])</code></strong></h3></a>
						</dt>
						<dd>
							Instructs the scriptunit to deploy as a reinforcement if it can.

							<h4>Parameters:</h4>
							<table class="parameter_list">
								<colgroup>
									<col style="width: 3%;">
									<col style="width: 12%;">
									<col style="width: 85%;">
								</colgroup>
								<tr>
									<td>
										<p><strong>1</strong></p>
									</td>
									<td>
										<p><code>boolean</code></p>
									</td>
									<td>
										<p><i>optional, default value=true</i></p>
										<p>should deploy</p>
									</td>
								</tr>
							</table>

							<h4>Returns:</h4>
							<ol>
								<li><code>nil</code></li>
							</ol>
							<p class="file_comment">defined in ../../Warhammer/working_data/script/_lib/lib_battle_script_unit.lua, line 863</p>
						</dd>
					</dl>
					<dl class="function">
						<dt>
							<a name="function:script_unit:change_behaviour_active"><h3 class="function_name"><strong><code>script_unit:change_behaviour_active(string </strong></code><i class="parameter">behaviour name</i><code><strong>, boolean </strong></code><i class="parameter">activate</i><code><strong>)</code></strong></h3></a>
						</dt>
						<dd>
							Sets a supplied behaviour active on the unit or not. This is an unembellished wrapper for an underlying code function. This is the main mechanism for turning on/turning off certain unit behaviours such as fire at will, skirmish etc. Current list of behaviours includes, but may not be limited to the following:<br />
							<i>"defend", "dismount", "fire_at_will", "skirmish", "change_formation_spacing", "drop_siege_equipment", "release_animals", "disembark_from_ship", "board_ship"</i>

							<h4>Parameters:</h4>
							<table class="parameter_list">
								<colgroup>
									<col style="width: 3%;">
									<col style="width: 12%;">
									<col style="width: 85%;">
								</colgroup>
								<tr>
									<td>
										<p><strong>1</strong></p>
									</td>
									<td>
										<p><code>string</code></p>
									</td>
									<td>
										<p>behaviour name</p>
									</td>
								</tr>
								<tr>
									<td>
										<p><strong>2</strong></p>
									</td>
									<td>
										<p><code>boolean</code></p>
									</td>
									<td>
										<p>activate</p>
									</td>
								</tr>
							</table>

							<h4>Returns:</h4>
							<ol>
								<li><code>nil</code></li>
							</ol>
							<p class="file_comment">defined in ../../Warhammer/working_data/script/_lib/lib_battle_script_unit.lua, line 875</p>
						</dd>
					</dl>
					<dl class="function">
						<dt>
							<a name="function:script_unit:withdraw"><h3 class="function_name"><strong><code>script_unit:withdraw(boolean </strong></code><i class="parameter">should run</i><code><strong>)</code></strong></h3></a>
						</dt>
						<dd>
							Instructs the specified unit to withdraw. This is an unembellished wrapper for an underlying code function.

							<h4>Parameters:</h4>
							<table class="parameter_list">
								<colgroup>
									<col style="width: 3%;">
									<col style="width: 12%;">
									<col style="width: 85%;">
								</colgroup>
								<tr>
									<td>
										<p><strong>1</strong></p>
									</td>
									<td>
										<p><code>boolean</code></p>
									</td>
									<td>
										<p>should run</p>
									</td>
								</tr>
							</table>

							<h4>Returns:</h4>
							<ol>
								<li><code>nil</code></li>
							</ol>
							<p class="file_comment">defined in ../../Warhammer/working_data/script/_lib/lib_battle_script_unit.lua, line 888</p>
						</dd>
					</dl>
					<dl class="function">
						<dt>
							<a name="function:script_unit:set_melee_mode"><h3 class="function_name"><strong><code>script_unit:set_melee_mode([boolean </strong></code><i class="parameter">activate</i><code><strong>], [boolean </strong></code><i class="parameter">release control</i><code><strong>])</code></strong></h3></a>
						</dt>
						<dd>
							Activates or deactivates melee mode. 

							<h4>Parameters:</h4>
							<table class="parameter_list">
								<colgroup>
									<col style="width: 3%;">
									<col style="width: 12%;">
									<col style="width: 85%;">
								</colgroup>
								<tr>
									<td>
										<p><strong>1</strong></p>
									</td>
									<td>
										<p><code>boolean</code></p>
									</td>
									<td>
										<p><i>optional, default value=true</i></p>
										<p>Should activate melee mode.</p>
									</td>
								</tr>
								<tr>
									<td>
										<p><strong>2</strong></p>
									</td>
									<td>
										<p><code>boolean</code></p>
									</td>
									<td>
										<p><i>optional, default value=false</i></p>
										<p>Release script control after setting melee mode. Set this to true if the unit is under player control.</p>
									</td>
								</tr>
							</table>

							<h4>Returns:</h4>
							<ol>
								<li><code>nil</code></li>
							</ol>
							<p class="file_comment">defined in ../../Warhammer/working_data/script/_lib/lib_battle_script_unit.lua, line 896</p>
						</dd>
					</dl>
					<dl class="function">
						<dt>
							<a name="function:script_unit:set_stat_attribute"><h3 class="function_name"><strong><code>script_unit:set_stat_attribute(<code><a href="lua.html#class:string">string</a></code> </strong></code><i class="parameter">attribute key</i><code><strong>, <code><a href="lua.html#class:boolean">boolean</a></code> </strong></code><i class="parameter">enable/disable</i><code><strong>)</code></strong></h3></a>
						</dt>
						<dd>
							Enables or disables a unit attribute for the unit. Valid attribute keys are listed in the <code><a href="battle_unit.html#section:battle_unit:Unit Attributes">Unit Attributes</a></code> section of this documentation.

							<h4>Parameters:</h4>
							<table class="parameter_list">
								<colgroup>
									<col style="width: 3%;">
									<col style="width: 12%;">
									<col style="width: 85%;">
								</colgroup>
								<tr>
									<td>
										<p><strong>1</strong></p>
									</td>
									<td>
										<p><code><code><a href="lua.html#class:string">string</a></code></code></p>
									</td>
									<td>
										<p>attribute key</p>
									</td>
								</tr>
								<tr>
									<td>
										<p><strong>2</strong></p>
									</td>
									<td>
										<p><code><code><a href="lua.html#class:boolean">boolean</a></code></code></p>
									</td>
									<td>
										<p>enable/disable</p>
									</td>
								</tr>
							</table>

							<h4>Returns:</h4>
							<ol>
								<li><code>nil</code></li>
							</ol>
							<p class="file_comment">defined in ../../Warhammer/working_data/script/_lib/lib_battle_script_unit.lua, line 909</p>
						</dd>
					</dl>
				</div>


				<div>
					<a style="float:right;" href="#top">Back to top</a>
					<a name="section:script_unit:Enabling and Visibility"><h2 class="section_header">Enabling and Visibility</h2></a>
				</div>
				<div class="section_body">
					<dl class="function">
						<dt>
							<a name="function:script_unit:set_enabled"><h3 class="function_name"><strong><code>script_unit:set_enabled(<br />&emsp;&emsp;[<code><a href="lua.html#class:boolean">boolean</a></code> </strong></code><i class="parameter">enabled</i><code><strong>], <br />&emsp;&emsp;[<code><a href="lua.html#class:boolean">boolean</a></code> </strong></code><i class="parameter">force unit card update</i><code><strong>], <br />&emsp;&emsp;[<code><a href="lua.html#class:boolean">boolean</a></code> </strong></code><i class="parameter">unit contributes to army strength</i><code><strong>]<br />)</code></strong></h3></a>
						</dt>
						<dd>
							Sets the unit to be enabled and visible if <code>true</code> is supplied as an argument, or disabled and invisible if <code>false</code> is supplied. The second argument forces the UI to refresh the unit card's visibility, but this only needs to be set to <code>true</code> in certain specific circumstances.<br />
							The third argument, if set to <code>true</code> or <code>false</code>, will also set that unit to contribute to the army strength or not depending upon the value supplied. If no value is supplied here then enabled units will contribute to army strength whereas disabled units will not.

							<h4>Parameters:</h4>
							<table class="parameter_list">
								<colgroup>
									<col style="width: 3%;">
									<col style="width: 12%;">
									<col style="width: 85%;">
								</colgroup>
								<tr>
									<td>
										<p><strong>1</strong></p>
									</td>
									<td>
										<p><code><code><a href="lua.html#class:boolean">boolean</a></code></code></p>
									</td>
									<td>
										<p><i>optional, default value=true</i></p>
										<p>enabled</p>
									</td>
								</tr>
								<tr>
									<td>
										<p><strong>2</strong></p>
									</td>
									<td>
										<p><code><code><a href="lua.html#class:boolean">boolean</a></code></code></p>
									</td>
									<td>
										<p><i>optional, default value=false</i></p>
										<p>force unit card update</p>
									</td>
								</tr>
								<tr>
									<td>
										<p><strong>3</strong></p>
									</td>
									<td>
										<p><code><code><a href="lua.html#class:boolean">boolean</a></code></code></p>
									</td>
									<td>
										<p><i>optional, default value=nil</i></p>
										<p>unit contributes to army strength</p>
									</td>
								</tr>
							</table>

							<h4>Returns:</h4>
							<ol>
								<li><code>nil</code></li>
							</ol>
							<p class="file_comment">defined in ../../Warhammer/working_data/script/_lib/lib_battle_script_unit.lua, line 939</p>
						</dd>
					</dl>
					<dl class="function">
						<dt>
							<a name="function:script_unit:set_always_visible"><h3 class="function_name"><strong><code>script_unit:set_always_visible([boolean </strong></code><i class="parameter">always visible</i><code><strong>])</code></strong></h3></a>
						</dt>
						<dd>
							Sets the unit to be always visible, according to the rules of the terrain visibility system.

							<h4>Parameters:</h4>
							<table class="parameter_list">
								<colgroup>
									<col style="width: 3%;">
									<col style="width: 12%;">
									<col style="width: 85%;">
								</colgroup>
								<tr>
									<td>
										<p><strong>1</strong></p>
									</td>
									<td>
										<p><code>boolean</code></p>
									</td>
									<td>
										<p><i>optional, default value=true</i></p>
										<p>always visible</p>
									</td>
								</tr>
							</table>

							<h4>Returns:</h4>
							<ol>
								<li><code>nil</code></li>
							</ol>
							<p class="file_comment">defined in ../../Warhammer/working_data/script/_lib/lib_battle_script_unit.lua, line 967</p>
						</dd>
					</dl>
					<dl class="function">
						<dt>
							<a name="function:script_unit:set_always_visible_no_hidden"><h3 class="function_name"><strong><code>script_unit:set_always_visible_no_hidden([boolean </strong></code><i class="parameter">always visible</i><code><strong>])</code></strong></h3></a>
						</dt>
						<dd>
							Sets the unit to be always visible, doesn't affect hidden by forest / abilities

							<h4>Parameters:</h4>
							<table class="parameter_list">
								<colgroup>
									<col style="width: 3%;">
									<col style="width: 12%;">
									<col style="width: 85%;">
								</colgroup>
								<tr>
									<td>
										<p><strong>1</strong></p>
									</td>
									<td>
										<p><code>boolean</code></p>
									</td>
									<td>
										<p><i>optional, default value=true</i></p>
										<p>always visible</p>
									</td>
								</tr>
							</table>

							<h4>Returns:</h4>
							<ol>
								<li><code>nil</code></li>
							</ol>
							<p class="file_comment">defined in ../../Warhammer/working_data/script/_lib/lib_battle_script_unit.lua, line 978</p>
						</dd>
					</dl>
					<dl class="function">
						<dt>
							<a name="function:script_unit:set_always_visible_no_leave_battle"><h3 class="function_name"><strong><code>script_unit:set_always_visible_no_leave_battle([boolean </strong></code><i class="parameter">always visible</i><code><strong>])</code></strong></h3></a>
						</dt>
						<dd>
							Sets the unit to be always visible, doesn't affect leaving battle

							<h4>Parameters:</h4>
							<table class="parameter_list">
								<colgroup>
									<col style="width: 3%;">
									<col style="width: 12%;">
									<col style="width: 85%;">
								</colgroup>
								<tr>
									<td>
										<p><strong>1</strong></p>
									</td>
									<td>
										<p><code>boolean</code></p>
									</td>
									<td>
										<p><i>optional, default value=true</i></p>
										<p>always visible</p>
									</td>
								</tr>
							</table>

							<h4>Returns:</h4>
							<ol>
								<li><code>nil</code></li>
							</ol>
							<p class="file_comment">defined in ../../Warhammer/working_data/script/_lib/lib_battle_script_unit.lua, line 989</p>
						</dd>
					</dl>
					<dl class="function">
						<dt>
							<a name="function:script_unit:set_always_visible_no_hidden_no_leave_battle"><h3 class="function_name"><strong><code>script_unit:set_always_visible_no_hidden_no_leave_battle([boolean </strong></code><i class="parameter">always visible</i><code><strong>])</code></strong></h3></a>
						</dt>
						<dd>
							Sets the unit to be always visible, doesn't affect hidden by forest / abilities  doesn't affect leaving battle

							<h4>Parameters:</h4>
							<table class="parameter_list">
								<colgroup>
									<col style="width: 3%;">
									<col style="width: 12%;">
									<col style="width: 85%;">
								</colgroup>
								<tr>
									<td>
										<p><strong>1</strong></p>
									</td>
									<td>
										<p><code>boolean</code></p>
									</td>
									<td>
										<p><i>optional, default value=true</i></p>
										<p>always visible</p>
									</td>
								</tr>
							</table>

							<h4>Returns:</h4>
							<ol>
								<li><code>nil</code></li>
							</ol>
							<p class="file_comment">defined in ../../Warhammer/working_data/script/_lib/lib_battle_script_unit.lua, line 1000</p>
						</dd>
					</dl>
					<dl class="function">
						<dt>
							<a name="function:script_unit:mark_as_ally"><h3 class="function_name"><strong><code>script_unit:mark_as_ally(boolean </strong></code><i class="parameter">mark as ally</i><code><strong>)</code></strong></h3></a>
						</dt>
						<dd>
							Makes player unit look like ally (for script where gradually give units in tutorials). This is an unembellished wrapper for an underlying code function.

							<h4>Parameters:</h4>
							<table class="parameter_list">
								<colgroup>
									<col style="width: 3%;">
									<col style="width: 12%;">
									<col style="width: 85%;">
								</colgroup>
								<tr>
									<td>
										<p><strong>1</strong></p>
									</td>
									<td>
										<p><code>boolean</code></p>
									</td>
									<td>
										<p>mark as ally</p>
									</td>
								</tr>
							</table>

							<h4>Returns:</h4>
							<ol>
								<li><code>nil</code></li>
							</ol>
							<p class="file_comment">defined in ../../Warhammer/working_data/script/_lib/lib_battle_script_unit.lua, line 1012</p>
						</dd>
					</dl>
					<dl class="function">
						<dt>
							<a name="function:script_unit:is_hidden"><h3 class="function_name"><strong><code>script_unit:is_hidden()</code></strong></h3></a>
						</dt>
						<dd>
							Returns true if the unit is hidden in grass/forests etc. This is an unembellished wrapper for an underlying code function. Returned result is not related to the terrain visibility system, which came later than this code function, so a unit may not be hidden (according to this result returned by this function) but may still not be visible to its enemy - check also <code><a href="#function:script_unit:is_visible_to_enemy">script_unit:is_visible_to_enemy</a></code>.


							<h4>Returns:</h4>
							<ol>
								<li><code>boolean</code> is hidden</li>
							</ol>
							<p class="file_comment">defined in ../../Warhammer/working_data/script/_lib/lib_battle_script_unit.lua, line 1020</p>
						</dd>
					</dl>
					<dl class="function">
						<dt>
							<a name="function:script_unit:set_invisible_to_all"><h3 class="function_name"><strong><code>script_unit:set_invisible_to_all(boolean </strong></code><i class="parameter">is hidden</i><code><strong>)</code></strong></h3></a>
						</dt>
						<dd>
							Makes the unit invisible. This is an unembellished wrapper for an underlying code function.

							<h4>Parameters:</h4>
							<table class="parameter_list">
								<colgroup>
									<col style="width: 3%;">
									<col style="width: 12%;">
									<col style="width: 85%;">
								</colgroup>
								<tr>
									<td>
										<p><strong>1</strong></p>
									</td>
									<td>
										<p><code>boolean</code></p>
									</td>
									<td>
										<p>is hidden</p>
									</td>
								</tr>
							</table>

							<h4>Returns:</h4>
							<ol>
								<li><code>nil</code></li>
							</ol>
							<p class="file_comment">defined in ../../Warhammer/working_data/script/_lib/lib_battle_script_unit.lua, line 1028</p>
						</dd>
					</dl>
					<dl class="function">
						<dt>
							<a name="function:script_unit:is_visible_to_enemy"><h3 class="function_name"><strong><code>script_unit:is_visible_to_enemy(boolean </strong></code><i class="parameter">is visible</i><code><strong>)</code></strong></h3></a>
						</dt>
						<dd>
							Returns true if this unit is visible to its enemy, by the rules of the visibility system. Note that the unit may be visible according to the visibility system, but may still be hidden in forests or tall grass - check <code><a href="#function:script_unit:is_hidden">script_unit:is_hidden</a></code>.

							<h4>Parameters:</h4>
							<table class="parameter_list">
								<colgroup>
									<col style="width: 3%;">
									<col style="width: 12%;">
									<col style="width: 85%;">
								</colgroup>
								<tr>
									<td>
										<p><strong>1</strong></p>
									</td>
									<td>
										<p><code>boolean</code></p>
									</td>
									<td>
										<p>is visible</p>
									</td>
								</tr>
							</table>

							<h4>Returns:</h4>
							<ol>
								<li><code>nil</code></li>
							</ol>
							<p class="file_comment">defined in ../../Warhammer/working_data/script/_lib/lib_battle_script_unit.lua, line 1036</p>
						</dd>
					</dl>
				</div>


				<div>
					<a style="float:right;" href="#top">Back to top</a>
					<a name="section:script_unit:Script Control"><h2 class="section_header">Script Control</h2></a>
				</div>
				<p>These functions explicitly instruct script to take or release control of the subject unit. A unit under script control is removed from the player's control or from general AI control, but may still be controlled by an ai_planner (or <code><a href="script_ai_planner.html#class:script_ai_planner">script_ai_planner</a></code>). Note also that giving orders to a unit with a unitcontroller will usually also take control of that unit.</p>
				<div class="section_body">
					<dl class="function">
						<dt>
							<a name="function:script_unit:take_control"><h3 class="function_name"><strong><code>script_unit:take_control()</code></strong></h3></a>
						</dt>
						<dd>
							Takes script control of this unit.


							<h4>Returns:</h4>
							<ol>
								<li><code>nil</code></li>
							</ol>
							<p class="file_comment">defined in ../../Warhammer/working_data/script/_lib/lib_battle_script_unit.lua, line 1056</p>
						</dd>
					</dl>
					<dl class="function">
						<dt>
							<a name="function:script_unit:release_control"><h3 class="function_name"><strong><code>script_unit:release_control()</code></strong></h3></a>
						</dt>
						<dd>
							Releases script control of the subject unit.


							<h4>Returns:</h4>
							<ol>
								<li><code>nil</code></li>
							</ol>
							<p class="file_comment">defined in ../../Warhammer/working_data/script/_lib/lib_battle_script_unit.lua, line 1063</p>
						</dd>
					</dl>
				</div>


				<div>
					<a style="float:right;" href="#top">Back to top</a>
					<a name="section:script_unit:Ammo and Fatigue"><h2 class="section_header">Ammo and Fatigue</h2></a>
				</div>
				<div class="section_body">
					<dl class="function">
						<dt>
							<a name="function:script_unit:modify_ammo"><h3 class="function_name"><strong><code>script_unit:modify_ammo(number </strong></code><i class="parameter">proportion</i><code><strong>)</code></strong></h3></a>
						</dt>
						<dd>
							Modifies this unit's ammo to a specified unary proportion of its starting value.

							<h4>Parameters:</h4>
							<table class="parameter_list">
								<colgroup>
									<col style="width: 3%;">
									<col style="width: 12%;">
									<col style="width: 85%;">
								</colgroup>
								<tr>
									<td>
										<p><strong>1</strong></p>
									</td>
									<td>
										<p><code>number</code></p>
									</td>
									<td>
										<p>Desired proportion of starting ammo. Supply 1 to set the ammo back to its starting value, 0.5 to half etc. Values of greater than one are semi-supported - the command will work, but any ammo bars on the UI will show as full until the unit's ammo value drops below its starting value.</p>
									</td>
								</tr>
							</table>

							<h4>Returns:</h4>
							<ol>
								<li><code>nil</code></li>
							</ol>
							<p class="file_comment">defined in ../../Warhammer/working_data/script/_lib/lib_battle_script_unit.lua, line 1083</p>
						</dd>
					</dl>
					<dl class="function">
						<dt>
							<a name="function:script_unit:refill_ammo"><h3 class="function_name"><strong><code>script_unit:refill_ammo(number </strong></code><i class="parameter">proportion</i><code><strong>)</code></strong></h3></a>
						</dt>
						<dd>
							Modifies this unit's ammo to a specified unary proportion of its starting value, but only if it has less than the specified amount.

							<h4>Parameters:</h4>
							<table class="parameter_list">
								<colgroup>
									<col style="width: 3%;">
									<col style="width: 12%;">
									<col style="width: 85%;">
								</colgroup>
								<tr>
									<td>
										<p><strong>1</strong></p>
									</td>
									<td>
										<p><code>number</code></p>
									</td>
									<td>
										<p>Desired proportion of starting ammo. Supply 1 to set the ammo back to its starting value, 0.5 to half etc. Values of greater than one are semi-supported - the command will work, but any ammo bars on the UI will show as full until the unit's ammo value drops below its starting value.</p>
									</td>
								</tr>
							</table>

							<h4>Returns:</h4>
							<ol>
								<li><code>nil</code></li>
							</ol>
							<p class="file_comment">defined in ../../Warhammer/working_data/script/_lib/lib_battle_script_unit.lua, line 1096</p>
						</dd>
					</dl>
					<dl class="function">
						<dt>
							<a name="function:script_unit:grant_infinite_ammo"><h3 class="function_name"><strong><code>script_unit:grant_infinite_ammo()</code></strong></h3></a>
						</dt>
						<dd>
							Grants this unit infinite ammo by refilling ammo every 5 seconds.


							<h4>Returns:</h4>
							<ol>
								<li><code>nil</code></li>
							</ol>
							<p class="file_comment">defined in ../../Warhammer/working_data/script/_lib/lib_battle_script_unit.lua, line 1113</p>
						</dd>
					</dl>
					<dl class="function">
						<dt>
							<a name="function:script_unit:refresh"><h3 class="function_name"><strong><code>script_unit:refresh([boolean </strong></code><i class="parameter">should release</i><code><strong>])</code></strong></h3></a>
						</dt>
						<dd>
							Sets this unit to 1/10th its current fatigue level, and tops its ammo back to full.

							<h4>Parameters:</h4>
							<table class="parameter_list">
								<colgroup>
									<col style="width: 3%;">
									<col style="width: 12%;">
									<col style="width: 85%;">
								</colgroup>
								<tr>
									<td>
										<p><strong>1</strong></p>
									</td>
									<td>
										<p><code>boolean</code></p>
									</td>
									<td>
										<p><i>optional, default value=false</i></p>
										<p>Release script control of the unit after refreshing. Set this to <code>true</code> if the unit is under player control.</p>
									</td>
								</tr>
							</table>

							<h4>Returns:</h4>
							<ol>
								<li><code>nil</code></li>
							</ol>
							<p class="file_comment">defined in ../../Warhammer/working_data/script/_lib/lib_battle_script_unit.lua, line 1130</p>
						</dd>
					</dl>
					<dl class="function">
						<dt>
							<a name="function:script_unit:cache_ammo"><h3 class="function_name"><strong><code>script_unit:cache_ammo()</code></strong></h3></a>
						</dt>
						<dd>
							Caches this unit's current ammunition level.


							<h4>Returns:</h4>
							<ol>
								<li><code>nil</code></li>
							</ol>
							<p class="file_comment">defined in ../../Warhammer/working_data/script/_lib/lib_battle_script_unit.lua, line 1143</p>
						</dd>
					</dl>
					<dl class="function">
						<dt>
							<a name="function:script_unit:restore_cached_ammo"><h3 class="function_name"><strong><code>script_unit:restore_cached_ammo()</code></strong></h3></a>
						</dt>
						<dd>
							Restores this unit's ammunition level to the value previously cached with <code><a href="#function:script_unit:cache_ammo">script_unit:cache_ammo</a></code>.


							<h4>Returns:</h4>
							<ol>
								<li><code>nil</code></li>
							</ol>
							<p class="file_comment">defined in ../../Warhammer/working_data/script/_lib/lib_battle_script_unit.lua, line 1150</p>
						</dd>
					</dl>
				</div>


				<div>
					<a style="float:right;" href="#top">Back to top</a>
					<a name="section:script_unit:Health and Invincibility"><h2 class="section_header">Health and Invincibility</h2></a>
				</div>
				<div class="section_body">
					<dl class="function">
						<dt>
							<a name="function:script_unit:cache_health"><h3 class="function_name"><strong><code>script_unit:cache_health()</code></strong></h3></a>
						</dt>
						<dd>
							Caches the proportion of the scriptunit still alive, so that it can be queried later with <code><a href="#function:script_unit:has_taken_casualties">script_unit:has_taken_casualties</a></code>.


							<h4>Returns:</h4>
							<ol>
								<li><code>nil</code></li>
							</ol>
							<p class="file_comment">defined in ../../Warhammer/working_data/script/_lib/lib_battle_script_unit.lua, line 1180</p>
						</dd>
					</dl>
					<dl class="function">
						<dt>
							<a name="function:script_unit:has_taken_casualties"><h3 class="function_name"><strong><code>script_unit:has_taken_casualties([number </strong></code><i class="parameter">tolerance</i><code><strong>])</code></strong></h3></a>
						</dt>
						<dd>
							Compares the scriptunits current casualties with that when it was previously cached with <code><a href="#function:script_unit:cache_health">script_unit:cache_health</a></code>, and returns true if they're different.

							<h4>Parameters:</h4>
							<table class="parameter_list">
								<colgroup>
									<col style="width: 3%;">
									<col style="width: 12%;">
									<col style="width: 85%;">
								</colgroup>
								<tr>
									<td>
										<p><strong>1</strong></p>
									</td>
									<td>
										<p><code>number</code></p>
									</td>
									<td>
										<p><i>optional, default value=0</i></p>
										<p>Tolerance value. The casualties values is expressed internally as a unary value (between 0 and 1), so this should be expressed in a similar manner. Therefore a tolerance of 0.1 would allow for 10% casualties (of the original number of soldiers in the unit) more than when previously cached before returning true.</p>
									</td>
								</tr>
							</table>

							<h4>Returns:</h4>
							<ol>
								<li><code>boolean</code> has taken casualties</li>
							</ol>
							<p class="file_comment">defined in ../../Warhammer/working_data/script/_lib/lib_battle_script_unit.lua, line 1191</p>
						</dd>
					</dl>
					<dl class="function">
						<dt>
							<a name="function:script_unit:unary_hitpoints"><h3 class="function_name"><strong><code>script_unit:unary_hitpoints([shattered </strong></code><i class="parameter">considered dead</i><code><strong>])</code></strong></h3></a>
						</dt>
						<dd>
							Returns this unit's hitpoints as a unary of its initial value. If the shattered-considered-dead flag is set and the unit is shattered (or it's routing and has left the field), then 0 is returned.

							<h4>Parameters:</h4>
							<table class="parameter_list">
								<colgroup>
									<col style="width: 3%;">
									<col style="width: 12%;">
									<col style="width: 85%;">
								</colgroup>
								<tr>
									<td>
										<p><strong>1</strong></p>
									</td>
									<td>
										<p><code>shattered</code></p>
									</td>
									<td>
										<p><i>optional, default value=false</i></p>
										<p>considered dead</p>
									</td>
								</tr>
							</table>

							<h4>Returns:</h4>
							<ol>
								<li><code><code><a href="lua.html#class:number">number</a></code></code> unary hitpoints</li>
							</ol>
							<p class="file_comment">defined in ../../Warhammer/working_data/script/_lib/lib_battle_script_unit.lua, line 1221</p>
						</dd>
					</dl>
					<dl class="function">
						<dt>
							<a name="function:script_unit:max_casualties"><h3 class="function_name"><strong><code>script_unit:max_casualties(<br />&emsp;&emsp;number </strong></code><i class="parameter">unary proportion</i><code><strong>, <br />&emsp;&emsp;[boolean </strong></code><i class="parameter">should release</i><code><strong>], <br />&emsp;&emsp;[<code><a href="#class:script_units">script_units</a></code> </strong></code><i class="parameter">exception sunit(s)</i><code><strong>], <br />&emsp;&emsp;<opt=false> </strong></code><i class="parameter">boolean silent mode</i><code><strong><br />)</code></strong></h3></a>
						</dt>
						<dd>
							Sets the maximum number of casualties that this unit can take. If the unit's hitpoints drop below the specified unary value, the unit is made invincible so that it can no longer take casualties (note that it may still rout). Exception scriptunits can be set, so that proximity to those <code><a href="#class:script_unit">script_unit</a></code> or <code><a href="#class:script_units">script_units</a></code> disables this invincibility (allow certain units to be perceived to charge in and 'save the day').

							<h4>Parameters:</h4>
							<table class="parameter_list">
								<colgroup>
									<col style="width: 3%;">
									<col style="width: 12%;">
									<col style="width: 85%;">
								</colgroup>
								<tr>
									<td>
										<p><strong>1</strong></p>
									</td>
									<td>
										<p><code>number</code></p>
									</td>
									<td>
										<p>Unary proportion. A value of 0.5 would allow the unit to take 50% casualties before becoming invincible (note that in extreme scenarios the unit may still die, if one-shotted by something for example).</p>
										<p>Call <code>max_casualties</code> with a proportion value of 0 to disables any previous <code>max_casualties</code> monitor on this unit.</p>
									</td>
								</tr>
								<tr>
									<td>
										<p><strong>2</strong></p>
									</td>
									<td>
										<p><code>boolean</code></p>
									</td>
									<td>
										<p><i>optional, default value=false</i></p>
										<p>Set to true to release script control of this unit after <code>max_casualties</code> makes a change. Set this primarily if the unit is under player control.</p>
									</td>
								</tr>
								<tr>
									<td>
										<p><strong>3</strong></p>
									</td>
									<td>
										<p><code><code><a href="#class:script_units">script_units</a></code></code></p>
									</td>
									<td>
										<p><i>optional, default value=nil</i></p>
										<p>Exception <code><a href="#class:script_unit">script_unit</a></code> or <code><a href="#class:script_units">script_units</a></code> collection. If this unit comes within 30m of any unit specified here, the <code>max_casualties</code> monitor will temporarily cease and they will become vulnerable to casualties.</p>
										<p>The monitor will resume and this unit will (potentially) regain invincibility when this unit moves more than 40m away from any unit specified as an exception.</p>
									</td>
								</tr>
								<tr>
									<td>
										<p><strong>4</strong></p>
									</td>
									<td>
										<p><code><opt=false></code></p>
									</td>
									<td>
										<p>Activate silent mode. <code>max_casualties</code> writes output by default, supply <code>true</code> here to suppress this.</p>
									</td>
								</tr>
							</table>

							<h4>Returns:</h4>
							<ol>
								<li><code>nil</code></li>
							</ol>
							<p class="file_comment">defined in ../../Warhammer/working_data/script/_lib/lib_battle_script_unit.lua, line 1234</p>
						</dd>
					</dl>
					<dl class="function">
						<dt>
							<a name="function:script_unit:set_invincible"><h3 class="function_name"><strong><code>script_unit:set_invincible(boolean </strong></code><i class="parameter">set invincible</i><code><strong>)</code></strong></h3></a>
						</dt>
						<dd>
							Makes the subject unit invincible. This wraps an underlying code function, and also cancels any running process started for this unit with <code><a href="#function:script_unit:max_casualties">script_unit:max_casualties</a></code> or <code><a href="#function:script_unit:set_invincible_for_time_proportion">script_unit:set_invincible_for_time_proportion</a></code>.

							<h4>Parameters:</h4>
							<table class="parameter_list">
								<colgroup>
									<col style="width: 3%;">
									<col style="width: 12%;">
									<col style="width: 85%;">
								</colgroup>
								<tr>
									<td>
										<p><strong>1</strong></p>
									</td>
									<td>
										<p><code>boolean</code></p>
									</td>
									<td>
										<p>set invincible</p>
									</td>
								</tr>
							</table>

							<h4>Returns:</h4>
							<ol>
								<li><code>nil</code></li>
							</ol>
							<p class="file_comment">defined in ../../Warhammer/working_data/script/_lib/lib_battle_script_unit.lua, line 1329</p>
						</dd>
					</dl>
					<dl class="function">
						<dt>
							<a name="function:script_unit:set_invincible_for_time_proportion"><h3 class="function_name"><strong><code>script_unit:set_invincible_for_time_proportion(<code><a href="lua.html#class:number">number</a></code> </strong></code><i class="parameter">time proportion</i><code><strong>, [<code><a href="lua.html#class:boolean">boolean</a></code> </strong></code><i class="parameter">should release</i><code><strong>])</code></strong></h3></a>
						</dt>
						<dd>
							Makes the subject unit invincible a proportion of the time. The intended effect is to slow the rate at which the unit receives casualties. Invincibility is toggled on and off over a five second interval, with the unit being invincible the specified proportion of time. The proportion is set as a unary <code><a href="lua.html#class:number">number</a></code>, so supplying a value of <code>0.8</code> would make the unit invincible for four seconds out of every five.<br />
							Set a value of 0 to turn off any previous invincibility set with this function.

							<h4>Parameters:</h4>
							<table class="parameter_list">
								<colgroup>
									<col style="width: 3%;">
									<col style="width: 12%;">
									<col style="width: 85%;">
								</colgroup>
								<tr>
									<td>
										<p><strong>1</strong></p>
									</td>
									<td>
										<p><code><code><a href="lua.html#class:number">number</a></code></code></p>
									</td>
									<td>
										<p>Unary (0-1) time proportion over which this unit should be invincible.</p>
									</td>
								</tr>
								<tr>
									<td>
										<p><strong>2</strong></p>
									</td>
									<td>
										<p><code><code><a href="lua.html#class:boolean">boolean</a></code></code></p>
									</td>
									<td>
										<p><i>optional, default value=false</i></p>
										<p>Instructs the function to release script control of the unit after setting it to be invincible or otherwise. Set this to <code>true</code> if the scriptunit is player-controlled.</p>
									</td>
								</tr>
							</table>

							<h4>Returns:</h4>
							<ol>
								<li><code>nil</code></li>
							</ol>
							<p class="file_comment">defined in ../../Warhammer/working_data/script/_lib/lib_battle_script_unit.lua, line 1339</p>
						</dd>
					</dl>
				</div>


				<div>
					<a style="float:right;" href="#top">Back to top</a>
					<a name="section:script_unit:Morale and Invincibility"><h2 class="section_header">Morale and Invincibility</h2></a>
				</div>
				<div class="section_body">
					<dl class="function">
						<dt>
							<a name="function:script_unit:fearless_until_casualties"><h3 class="function_name"><strong><code>script_unit:fearless_until_casualties(unary </strong></code><i class="parameter">proportion</i><code><strong>, [boolean </strong></code><i class="parameter">should release</i><code><strong>])</code></strong></h3></a>
						</dt>
						<dd>
							Prevents this unit from routing until it takes a certain proportion of casualties. If a proportion of 0 is supplied then any previous monitor set up with <code>fearless_until_casualties</code> is cancelled and the unit is allowed to rout.

							<h4>Parameters:</h4>
							<table class="parameter_list">
								<colgroup>
									<col style="width: 3%;">
									<col style="width: 12%;">
									<col style="width: 85%;">
								</colgroup>
								<tr>
									<td>
										<p><strong>1</strong></p>
									</td>
									<td>
										<p><code>unary</code></p>
									</td>
									<td>
										<p>Proportion of unit at which it may rout. Value should be expressed as a unary e.g. 0.5 = 50% casualties.</p>
									</td>
								</tr>
								<tr>
									<td>
										<p><strong>2</strong></p>
									</td>
									<td>
										<p><code>boolean</code></p>
									</td>
									<td>
										<p><i>optional, default value=false</i></p>
										<p>Set to true to release script control of this unit after <code>fearless_until_casualties</code> makes a change. Set this primarily if the unit is under player control.</p>
									</td>
								</tr>
							</table>

							<h4>Returns:</h4>
							<ol>
								<li><code>nil</code></li>
							</ol>
							<p class="file_comment">defined in ../../Warhammer/working_data/script/_lib/lib_battle_script_unit.lua, line 1423</p>
						</dd>
					</dl>
					<dl class="function">
						<dt>
							<a name="function:script_unit:rout_on_casualties"><h3 class="function_name"><strong><code>script_unit:rout_on_casualties(<code><a href="lua.html#class:number">number</a></code> </strong></code><i class="parameter">unary proportion</i><code><strong>, [<code><a href="lua.html#class:boolean">boolean</a></code> </strong></code><i class="parameter">set invincible</i><code><strong>])</code></strong></h3></a>
						</dt>
						<dd>
							Forces this unit to rout when it reaches a certain proportion of casualties. If a proportion of 0 is supplied then any previous monitor set up with <code>rout_on_casualties</code> is cancelled.

							<h4>Parameters:</h4>
							<table class="parameter_list">
								<colgroup>
									<col style="width: 3%;">
									<col style="width: 12%;">
									<col style="width: 85%;">
								</colgroup>
								<tr>
									<td>
										<p><strong>1</strong></p>
									</td>
									<td>
										<p><code><code><a href="lua.html#class:number">number</a></code></code></p>
									</td>
									<td>
										<p>Proportion of unit hitpoints remaining at which it routs. Value should be expressed as a unary e.g. 0.6 = unit will rout when its health gets below 60%.</p>
									</td>
								</tr>
								<tr>
									<td>
										<p><strong>2</strong></p>
									</td>
									<td>
										<p><code><code><a href="lua.html#class:boolean">boolean</a></code></code></p>
									</td>
									<td>
										<p><i>optional, default value=false</i></p>
										<p>Makes the unit invincible when it routs, so that it's guaranteed to survive.</p>
									</td>
								</tr>
							</table>

							<h4>Returns:</h4>
							<ol>
								<li><code>nil</code></li>
							</ol>
							<p class="file_comment">defined in ../../Warhammer/working_data/script/_lib/lib_battle_script_unit.lua, line 1466</p>
						</dd>
					</dl>
					<dl class="function">
						<dt>
							<a name="function:script_unit:invincible_if_standing"><h3 class="function_name"><strong><code>script_unit:invincible_if_standing([boolean </strong></code><i class="parameter">should release</i><code><strong>])</code></strong></h3></a>
						</dt>
						<dd>
							Makes the subject unit invincible/fearless if it's not already routing.

							<h4>Parameters:</h4>
							<table class="parameter_list">
								<colgroup>
									<col style="width: 3%;">
									<col style="width: 12%;">
									<col style="width: 85%;">
								</colgroup>
								<tr>
									<td>
										<p><strong>1</strong></p>
									</td>
									<td>
										<p><code>boolean</code></p>
									</td>
									<td>
										<p><i>optional, default value=false</i></p>
										<p>Set to true to release script control of this unit after <code>invincible_if_standing</code> makes a change. Set this primarily if the unit is under player control.</p>
									</td>
								</tr>
							</table>

							<h4>Returns:</h4>
							<ol>
								<li><code>nil</code></li>
							</ol>
							<p class="file_comment">defined in ../../Warhammer/working_data/script/_lib/lib_battle_script_unit.lua, line 1520</p>
						</dd>
					</dl>
					<dl class="function">
						<dt>
							<a name="function:script_unit:prevent_rallying_if_routing"><h3 class="function_name"><strong><code>script_unit:prevent_rallying_if_routing(<br />&emsp;&emsp;[boolean </strong></code><i class="parameter">check perpetually</i><code><strong>], <br />&emsp;&emsp;[boolean </strong></code><i class="parameter">shattered only</i><code><strong>], <br />&emsp;&emsp;[boolean </strong></code><i class="parameter">permit rampaging</i><code><strong>]<br />)</code></strong></h3></a>
						</dt>
						<dd>
							Prevents the subject unit from rallying if it's already routing. Supply <code>true</code> as a single argument to start a monitor that will continually poll whether this unit is routing, and prevent it

							<h4>Parameters:</h4>
							<table class="parameter_list">
								<colgroup>
									<col style="width: 3%;">
									<col style="width: 12%;">
									<col style="width: 85%;">
								</colgroup>
								<tr>
									<td>
										<p><strong>1</strong></p>
									</td>
									<td>
										<p><code>boolean</code></p>
									</td>
									<td>
										<p><i>optional, default value=false</i></p>
										<p>Check perpetually. If false or no value is supplied here, the function will only check the unit's routing state once, at the time the function is called. If the unit is not routing at this time, it may later rout and subsequently rally.</p>
										<p>If true is supplied instead, the function sets up a monitor that will continually poll the unit's routing status and, when found to be routing, prevents it from rallying at that time.</p>
									</td>
								</tr>
								<tr>
									<td>
										<p><strong>2</strong></p>
									</td>
									<td>
										<p><code>boolean</code></p>
									</td>
									<td>
										<p><i>optional, default value=false</i></p>
										<p>Only count shattered units</p>
									</td>
								</tr>
								<tr>
									<td>
										<p><strong>3</strong></p>
									</td>
									<td>
										<p><code>boolean</code></p>
									</td>
									<td>
										<p><i>optional, default value=false</i></p>
										<p>Don't automatically count rampaging units, check if they are actually routing too.</p>
									</td>
								</tr>
							</table>

							<h4>Returns:</h4>
							<ol>
								<li><code>nil</code></li>
							</ol>
							<p class="file_comment">defined in ../../Warhammer/working_data/script/_lib/lib_battle_script_unit.lua, line 1535</p>
						</dd>
					</dl>
					<dl class="function">
						<dt>
							<a name="function:script_unit:stop_prevent_rallying_if_routing"><h3 class="function_name"><strong><code>script_unit:stop_prevent_rallying_if_routing()</code></strong></h3></a>
						</dt>
						<dd>
							Stops any running monitor started by <code><a href="#function:script_unit:prevent_rallying_if_routing">script_unit:prevent_rallying_if_routing</a></code>.


							<h4>Returns:</h4>
							<ol>
								<li><code>nil</code></li>
							</ol>
							<p class="file_comment">defined in ../../Warhammer/working_data/script/_lib/lib_battle_script_unit.lua, line 1567</p>
						</dd>
					</dl>
					<dl class="function">
						<dt>
							<a name="function:script_unit:morale_behavior_fearless"><h3 class="function_name"><strong><code>script_unit:morale_behavior_fearless()</code></strong></h3></a>
						</dt>
						<dd>
							Sets this unit to be fearless/unroutable. This is an unembellished wrapper for an underlying code function.


							<h4>Returns:</h4>
							<ol>
								<li><code>nil</code></li>
							</ol>
							<p class="file_comment">defined in ../../Warhammer/working_data/script/_lib/lib_battle_script_unit.lua, line 1574</p>
						</dd>
					</dl>
					<dl class="function">
						<dt>
							<a name="function:script_unit:morale_behavior_rout"><h3 class="function_name"><strong><code>script_unit:morale_behavior_rout()</code></strong></h3></a>
						</dt>
						<dd>
							Causes this unit to instantly rout. This is an unembellished wrapper for an underlying code function.


							<h4>Returns:</h4>
							<ol>
								<li><code>nil</code></li>
							</ol>
							<p class="file_comment">defined in ../../Warhammer/working_data/script/_lib/lib_battle_script_unit.lua, line 1581</p>
						</dd>
					</dl>
					<dl class="function">
						<dt>
							<a name="function:script_unit:morale_behavior_default"><h3 class="function_name"><strong><code>script_unit:morale_behavior_default()</code></strong></h3></a>
						</dt>
						<dd>
							Causes this unit to be subject to normal morale. This is an unembellished wrapper for an underlying code function.


							<h4>Returns:</h4>
							<ol>
								<li><code>nil</code></li>
							</ol>
							<p class="file_comment">defined in ../../Warhammer/working_data/script/_lib/lib_battle_script_unit.lua, line 1588</p>
						</dd>
					</dl>
					<dl class="function">
						<dt>
							<a name="function:script_unit:morale_behavior_fearless_if_standing"><h3 class="function_name"><strong><code>script_unit:morale_behavior_fearless_if_standing([boolean </strong></code><i class="parameter">should release</i><code><strong>])</code></strong></h3></a>
						</dt>
						<dd>
							Makes the subject unit fearless if it's not already routing.

							<h4>Parameters:</h4>
							<table class="parameter_list">
								<colgroup>
									<col style="width: 3%;">
									<col style="width: 12%;">
									<col style="width: 85%;">
								</colgroup>
								<tr>
									<td>
										<p><strong>1</strong></p>
									</td>
									<td>
										<p><code>boolean</code></p>
									</td>
									<td>
										<p><i>optional, default value=false</i></p>
										<p>Set to true to release script control of this unit after <code>morale_behavior_fearless_if_standing</code> makes a change. Set this primarily if the unit is under player control.</p>
									</td>
								</tr>
							</table>

							<h4>Returns:</h4>
							<ol>
								<li><code>nil</code></li>
							</ol>
							<p class="file_comment">defined in ../../Warhammer/working_data/script/_lib/lib_battle_script_unit.lua, line 1595</p>
						</dd>
					</dl>
					<dl class="function">
						<dt>
							<a name="function:script_unit:morale_behavior_default_if_standing"><h3 class="function_name"><strong><code>script_unit:morale_behavior_default_if_standing([boolean </strong></code><i class="parameter">should release</i><code><strong>])</code></strong></h3></a>
						</dt>
						<dd>
							Makes the subject unit fearless if it's not already routing.

							<h4>Parameters:</h4>
							<table class="parameter_list">
								<colgroup>
									<col style="width: 3%;">
									<col style="width: 12%;">
									<col style="width: 85%;">
								</colgroup>
								<tr>
									<td>
										<p><strong>1</strong></p>
									</td>
									<td>
										<p><code>boolean</code></p>
									</td>
									<td>
										<p><i>optional, default value=false</i></p>
										<p>Set to true to release script control of this unit after <code>morale_behavior_default_if_standing</code> makes a change. Set this primarily if the unit is under player control.</p>
									</td>
								</tr>
							</table>

							<h4>Returns:</h4>
							<ol>
								<li><code>nil</code></li>
							</ol>
							<p class="file_comment">defined in ../../Warhammer/working_data/script/_lib/lib_battle_script_unit.lua, line 1609</p>
						</dd>
					</dl>
					<dl class="function">
						<dt>
							<a name="function:script_unit:hide_unbreakable_in_ui"><h3 class="function_name"><strong><code>script_unit:hide_unbreakable_in_ui(<code><a href="lua.html#class:boolean">boolean</a></code> </strong></code><i class="parameter">hide unbreakable state</i><code><strong>)</code></strong></h3></a>
						</dt>
						<dd>
							Calls <code><a href="battle_unitcontroller.html#function:battle_unitcontroller:hide_unbreakable_in_ui">unitcontroller:hide_unbreakable_in_ui</a></code> to prevent or allow the UI to show that this unit is unbreakable. This is useful for scripted content which is altering whether a unit can rout or not but doesn't want this to be reflected on the user interface.

							<h4>Parameters:</h4>
							<table class="parameter_list">
								<colgroup>
									<col style="width: 3%;">
									<col style="width: 12%;">
									<col style="width: 85%;">
								</colgroup>
								<tr>
									<td>
										<p><strong>1</strong></p>
									</td>
									<td>
										<p><code><code><a href="lua.html#class:boolean">boolean</a></code></code></p>
									</td>
									<td>
										<p>hide unbreakable state</p>
									</td>
								</tr>
							</table>

							<h4>Returns:</h4>
							<ol>
								<li><code>nil</code></li>
							</ol>
							<p class="file_comment">defined in ../../Warhammer/working_data/script/_lib/lib_battle_script_unit.lua, line 1623</p>
						</dd>
					</dl>
				</div>


				<div>
					<a style="float:right;" href="#top">Back to top</a>
					<a name="section:script_unit:Killing"><h2 class="section_header">Killing</h2></a>
				</div>
				<div class="section_body">
					<dl class="function">
						<dt>
							<a name="function:script_unit:kill"><h3 class="function_name"><strong><code>script_unit:kill([boolean </strong></code><i class="parameter">should disappear</i><code><strong>])</code></strong></h3></a>
						</dt>
						<dd>
							Instantly kills this unit.

							<h4>Parameters:</h4>
							<table class="parameter_list">
								<colgroup>
									<col style="width: 3%;">
									<col style="width: 12%;">
									<col style="width: 85%;">
								</colgroup>
								<tr>
									<td>
										<p><strong>1</strong></p>
									</td>
									<td>
										<p><code>boolean</code></p>
									</td>
									<td>
										<p><i>optional, default value=false</i></p>
										<p>Set to true to make the unit instantly disappear, instead of appearing to drop dead on the spot.</p>
									</td>
								</tr>
							</table>

							<h4>Returns:</h4>
							<ol>
								<li><code>nil</code></li>
							</ol>
							<p class="file_comment">defined in ../../Warhammer/working_data/script/_lib/lib_battle_script_unit.lua, line 1645</p>
						</dd>
					</dl>
					<dl class="function">
						<dt>
							<a name="function:script_unit:kill_proportion"><h3 class="function_name"><strong><code>script_unit:kill_proportion(number </strong></code><i class="parameter">proportion</i><code><strong>, [number </strong></code><i class="parameter">preserve proportion</i><code><strong>], [boolean </strong></code><i class="parameter">hide bodies</i><code><strong>])</code></strong></h3></a>
						</dt>
						<dd>
							Instantly kills a unary proportion of this unit.

							<h4>Parameters:</h4>
							<table class="parameter_list">
								<colgroup>
									<col style="width: 3%;">
									<col style="width: 12%;">
									<col style="width: 85%;">
								</colgroup>
								<tr>
									<td>
										<p><strong>1</strong></p>
									</td>
									<td>
										<p><code>number</code></p>
									</td>
									<td>
										<p>Proportion to kill, expressed as a unary value (e.g. 0.5 = 50% of the unit's starting number of soldiers die).</p>
									</td>
								</tr>
								<tr>
									<td>
										<p><strong>2</strong></p>
									</td>
									<td>
										<p><code>number</code></p>
									</td>
									<td>
										<p><i>optional, default value=0</i></p>
										<p>Prevents kill_proportion from reducing the strength of the unit below a specified unary proportion.</p>
									</td>
								</tr>
								<tr>
									<td>
										<p><strong>3</strong></p>
									</td>
									<td>
										<p><code>boolean</code></p>
									</td>
									<td>
										<p><i>optional, default value=false</i></p>
										<p>Hides the bodies.</p>
									</td>
								</tr>
							</table>

							<h4>Returns:</h4>
							<ol>
								<li><code>nil</code></li>
							</ol>
							<p class="file_comment">defined in ../../Warhammer/working_data/script/_lib/lib_battle_script_unit.lua, line 1656</p>
						</dd>
					</dl>
					<dl class="function">
						<dt>
							<a name="function:script_unit:kill_proportion_over_time"><h3 class="function_name"><strong><code>script_unit:kill_proportion_over_time(number </strong></code><i class="parameter">proportion</i><code><strong>, number </strong></code><i class="parameter">duration</i><code><strong>, [boolean </strong></code><i class="parameter">stop on rout</i><code><strong>])</code></strong></h3></a>
						</dt>
						<dd>
							Kills a unary proportion of this unit over a specified time period in ms.

							<h4>Parameters:</h4>
							<table class="parameter_list">
								<colgroup>
									<col style="width: 3%;">
									<col style="width: 12%;">
									<col style="width: 85%;">
								</colgroup>
								<tr>
									<td>
										<p><strong>1</strong></p>
									</td>
									<td>
										<p><code>number</code></p>
									</td>
									<td>
										<p>Proportion to kill, expressed as a unary value (e.g. 0.5 = 50% of the unit's starting number of soldiers die).</p>
									</td>
								</tr>
								<tr>
									<td>
										<p><strong>2</strong></p>
									</td>
									<td>
										<p><code>number</code></p>
									</td>
									<td>
										<p>Duration in ms over which to kill soldiers.</p>
									</td>
								</tr>
								<tr>
									<td>
										<p><strong>3</strong></p>
									</td>
									<td>
										<p><code>boolean</code></p>
									</td>
									<td>
										<p><i>optional, default value=false</i></p>
										<p>Stops the function from killing any more soldiers if the unit routs during the process.</p>
									</td>
								</tr>
							</table>

							<h4>Returns:</h4>
							<ol>
								<li><code>nil</code></li>
							</ol>
							<p class="file_comment">defined in ../../Warhammer/working_data/script/_lib/lib_battle_script_unit.lua, line 1684</p>
						</dd>
					</dl>
					<dl class="function">
						<dt>
							<a name="function:script_unit:stop_kill_proportion_over_time"><h3 class="function_name"><strong><code>script_unit:stop_kill_proportion_over_time()</code></strong></h3></a>
						</dt>
						<dd>
							Stops a running process started by <code><a href="#function:script_unit:kill_proportion_over_time">script_unit:kill_proportion_over_time</a></code>.


							<h4>Returns:</h4>
							<ol>
								<li><code>nil</code></li>
							</ol>
							<p class="file_comment">defined in ../../Warhammer/working_data/script/_lib/lib_battle_script_unit.lua, line 1737</p>
						</dd>
					</dl>
				</div>


				<div>
					<a style="float:right;" href="#top">Back to top</a>
					<a name="section:script_unit:Enemy Alliance"><h2 class="section_header">Enemy Alliance</h2></a>
				</div>
				<div class="section_body">
					<dl class="function">
						<dt>
							<a name="function:script_unit:get_enemy_alliance_num"><h3 class="function_name"><strong><code>script_unit:get_enemy_alliance_num()</code></strong></h3></a>
						</dt>
						<dd>
							Gets the enemy alliance number.


							<h4>Returns:</h4>
							<ol>
								<li><code><code><a href="lua.html#class:number">number</a></code></code> enemy alliance number</li>
							</ol>
							<p class="file_comment">defined in ../../Warhammer/working_data/script/_lib/lib_battle_script_unit.lua, line 1756</p>
						</dd>
					</dl>
					<dl class="function">
						<dt>
							<a name="function:script_unit:get_enemy_alliance"><h3 class="function_name"><strong><code>script_unit:get_enemy_alliance()</code></strong></h3></a>
						</dt>
						<dd>
							Gets the enemy alliance object.


							<h4>Returns:</h4>
							<ol>
								<li><code><code><a href="battle_alliance.html#class:battle_alliance">battle_alliance</a></code></code> enemy alliance</li>
							</ol>
							<p class="file_comment">defined in ../../Warhammer/working_data/script/_lib/lib_battle_script_unit.lua, line 1764</p>
						</dd>
					</dl>
				</div>


				<div>
					<a style="float:right;" href="#top">Back to top</a>
					<a name="section:script_unit:Highlight Unit Card"><h2 class="section_header">Highlight Unit Card</h2></a>
				</div>
				<div class="section_body">
					<dl class="function">
						<dt>
							<a name="function:script_unit:highlight_unit_card"><h3 class="function_name"><strong><code>script_unit:highlight_unit_card(boolean </strong></code><i class="parameter">should highlight</i><code><strong>, [number </strong></code><i class="parameter">pulse strength</i><code><strong>], [boolean </strong></code><i class="parameter">force highlight</i><code><strong>])</code></strong></h3></a>
						</dt>
						<dd>
							Pulses a highlight effect on the unit card associated with this scriptunit.

							<h4>Parameters:</h4>
							<table class="parameter_list">
								<colgroup>
									<col style="width: 3%;">
									<col style="width: 12%;">
									<col style="width: 85%;">
								</colgroup>
								<tr>
									<td>
										<p><strong>1</strong></p>
									</td>
									<td>
										<p><code>boolean</code></p>
									</td>
									<td>
										<p>Set to <code>true</code> to turn the highlight effect on, <code>false</code> to turn it off.</p>
									</td>
								</tr>
								<tr>
									<td>
										<p><strong>2</strong></p>
									</td>
									<td>
										<p><code>number</code></p>
									</td>
									<td>
										<p><i>optional, default value=5</i></p>
										<p>Sets the strength of the pulse effect. A higher supplied value leads to a more pronounced pulse effect. The default value is 5.</p>
									</td>
								</tr>
								<tr>
									<td>
										<p><strong>3</strong></p>
									</td>
									<td>
										<p><code>boolean</code></p>
									</td>
									<td>
										<p><i>optional, default value=false</i></p>
										<p>Overrides the disabling of help page highlighting with <code><a href="battle_ui_manager.html#function:battle_ui_manager:set_help_page_link_highlighting_permitted">battle_ui_manager:set_help_page_link_highlighting_permitted</a></code>. Set this to true if the script explicitly wants to highlight the UI cards when help page link highlighting is disabled (useful in tutorials).</p>
									</td>
								</tr>
							</table>

							<h4>Returns:</h4>
							<ol>
								<li><code>nil</code></li>
							</ol>
							<p class="file_comment">defined in ../../Warhammer/working_data/script/_lib/lib_battle_script_unit.lua, line 1784</p>
						</dd>
					</dl>
				</div>


				<div>
					<a style="float:right;" href="#top">Back to top</a>
					<a name="section:script_unit:Ping Icons"><h2 class="section_header">Ping Icons</h2></a>
				</div>
				<div class="section_body">
					<dl class="function">
						<dt>
							<a name="function:script_unit:add_ping_icon"><h3 class="function_name"><strong><code>script_unit:add_ping_icon(<br />&emsp;&emsp;[number </strong></code><i class="parameter">icon_type Type of icon to add. This is a numeric index.</i><code><strong>], <br />&emsp;&emsp;[number </strong></code><i class="parameter">duration</i><code><strong>]<br />)</code></strong></h3></a>
						</dt>
						<dd>
							Adds a ping icon above the unit, optionally for a duration.

							<h4>Parameters:</h4>
							<table class="parameter_list">
								<colgroup>
									<col style="width: 3%;">
									<col style="width: 12%;">
									<col style="width: 85%;">
								</colgroup>
								<tr>
									<td>
										<p><strong>1</strong></p>
									</td>
									<td>
										<p><code>number</code></p>
									</td>
									<td>
										<p><i>optional, default value=8</i></p>
										<p>icon_type Type of icon to add. This is a numeric index.</p>
									</td>
								</tr>
								<tr>
									<td>
										<p><strong>2</strong></p>
									</td>
									<td>
										<p><code>number</code></p>
									</td>
									<td>
										<p><i>optional, default value=nil</i></p>
										<p>Duration in ms.</p>
									</td>
								</tr>
							</table>

							<h4>Returns:</h4>
							<ol>
								<li><code>nil</code></li>
							</ol>
							<p class="file_comment">defined in ../../Warhammer/working_data/script/_lib/lib_battle_script_unit.lua, line 1849</p>
						</dd>
					</dl>
					<dl class="function">
						<dt>
							<a name="function:script_unit:remove_ping_icon"><h3 class="function_name"><strong><code>script_unit:remove_ping_icon()</code></strong></h3></a>
						</dt>
						<dd>
							Removes a ping icon from above the unit added with <code><a href="#function:script_unit:add_ping_icon">script_unit:add_ping_icon</a></code>.


							<h4>Returns:</h4>
							<ol>
								<li><code>nil</code></li>
							</ol>
							<p class="file_comment">defined in ../../Warhammer/working_data/script/_lib/lib_battle_script_unit.lua, line 1889</p>
						</dd>
					</dl>
				</div>


				<div>
					<a style="float:right;" href="#top">Back to top</a>
					<a name="section:script_unit:Attack Closest Enemy"><h2 class="section_header">Attack Closest Enemy</h2></a>
				</div>
				<div class="section_body">
					<dl class="function">
						<dt>
							<a name="function:script_unit:start_attack_closest_enemy"><h3 class="function_name"><strong><code>script_unit:start_attack_closest_enemy([<code><a href="lua.html#class:number">number</a></code> </strong></code><i class="parameter">interval</i><code><strong>], [<code><a href="lua.html#class:boolean">boolean</a></code> </strong></code><i class="parameter">debug</i><code><strong>])</code></strong></h3></a>
						</dt>
						<dd>
							Instructs this scriptunit to attack the closest enemy unit under full script control. This process will continually re-acquire the closest enemy target every interval and instruct the unit to attack. The process repeats until the unit is shattered, dead, or until <code><a href="#function:script_unit:stop_attack_closest_enemy">script_unit:stop_attack_closest_enemy</a></code> is called.

							<h4>Parameters:</h4>
							<table class="parameter_list">
								<colgroup>
									<col style="width: 3%;">
									<col style="width: 12%;">
									<col style="width: 85%;">
								</colgroup>
								<tr>
									<td>
										<p><strong>1</strong></p>
									</td>
									<td>
										<p><code><code><a href="lua.html#class:number">number</a></code></code></p>
									</td>
									<td>
										<p><i>optional, default value=10000</i></p>
										<p>Repeating interval in milliseconds after which the scriptunit re-acquires the closest enemy target.</p>
									</td>
								</tr>
								<tr>
									<td>
										<p><strong>2</strong></p>
									</td>
									<td>
										<p><code><code><a href="lua.html#class:boolean">boolean</a></code></code></p>
									</td>
									<td>
										<p><i>optional, default value=false</i></p>
										<p>Shows debug output about what this unit is attacking.</p>
									</td>
								</tr>
							</table>

							<h4>Returns:</h4>
							<ol>
								<li><code>nil</code></li>
							</ol>
							<p class="file_comment">defined in ../../Warhammer/working_data/script/_lib/lib_battle_script_unit.lua, line 1939</p>
						</dd>
					</dl>
					<dl class="function">
						<dt>
							<a name="function:script_unit:stop_attack_closest_enemy"><h3 class="function_name"><strong><code>script_unit:stop_attack_closest_enemy([<code><a href="lua.html#class:string">string</a></code> </strong></code><i class="parameter">reason</i><code><strong>])</code></strong></h3></a>
						</dt>
						<dd>
							Stops any running attack closest enemy process that was started with <code><a href="#function:script_unit:start_attack_closest_enemy">script_unit:start_attack_closest_enemy</a></code>. An optional string reason may be supplied which is printed as debug output.

							<h4>Parameters:</h4>
							<table class="parameter_list">
								<colgroup>
									<col style="width: 3%;">
									<col style="width: 12%;">
									<col style="width: 85%;">
								</colgroup>
								<tr>
									<td>
										<p><strong>1</strong></p>
									</td>
									<td>
										<p><code><code><a href="lua.html#class:string">string</a></code></code></p>
									</td>
									<td>
										<p><i>optional, default value=nil</i></p>
										<p>reason</p>
									</td>
								</tr>
							</table>

							<h4>Returns:</h4>
							<ol>
								<li><code>nil</code></li>
							</ol>
							<p class="file_comment">defined in ../../Warhammer/working_data/script/_lib/lib_battle_script_unit.lua, line 1969</p>
						</dd>
					</dl>
				</div>


				<div>
					<a style="float:right;" href="#top">Back to top</a>
					<a name="section:script_unit:Other Functionality"><h2 class="section_header">Other Functionality</h2></a>
				</div>
				<div class="section_body">

					<h3 class "variable_list">Variables in this section:</h3>
					<p>These variables may be accessed via <code>&lt;interface&gt;.&lt;variable_name&gt;</code>:</p>
					<table class="variable_list">
						<tr>
							<td class="variable_name">
								<a name="variable:script_unit:unit"><strong>unit</strong></a>
							</td>
							<td class="variable_type">
								<code><a href="battle_unit.html#class:battle_unit">battle_unit</a></code>
							</td>
							<td class="description">
								object representing the subject unit.
							</td>
						</tr>
						<tr>
							<td class="variable_name">
								<a name="variable:script_unit:uc"><strong>uc</strong></a>
							</td>
							<td class="variable_type">
								<code><a href="battle_unitcontroller.html#class:battle_unitcontroller">battle_unitcontroller</a></code>
							</td>
							<td class="description">
								unitcontroller object that controls the unit.
							</td>
						</tr>
						<tr>
							<td class="variable_name">
								<a name="variable:script_unit:army_index"><strong>army_index</strong></a>
							</td>
							<td class="variable_type">
								<code><a href="lua.html#class:number">number</a></code>
							</td>
							<td class="description">
								index of army that the unit belongs to.
							</td>
						</tr>
						<tr>
							<td class="variable_name">
								<a name="variable:script_unit:alliance_index"><strong>alliance_index</strong></a>
							</td>
							<td class="variable_type">
								<code><a href="lua.html#class:number">number</a></code>
							</td>
							<td class="description">
								index of alliance that the unit belongs to.
							</td>
						</tr>
						<tr>
							<td class="variable_name">
								<a name="variable:script_unit:start_position"><strong>start_position</strong></a>
							</td>
							<td class="variable_type">
								<code><a href="battle_vector.html#class:battle_vector">battle_vector</a></code>
							</td>
							<td class="description">
								Vector position the unit started the battle at.
							</td>
						</tr>
						<tr>
							<td class="variable_name">
								<a name="variable:script_unit:start_bearing"><strong>start_bearing</strong></a>
							</td>
							<td class="variable_type">
								<code><a href="lua.html#class:number">number</a></code>
							</td>
							<td class="description">
								Bearing in degrees the unit started the battle at.
							</td>
						</tr>
						<tr>
							<td class="variable_name">
								<a name="variable:script_unit:start_width"><strong>start_width</strong></a>
							</td>
							<td class="variable_type">
								<code><a href="lua.html#class:number">number</a></code>
							</td>
							<td class="description">
								Width in m of the unit at the start of the battle.
							</td>
						</tr>
					</table>
				</div>

				<hr class="superblock_divider" />


				<a name="class:script_units"><h1 class="content_header">Scriptunits</h1></a>
				<p>A Scriptunits collection is a container for <code><a href="#class:script_unit">script_unit</a></code> objects. There are a couple of advantages to assembling a script_units collection object instead of just a throwing them into a single table:</p>
				<p><ul><li>The collection object provides additional functionality that can only be provided on a number of scriptunits (e.g. <code><a href="#function:script_units:rout_over_time">script_units:rout_over_time</a></code>).</li></p>
				<p><li>Calls made to the scriptunits collection that are not recognised as function calls on the collection object are instead passed through and that same call is made on each script unit the collection contains. For example, setting a behaviour active on a scriptunits collection sets it active on all the scriptunits within that collection.</li></ul></p>

				<div>
					<a style="float:right;" href="#top">Back to top</a>
					<a name="section:script_units:Declaration"><h2 class="section_header">Declaration</h2></a>
				</div>
				<div class="section_body">
					<dl class="function">
						<dt>
							<a name="function:script_units:new"><h3 class="function_name"><strong><code>script_units:new(string </strong></code><i class="parameter">name</i><code><strong>, ... </strong></code><i class="parameter">scriptunits</i><code><strong>)</code></strong></h3></a>
						</dt>
						<dd>
							Creates a new script units collection.

							<h4>Parameters:</h4>
							<table class="parameter_list">
								<colgroup>
									<col style="width: 3%;">
									<col style="width: 12%;">
									<col style="width: 85%;">
								</colgroup>
								<tr>
									<td>
										<p><strong>1</strong></p>
									</td>
									<td>
										<p><code>string</code></p>
									</td>
									<td>
										<p>Name for this script_units collection. Will be used for debug output.</p>
									</td>
								</tr>
								<tr>
									<td>
										<p><strong>2</strong></p>
									</td>
									<td>
										<p><code>...</code></p>
									</td>
									<td>
										<p>One or more <code><a href="#class:script_unit">script_unit</a></code> objects to add to the collection. Note that a scriptunit can be a member of multiple script_units collections at the same time.</p>
									</td>
								</tr>
							</table>

							<h4>Returns:</h4>
							<ol>
								<li><code>script_units</code> </li>
							</ol>
							<p class="file_comment">defined in ../../Warhammer/working_data/script/_lib/lib_battle_script_unit.lua, line 2098</p>
						</dd>
					</dl>
				</div>


				<div>
					<a style="float:right;" href="#top">Back to top</a>
					<a name="section:script_units:Debug Mode"><h2 class="section_header">Debug Mode</h2></a>
				</div>
				<div class="section_body">
					<dl class="function">
						<dt>
							<a name="function:script_units:set_debug"><h3 class="function_name"><strong><code>script_units:set_debug([boolean </strong></code><i class="parameter">debug mode</i><code><strong>])</code></strong></h3></a>
						</dt>
						<dd>
							Sets the scriptunits collection into debug mode, for more output.

							<h4>Parameters:</h4>
							<table class="parameter_list">
								<colgroup>
									<col style="width: 3%;">
									<col style="width: 12%;">
									<col style="width: 85%;">
								</colgroup>
								<tr>
									<td>
										<p><strong>1</strong></p>
									</td>
									<td>
										<p><code>boolean</code></p>
									</td>
									<td>
										<p><i>optional, default value=true</i></p>
										<p>debug mode</p>
									</td>
								</tr>
							</table>

							<h4>Returns:</h4>
							<ol>
								<li><code>nil</code></li>
							</ol>
							<p class="file_comment">defined in ../../Warhammer/working_data/script/_lib/lib_battle_script_unit.lua, line 2139</p>
						</dd>
					</dl>
				</div>


				<div>
					<a style="float:right;" href="#top">Back to top</a>
					<a name="section:script_units:Adding and Removing Scriptunits"><h2 class="section_header">Adding and Removing Scriptunits</h2></a>
				</div>
				<div class="section_body">
					<dl class="function">
						<dt>
							<a name="function:script_units:add_sunits"><h3 class="function_name"><strong><code>script_units:add_sunits(... </strong></code><i class="parameter">additional script units</i><code><strong>)</code></strong></h3></a>
						</dt>
						<dd>
							Adds one or more supplied <code><a href="#class:script_unit">script_unit</a></code> objects to this scriptunits collection.

							<h4>Parameters:</h4>
							<table class="parameter_list">
								<colgroup>
									<col style="width: 3%;">
									<col style="width: 12%;">
									<col style="width: 85%;">
								</colgroup>
								<tr>
									<td>
										<p><strong>1</strong></p>
									</td>
									<td>
										<p><code>...</code></p>
									</td>
									<td>
										<p>additional script units</p>
									</td>
								</tr>
							</table>

							<h4>Returns:</h4>
							<ol>
								<li><code>nil</code></li>
							</ol>
							<p class="file_comment">defined in ../../Warhammer/working_data/script/_lib/lib_battle_script_unit.lua, line 2162</p>
						</dd>
					</dl>
					<dl class="function">
						<dt>
							<a name="function:script_units:merge"><h3 class="function_name"><strong><code>script_units:merge(<code><a href="#class:script_units">script_units</a></code> </strong></code><i class="parameter">other script units</i><code><strong>)</code></strong></h3></a>
						</dt>
						<dd>
							Copies all <code><a href="#class:script_unit">script_unit</a></code> objects associated with a supplied <code><a href="#class:script_units">script_units</a></code> collection into this script units collection.

							<h4>Parameters:</h4>
							<table class="parameter_list">
								<colgroup>
									<col style="width: 3%;">
									<col style="width: 12%;">
									<col style="width: 85%;">
								</colgroup>
								<tr>
									<td>
										<p><strong>1</strong></p>
									</td>
									<td>
										<p><code><code><a href="#class:script_units">script_units</a></code></code></p>
									</td>
									<td>
										<p>other script units</p>
									</td>
								</tr>
							</table>

							<h4>Returns:</h4>
							<ol>
								<li><code>nil</code></li>
							</ol>
							<p class="file_comment">defined in ../../Warhammer/working_data/script/_lib/lib_battle_script_unit.lua, line 2206</p>
						</dd>
					</dl>
					<dl class="function">
						<dt>
							<a name="function:script_units:remove_sunit"><h3 class="function_name"><strong><code>script_units:remove_sunit(script_unit </strong></code><i class="parameter">scriptunit to remove</i><code><strong>)</code></strong></h3></a>
						</dt>
						<dd>
							Removes a supplied <code><a href="#class:script_unit">script_unit</a></code> object from this scriptunits collection.

							<h4>Parameters:</h4>
							<table class="parameter_list">
								<colgroup>
									<col style="width: 3%;">
									<col style="width: 12%;">
									<col style="width: 85%;">
								</colgroup>
								<tr>
									<td>
										<p><strong>1</strong></p>
									</td>
									<td>
										<p><code>script_unit</code></p>
									</td>
									<td>
										<p>scriptunit to remove</p>
									</td>
								</tr>
							</table>

							<h4>Returns:</h4>
							<ol>
								<li><code>nil</code></li>
							</ol>
							<p class="file_comment">defined in ../../Warhammer/working_data/script/_lib/lib_battle_script_unit.lua, line 2218</p>
						</dd>
					</dl>
					<dl class="function">
						<dt>
							<a name="function:script_units:remove_sunits"><h3 class="function_name"><strong><code>script_units:remove_sunits(... </strong></code><i class="parameter">script_unit list</i><code><strong>)</code></strong></h3></a>
						</dt>
						<dd>
							Removes one or more supplied <code><a href="#class:script_unit">script_unit</a></code> objects from this scriptunits collection.

							<h4>Parameters:</h4>
							<table class="parameter_list">
								<colgroup>
									<col style="width: 3%;">
									<col style="width: 12%;">
									<col style="width: 85%;">
								</colgroup>
								<tr>
									<td>
										<p><strong>1</strong></p>
									</td>
									<td>
										<p><code>...</code></p>
									</td>
									<td>
										<p>scriptunits to remove</p>
									</td>
								</tr>
							</table>

							<h4>Returns:</h4>
							<ol>
								<li><code>nil</code></li>
							</ol>
							<p class="file_comment">defined in ../../Warhammer/working_data/script/_lib/lib_battle_script_unit.lua, line 2238</p>
						</dd>
					</dl>
				</div>


				<div>
					<a style="float:right;" href="#top">Back to top</a>
					<a name="section:script_units:Querying"><h2 class="section_header">Querying</h2></a>
				</div>
				<div class="section_body">
					<dl class="function">
						<dt>
							<a name="function:script_units:get_sunit_by_name"><h3 class="function_name"><strong><code>script_units:get_sunit_by_name(value </strong></code><i class="parameter">reference</i><code><strong>)</code></strong></h3></a>
						</dt>
						<dd>
							Returns a <code><a href="#class:script_unit">script_unit</a></code> from this script_units collection that matches the supplied reference <code><a href="lua.html#class:number">number</a></code> or <code><a href="lua.html#class:string">string</a></code>. <code><a href="lua.html#class:nil">nil</a></code> is returned if no matching script_unit is found.

							<h4>Parameters:</h4>
							<table class="parameter_list">
								<colgroup>
									<col style="width: 3%;">
									<col style="width: 12%;">
									<col style="width: 85%;">
								</colgroup>
								<tr>
									<td>
										<p><strong>1</strong></p>
									</td>
									<td>
										<p><code>value</code></p>
									</td>
									<td>
										<p>Reference <code><a href="lua.html#class:number">number</a></code> or <code><a href="lua.html#class:string">string</a></code>.</p>
									</td>
								</tr>
							</table>

							<h4>Returns:</h4>
							<ol>
								<li><code><code><a href="#class:script_unit">script_unit</a></code></code> matching name, or <code><a href="lua.html#class:nil">nil</a></code></li>
							</ol>
							<p class="file_comment">defined in ../../Warhammer/working_data/script/_lib/lib_battle_script_unit.lua, line 2287</p>
						</dd>
					</dl>
					<dl class="function">
						<dt>
							<a name="function:script_units:get_sunit_for_unit"><h3 class="function_name"><strong><code>script_units:get_sunit_for_unit(<code><a href="battle_unit.html#class:battle_unit">battle_unit</a></code> </strong></code><i class="parameter">unit</i><code><strong>)</code></strong></h3></a>
						</dt>
						<dd>
							Returns a <code><a href="#class:script_unit">script_unit</a></code> from this script_units collection that contains the supplied <code><a href="battle_unit.html#class:battle_unit">battle_unit</a></code>. <code><a href="lua.html#class:nil">nil</a></code> is returned if no matching script_unit is found.

							<h4>Parameters:</h4>
							<table class="parameter_list">
								<colgroup>
									<col style="width: 3%;">
									<col style="width: 12%;">
									<col style="width: 85%;">
								</colgroup>
								<tr>
									<td>
										<p><strong>1</strong></p>
									</td>
									<td>
										<p><code><code><a href="battle_unit.html#class:battle_unit">battle_unit</a></code></code></p>
									</td>
									<td>
										<p>unit</p>
									</td>
								</tr>
							</table>

							<h4>Returns:</h4>
							<ol>
								<li><code><code><a href="#class:script_unit">script_unit</a></code></code> matching unit, or <code><a href="lua.html#class:nil">nil</a></code></li>
							</ol>
							<p class="file_comment">defined in ../../Warhammer/working_data/script/_lib/lib_battle_script_unit.lua, line 2301</p>
						</dd>
					</dl>
					<dl class="function">
						<dt>
							<a name="function:script_units:get_sunit_by_type"><h3 class="function_name"><strong><code>script_units:get_sunit_by_type(<code><a href="lua.html#class:string">string</a></code> </strong></code><i class="parameter">unit type</i><code><strong>)</code></strong></h3></a>
						</dt>
						<dd>
							Returns the first <code><a href="#class:script_unit">script_unit</a></code> in this script_units collection that contains a <code><a href="battle_unit.html#class:battle_unit">battle_unit</a></code> of the supplied type. <code><a href="lua.html#class:nil">nil</a></code> is returned if no matching script_unit is found.

							<h4>Parameters:</h4>
							<table class="parameter_list">
								<colgroup>
									<col style="width: 3%;">
									<col style="width: 12%;">
									<col style="width: 85%;">
								</colgroup>
								<tr>
									<td>
										<p><strong>1</strong></p>
									</td>
									<td>
										<p><code><code><a href="lua.html#class:string">string</a></code></code></p>
									</td>
									<td>
										<p>Unit type, from the <code>main_units</code> table.</p>
									</td>
								</tr>
							</table>

							<h4>Returns:</h4>
							<ol>
								<li><code><code><a href="#class:script_unit">script_unit</a></code></code> matching unit, or <code><a href="lua.html#class:nil">nil</a></code></li>
							</ol>
							<p class="file_comment">defined in ../../Warhammer/working_data/script/_lib/lib_battle_script_unit.lua, line 2315</p>
						</dd>
					</dl>
					<dl class="function">
						<dt>
							<a name="function:script_units:count"><h3 class="function_name"><strong><code>script_units:count()</code></strong></h3></a>
						</dt>
						<dd>
							Returns the number of <code><a href="#class:script_unit">script_unit</a></code> objects in this script_units collection.


							<h4>Returns:</h4>
							<ol>
								<li><code><code><a href="lua.html#class:number">number</a></code></code> number of units</li>
							</ol>
							<p class="file_comment">defined in ../../Warhammer/working_data/script/_lib/lib_battle_script_unit.lua, line 2329</p>
						</dd>
					</dl>
					<dl class="function">
						<dt>
							<a name="function:script_units:item"><h3 class="function_name"><strong><code>script_units:item(<code><a href="lua.html#class:number">number</a></code> </strong></code><i class="parameter">index value</i><code><strong>)</code></strong></h3></a>
						</dt>
						<dd>
							Returns the <code><a href="#class:script_unit">script_unit</a></code> in this collection at the supplied index.

							<h4>Parameters:</h4>
							<table class="parameter_list">
								<colgroup>
									<col style="width: 3%;">
									<col style="width: 12%;">
									<col style="width: 85%;">
								</colgroup>
								<tr>
									<td>
										<p><strong>1</strong></p>
									</td>
									<td>
										<p><code><code><a href="lua.html#class:number">number</a></code></code></p>
									</td>
									<td>
										<p>index value</p>
									</td>
								</tr>
							</table>

							<h4>Returns:</h4>
							<ol>
								<li><code><code><a href="#class:script_unit">script_unit</a></code></code> </li>
							</ol>
							<p class="file_comment">defined in ../../Warhammer/working_data/script/_lib/lib_battle_script_unit.lua, line 2337</p>
						</dd>
					</dl>
					<dl class="function">
						<dt>
							<a name="function:script_units:contains"><h3 class="function_name"><strong><code>script_units:contains(object </strong></code><i class="parameter">object</i><code><strong>)</code></strong></h3></a>
						</dt>
						<dd>
							Returns whether the script units collection contains the supplied object. Supported object types are <code><a href="#class:script_unit">script_unit</a></code>, <code><a href="battle_unit.html#class:battle_unit">battle_unit</a></code> and <code><a href="battle_unitcontroller.html#class:battle_unitcontroller">battle_unitcontroller</a></code>.

							<h4>Parameters:</h4>
							<table class="parameter_list">
								<colgroup>
									<col style="width: 3%;">
									<col style="width: 12%;">
									<col style="width: 85%;">
								</colgroup>
								<tr>
									<td>
										<p><strong>1</strong></p>
									</td>
									<td>
										<p><code>object</code></p>
									</td>
									<td>
										<p>Object to test - supported types are <code><a href="#class:script_unit">script_unit</a></code>, <code><a href="battle_unit.html#class:battle_unit">battle_unit</a></code> and <code><a href="battle_unitcontroller.html#class:battle_unitcontroller">battle_unitcontroller</a></code>.</p>
									</td>
								</tr>
							</table>

							<h4>Returns:</h4>
							<ol>
								<li><code><code><a href="#class:script_unit">script_unit</a></code></code> </li>
							</ol>
							<p class="file_comment">defined in ../../Warhammer/working_data/script/_lib/lib_battle_script_unit.lua, line 2353</p>
						</dd>
					</dl>
					<dl class="function">
						<dt>
							<a name="function:script_units:get_sunit_table"><h3 class="function_name"><strong><code>script_units:get_sunit_table()</code></strong></h3></a>
						</dt>
						<dd>
							Returns the internal table containing all the <code><a href="#class:script_unit">script_unit</a></code> objects in this <code><a href="#class:script_units">script_units</a></code> collection. Be aware that modifications to this table will also modify this script_units object.


							<h4>Returns:</h4>
							<ol>
								<li><code><code><a href="lua.html#class:table">table</a></code></code> of script_unit objects</li>
							</ol>
							<p class="file_comment">defined in ../../Warhammer/working_data/script/_lib/lib_battle_script_unit.lua, line 2387</p>
						</dd>
					</dl>
					<dl class="function">
						<dt>
							<a name="function:script_units:get_unit_table"><h3 class="function_name"><strong><code>script_units:get_unit_table()</code></strong></h3></a>
						</dt>
						<dd>
							Returns a table containing all <code><a href="battle_unit.html#class:battle_unit">battle_unit</a></code> objects contained within this <code><a href="#class:script_units">script_units</a></code> collection. The table that's returned is built each time this function is called, so be wary of calling this function too often.


							<h4>Returns:</h4>
							<ol>
								<li><code><code><a href="lua.html#class:table">table</a></code></code> of <code><a href="battle_unit.html#class:battle_unit">battle_unit</a></code> objects</li>
							</ol>
							<p class="file_comment">defined in ../../Warhammer/working_data/script/_lib/lib_battle_script_unit.lua, line 2395</p>
						</dd>
					</dl>
					<dl class="function">
						<dt>
							<a name="function:script_units:filter"><h3 class="function_name"><strong><code>script_units:filter(<code><a href="lua.html#class:string">string</a></code> </strong></code><i class="parameter">name</i><code><strong>, <code><a href="lua.html#class:function">function</a></code> </strong></code><i class="parameter">test</i><code><strong>, [<code><a href="lua.html#class:boolean">boolean</a></code> </strong></code><i class="parameter">assert if empty</i><code><strong>], [<code><a href="lua.html#class:number">number</a></code> </strong></code><i class="parameter">max size</i><code><strong>])</code></strong></h3></a>
						</dt>
						<dd>
							Returns another scriptunits collection containing all <code><a href="#class:script_unit">script_unit</a></code> objects from the subject collection that pass the supplied test. The test should be supplied as a function that takes a scriptunit parameter and returns a boolean value. Should a call to the function with a specific scriptunit return true, that scriptunit will be added to the returned collection.

							<h4>Parameters:</h4>
							<table class="parameter_list">
								<colgroup>
									<col style="width: 3%;">
									<col style="width: 12%;">
									<col style="width: 85%;">
								</colgroup>
								<tr>
									<td>
										<p><strong>1</strong></p>
									</td>
									<td>
										<p><code><code><a href="lua.html#class:string">string</a></code></code></p>
									</td>
									<td>
										<p>Name for the returned scriptunits collection</p>
									</td>
								</tr>
								<tr>
									<td>
										<p><strong>2</strong></p>
									</td>
									<td>
										<p><code><code><a href="lua.html#class:function">function</a></code></code></p>
									</td>
									<td>
										<p>Function that takes a scriptunit parameter and returns a boolean value.</p>
									</td>
								</tr>
								<tr>
									<td>
										<p><strong>3</strong></p>
									</td>
									<td>
										<p><code><code><a href="lua.html#class:boolean">boolean</a></code></code></p>
									</td>
									<td>
										<p><i>optional, default value=false</i></p>
										<p>If set to true, <code>filter</code> triggers a script assert if the returned collection is empty.</p>
									</td>
								</tr>
								<tr>
									<td>
										<p><strong>4</strong></p>
									</td>
									<td>
										<p><code><code><a href="lua.html#class:number">number</a></code></code></p>
									</td>
									<td>
										<p><i>optional, default value=nil</i></p>
										<p>Maximum number of units to add to the returned scriptunit collection.</p>
									</td>
								</tr>
							</table>

							<h4>Returns:</h4>
							<ol>
								<li><code><code><a href="#class:script_units">script_units</a></code></code> filtered scriptunits collection</li>
							</ol>
							<p class="file_comment">defined in ../../Warhammer/working_data/script/_lib/lib_battle_script_unit.lua, line 2409</p>
						</dd>
					</dl>
					<dl class="function">
						<dt>
							<a name="function:script_units:sort"><h3 class="function_name"><strong><code>script_units:sort(<code><a href="lua.html#class:function">function</a></code> </strong></code><i class="parameter">filter function</i><code><strong>)</code></strong></h3></a>
						</dt>
						<dd>
							Sorts the internal list of <code><a href="#class:script_unit">script_unit</a></code> objects based on the supplied filter function. The filter function should take two <code><a href="#class:script_unit">script_unit</a></code> arguments and return <code>true</code> if the first should be sorted before the second, and <code>false</code> otherwise. <code><a href="lua.html#function:table:sort">table:sort</a></code> is used to perform the operation.

							<h4>Parameters:</h4>
							<table class="parameter_list">
								<colgroup>
									<col style="width: 3%;">
									<col style="width: 12%;">
									<col style="width: 85%;">
								</colgroup>
								<tr>
									<td>
										<p><strong>1</strong></p>
									</td>
									<td>
										<p><code><code><a href="lua.html#class:function">function</a></code></code></p>
									</td>
									<td>
										<p>filter function</p>
									</td>
								</tr>
							</table>

							<h4>Returns:</h4>
							<ol>
								<li><code>nil</code></li>
							</ol>
							<p class="file_comment">defined in ../../Warhammer/working_data/script/_lib/lib_battle_script_unit.lua, line 2450</p>
						</dd>
					</dl>
					<dl class="function">
						<dt>
							<a name="function:script_units:out"><h3 class="function_name"><strong><code>script_units:out()</code></strong></h3></a>
						</dt>
						<dd>
							Prints the list of <code><a href="#class:script_unit">script_unit</a></code> objects this collection contains to the debug console spool.


							<h4>Returns:</h4>
							<ol>
								<li><code>nil</code></li>
							</ol>
							<p class="file_comment">defined in ../../Warhammer/working_data/script/_lib/lib_battle_script_unit.lua, line 2462</p>
						</dd>
					</dl>
					<dl class="function">
						<dt>
							<a name="function:script_units:duplicate"><h3 class="function_name"><strong><code>script_units:duplicate(<code><a href="lua.html#class:string">string</a></code> </strong></code><i class="parameter">name</i><code><strong>)</code></strong></h3></a>
						</dt>
						<dd>
							Returns a duplicate <code><a href="#class:script_units">script_units</a></code> collection with the supplied name.

							<h4>Parameters:</h4>
							<table class="parameter_list">
								<colgroup>
									<col style="width: 3%;">
									<col style="width: 12%;">
									<col style="width: 85%;">
								</colgroup>
								<tr>
									<td>
										<p><strong>1</strong></p>
									</td>
									<td>
										<p><code><code><a href="lua.html#class:string">string</a></code></code></p>
									</td>
									<td>
										<p>name</p>
									</td>
								</tr>
							</table>

							<h4>Returns:</h4>
							<ol>
								<li><code><code><a href="#class:script_units">script_units</a></code></code> duplicate collection</li>
							</ol>
							<p class="file_comment">defined in ../../Warhammer/working_data/script/_lib/lib_battle_script_unit.lua, line 2477</p>
						</dd>
					</dl>
					<dl class="function">
						<dt>
							<a name="function:script_units:get_unitcontroller"><h3 class="function_name"><strong><code>script_units:get_unitcontroller([<code><a href="battle_army.html#class:battle_army">battle_army</a></code> </strong></code><i class="parameter">army</i><code><strong>])</code></strong></h3></a>
						</dt>
						<dd>
							Returns a unitcontroller with control over all the units this <code><a href="#class:script_units">script_units</a></code> collection contains.

							<h4>Parameters:</h4>
							<table class="parameter_list">
								<colgroup>
									<col style="width: 3%;">
									<col style="width: 12%;">
									<col style="width: 85%;">
								</colgroup>
								<tr>
									<td>
										<p><strong>1</strong></p>
									</td>
									<td>
										<p><code><code><a href="battle_army.html#class:battle_army">battle_army</a></code></code></p>
									</td>
									<td>
										<p><i>optional, default value=nil</i></p>
										<p>If an army is supplied here, the function will only add units that belong to that army and ignore any that don't.</p>
										<p>If no army is supplied, the function assumes that all units in the scriptunits collection are in the same army, and will assert if any aren't.</p>
									</td>
								</tr>
							</table>

							<h4>Returns:</h4>
							<ol>
								<li><code><code><a href="battle_unitcontroller.html#class:battle_unitcontroller">battle_unitcontroller</a></code></code> unitcontroller</li>
							</ol>
							<p class="file_comment">defined in ../../Warhammer/working_data/script/_lib/lib_battle_script_unit.lua, line 2501</p>
						</dd>
					</dl>
					<dl class="function">
						<dt>
							<a name="function:script_units:num_generals"><h3 class="function_name"><strong><code>script_units:num_generals()</code></strong></h3></a>
						</dt>
						<dd>
							Returns the number of commanding general units the scriptunits collection contains.


							<h4>Returns:</h4>
							<ol>
								<li><code><code><a href="lua.html#class:number">number</a></code></code> number of generals</li>
							</ol>
							<p class="file_comment">defined in ../../Warhammer/working_data/script/_lib/lib_battle_script_unit.lua, line 2538</p>
						</dd>
					</dl>
					<dl class="function">
						<dt>
							<a name="function:script_units:get_general_sunit"><h3 class="function_name"><strong><code>script_units:get_general_sunit([<code><a href="lua.html#class:number">number</a></code> </strong></code><i class="parameter">general index</i><code><strong>])</code></strong></h3></a>
						</dt>
						<dd>
							Returns a commanding general scriptunit from the scriptunits collection. By default the first general scriptunit is returned. An index value may be given to specify a particular general to return.

							<h4>Parameters:</h4>
							<table class="parameter_list">
								<colgroup>
									<col style="width: 3%;">
									<col style="width: 12%;">
									<col style="width: 85%;">
								</colgroup>
								<tr>
									<td>
										<p><strong>1</strong></p>
									</td>
									<td>
										<p><code><code><a href="lua.html#class:number">number</a></code></code></p>
									</td>
									<td>
										<p><i>optional, default value=1</i></p>
										<p>general index</p>
									</td>
								</tr>
							</table>

							<h4>Returns:</h4>
							<ol>
								<li><code><code><a href="#class:script_unit">script_unit</a></code></code> number of generals</li>
							</ol>
							<p class="file_comment">defined in ../../Warhammer/working_data/script/_lib/lib_battle_script_unit.lua, line 2552</p>
						</dd>
					</dl>
				</div>


				<div>
					<a style="float:right;" href="#top">Back to top</a>
					<a name="section:script_units:Position Tests"><h2 class="section_header">Position Tests</h2></a>
				</div>
				<div class="section_body">
					<dl class="function">
						<dt>
							<a name="function:script_units:centre_point"><h3 class="function_name"><strong><code>script_units:centre_point()</code></strong></h3></a>
						</dt>
						<dd>
							Returns a vector corresponding to the mean centre position of all the <code><a href="#class:script_unit">script_unit</a></code> objects in the collection.


							<h4>Returns:</h4>
							<ol>
								<li><code><code><a href="battle_vector.html#class:battle_vector">battle_vector</a></code></code> centre position</li>
							</ol>
							<p class="file_comment">defined in ../../Warhammer/working_data/script/_lib/lib_battle_script_unit.lua, line 2590</p>
						</dd>
					</dl>
					<dl class="function">
						<dt>
							<a name="function:script_units:radius"><h3 class="function_name"><strong><code>script_units:radius()</code></strong></h3></a>
						</dt>
						<dd>
							Returns the distance from the furthest unit from the centre, to the centre, which is an indication of how spread out the units in this collection are.


							<h4>Returns:</h4>
							<ol>
								<li><code><code><a href="lua.html#class:number">number</a></code></code> radius</li>
							</ol>
							<p class="file_comment">defined in ../../Warhammer/working_data/script/_lib/lib_battle_script_unit.lua, line 2598</p>
						</dd>
					</dl>
					<dl class="function">
						<dt>
							<a name="function:script_units:width"><h3 class="function_name"><strong><code>script_units:width()</code></strong></h3></a>
						</dt>
						<dd>
							Returns the current cumulative width of all units in the collection in metres.


							<h4>Returns:</h4>
							<ol>
								<li><code><code><a href="lua.html#class:number">number</a></code></code> combined width</li>
							</ol>
							<p class="file_comment">defined in ../../Warhammer/working_data/script/_lib/lib_battle_script_unit.lua, line 2618</p>
						</dd>
					</dl>
					<dl class="function">
						<dt>
							<a name="function:script_units:average_bearing"><h3 class="function_name"><strong><code>script_units:average_bearing()</code></strong></h3></a>
						</dt>
						<dd>
							Returns the average ordered bearing of all units in the collection, in degrees.


							<h4>Returns:</h4>
							<ol>
								<li><code><code><a href="lua.html#class:number">number</a></code></code> average bearing</li>
							</ol>
							<p class="file_comment">defined in ../../Warhammer/working_data/script/_lib/lib_battle_script_unit.lua, line 2630</p>
						</dd>
					</dl>
					<dl class="function">
						<dt>
							<a name="function:script_units:get_northernmost"><h3 class="function_name"><strong><code>script_units:get_northernmost()</code></strong></h3></a>
						</dt>
						<dd>
							Returns the northern-most <code><a href="#class:script_unit">script_unit</a></code>.


							<h4>Returns:</h4>
							<ol>
								<li><code>script_unit</code> </li>
							</ol>
							<p class="file_comment">defined in ../../Warhammer/working_data/script/_lib/lib_battle_script_unit.lua, line 2646</p>
						</dd>
					</dl>
					<dl class="function">
						<dt>
							<a name="function:script_units:get_southernmost"><h3 class="function_name"><strong><code>script_units:get_southernmost()</code></strong></h3></a>
						</dt>
						<dd>
							Returns the southern-most <code><a href="#class:script_unit">script_unit</a></code>.


							<h4>Returns:</h4>
							<ol>
								<li><code>script_unit</code> </li>
							</ol>
							<p class="file_comment">defined in ../../Warhammer/working_data/script/_lib/lib_battle_script_unit.lua, line 2665</p>
						</dd>
					</dl>
					<dl class="function">
						<dt>
							<a name="function:script_units:get_westernmost"><h3 class="function_name"><strong><code>script_units:get_westernmost()</code></strong></h3></a>
						</dt>
						<dd>
							Returns the western-most <code><a href="#class:script_unit">script_unit</a></code>.


							<h4>Returns:</h4>
							<ol>
								<li><code>script_unit</code> </li>
							</ol>
							<p class="file_comment">defined in ../../Warhammer/working_data/script/_lib/lib_battle_script_unit.lua, line 2684</p>
						</dd>
					</dl>
					<dl class="function">
						<dt>
							<a name="function:script_units:get_easternmost"><h3 class="function_name"><strong><code>script_units:get_easternmost()</code></strong></h3></a>
						</dt>
						<dd>
							Returns the eastern-most <code><a href="#class:script_unit">script_unit</a></code>.


							<h4>Returns:</h4>
							<ol>
								<li><code>script_unit</code> </li>
							</ol>
							<p class="file_comment">defined in ../../Warhammer/working_data/script/_lib/lib_battle_script_unit.lua, line 2703</p>
						</dd>
					</dl>
					<dl class="function">
						<dt>
							<a name="function:script_units:get_closest"><h3 class="function_name"><strong><code>script_units:get_closest(object </strong></code><i class="parameter">position collection</i><code><strong>, [2d </strong></code><i class="parameter">only</i><code><strong>])</code></strong></h3></a>
						</dt>
						<dd>
							Returns the closest <code><a href="#class:script_unit">script_unit</a></code> in this collection to the supplied collection of units/positions, as well as the distance in m.

							<h4>Parameters:</h4>
							<table class="parameter_list">
								<colgroup>
									<col style="width: 3%;">
									<col style="width: 12%;">
									<col style="width: 85%;">
								</colgroup>
								<tr>
									<td>
										<p><strong>1</strong></p>
									</td>
									<td>
										<p><code>object</code></p>
									</td>
									<td>
										<p>Position object or collection. Supported object types are vector, unit, <code><a href="#class:script_unit">script_unit</a></code>, units, <code><a href="#class:script_units">script_units</a></code>, army, armies, alliance or table.</p>
									</td>
								</tr>
								<tr>
									<td>
										<p><strong>2</strong></p>
									</td>
									<td>
										<p><code>2d</code></p>
									</td>
									<td>
										<p><i>optional, default value=false</i></p>
										<p>consider 2D distance only (disregarding altitude)</p>
									</td>
								</tr>
							</table>

							<h4>Returns:</h4>
							<ol>
								<li><code>script_unit</code> closest scriptunit</li>
								<li><code>distance</code> distance of closest scriptunit in m</li>
								<li><code>object</code> closest foreign object from the supplied object - either a <code><a href="battle_vector.html#class:battle_vector">battle_vector</a></code>, a <code><a href="battle_unit.html#class:battle_unit">battle_unit</a></code> or a <code><a href="#class:script_unit">script_unit</a></code>, depending upon the container type.</li>
							</ol>
							<p class="file_comment">defined in ../../Warhammer/working_data/script/_lib/lib_battle_script_unit.lua, line 2722</p>
						</dd>
					</dl>
					<dl class="function">
						<dt>
							<a name="function:script_units:get_furthest"><h3 class="function_name"><strong><code>script_units:get_furthest(object </strong></code><i class="parameter">position collection</i><code><strong>, [2d </strong></code><i class="parameter">only</i><code><strong>])</code></strong></h3></a>
						</dt>
						<dd>
							Returns the furthest <code><a href="#class:script_unit">script_unit</a></code> in this collection from the supplied collection of units/positions, as well as the distance in m.

							<h4>Parameters:</h4>
							<table class="parameter_list">
								<colgroup>
									<col style="width: 3%;">
									<col style="width: 12%;">
									<col style="width: 85%;">
								</colgroup>
								<tr>
									<td>
										<p><strong>1</strong></p>
									</td>
									<td>
										<p><code>object</code></p>
									</td>
									<td>
										<p>Position object or collection. Supported object types are <code><a href="battle_vector.html#class:battle_vector">battle_vector</a></code>, <code><a href="battle_unit.html#class:battle_unit">battle_unit</a></code>, <code><a href="#class:script_unit">script_unit</a></code>, <code><a href="battle_units.html#class:battle_units">battle_units</a></code>, <code><a href="#class:script_units">script_units</a></code>, <code><a href="battle_army.html#class:battle_army">battle_army</a></code>, <code><a href="battle_armies.html#class:battle_armies">battle_armies</a></code>, <code><a href="battle_alliance.html#class:battle_alliance">battle_alliance</a></code> or <code><a href="lua.html#class:table">table</a></code>.</p>
									</td>
								</tr>
								<tr>
									<td>
										<p><strong>2</strong></p>
									</td>
									<td>
										<p><code>2d</code></p>
									</td>
									<td>
										<p><i>optional, default value=false</i></p>
										<p>consider 2D distance only (disregarding altitude)</p>
									</td>
								</tr>
							</table>

							<h4>Returns:</h4>
							<ol>
								<li><code>script_unit</code> furthest scriptunit</li>
								<li><code>distance</code> distance of furthest scriptunit in m</li>
							</ol>
							<p class="file_comment">defined in ../../Warhammer/working_data/script/_lib/lib_battle_script_unit.lua, line 2818</p>
						</dd>
					</dl>
					<dl class="function">
						<dt>
							<a name="function:script_units:get_centremost"><h3 class="function_name"><strong><code>script_units:get_centremost()</code></strong></h3></a>
						</dt>
						<dd>
							Returns the <code><a href="#class:script_unit">script_unit</a></code> in the collection that is closest to the calculated centre.


							<h4>Returns:</h4>
							<ol>
								<li><code><code><a href="#class:script_unit">script_unit</a></code></code> </li>
							</ol>
							<p class="file_comment">defined in ../../Warhammer/working_data/script/_lib/lib_battle_script_unit.lua, line 2904</p>
						</dd>
					</dl>
					<dl class="function">
						<dt>
							<a name="function:script_units:get_outlying"><h3 class="function_name"><strong><code>script_units:get_outlying()</code></strong></h3></a>
						</dt>
						<dd>
							Returns the furthest <code><a href="#class:script_unit">script_unit</a></code> in this collection from the mean centre.


							<h4>Returns:</h4>
							<ol>
								<li><code>script_unit</code> </li>
							</ol>
							<p class="file_comment">defined in ../../Warhammer/working_data/script/_lib/lib_battle_script_unit.lua, line 2912</p>
						</dd>
					</dl>
				</div>


				<div>
					<a style="float:right;" href="#top">Back to top</a>
					<a name="section:script_units:Morale"><h2 class="section_header">Morale</h2></a>
				</div>
				<div class="section_body">
					<dl class="function">
						<dt>
							<a name="function:script_units:are_any_routing_or_dead"><h3 class="function_name"><strong><code>script_units:are_any_routing_or_dead([boolean </strong></code><i class="parameter">shattered only</i><code><strong>], [boolean </strong></code><i class="parameter">permit rampaging</i><code><strong>])</code></strong></h3></a>
						</dt>
						<dd>
							Returns <code>true</code> if any unit in this scriptunits collection is routing or dead, or <code>false</code> otherwise.

							<h4>Parameters:</h4>
							<table class="parameter_list">
								<colgroup>
									<col style="width: 3%;">
									<col style="width: 12%;">
									<col style="width: 85%;">
								</colgroup>
								<tr>
									<td>
										<p><strong>1</strong></p>
									</td>
									<td>
										<p><code>boolean</code></p>
									</td>
									<td>
										<p><i>optional, default value=false</i></p>
										<p>Only count shattered units.</p>
									</td>
								</tr>
								<tr>
									<td>
										<p><strong>2</strong></p>
									</td>
									<td>
										<p><code>boolean</code></p>
									</td>
									<td>
										<p><i>optional, default value=false</i></p>
										<p>Don't automatically count rampaging units, check if they are actually routing too.</p>
									</td>
								</tr>
							</table>

							<h4>Returns:</h4>
							<ol>
								<li><code>nil</code></li>
							</ol>
							<p class="file_comment">defined in ../../Warhammer/working_data/script/_lib/lib_battle_script_unit.lua, line 2965</p>
						</dd>
					</dl>
					<dl class="function">
						<dt>
							<a name="function:script_units:are_all_routing_or_dead"><h3 class="function_name"><strong><code>script_units:are_all_routing_or_dead([boolean </strong></code><i class="parameter">shattered only</i><code><strong>], [boolean </strong></code><i class="parameter">permit rampaging</i><code><strong>])</code></strong></h3></a>
						</dt>
						<dd>
							Returns <code>true</code> if all units in this scriptunits collection are routing or dead, or <code>false</code> otherwise.

							<h4>Parameters:</h4>
							<table class="parameter_list">
								<colgroup>
									<col style="width: 3%;">
									<col style="width: 12%;">
									<col style="width: 85%;">
								</colgroup>
								<tr>
									<td>
										<p><strong>1</strong></p>
									</td>
									<td>
										<p><code>boolean</code></p>
									</td>
									<td>
										<p><i>optional, default value=false</i></p>
										<p>Only count shattered units.</p>
									</td>
								</tr>
								<tr>
									<td>
										<p><strong>2</strong></p>
									</td>
									<td>
										<p><code>boolean</code></p>
									</td>
									<td>
										<p><i>optional, default value=false</i></p>
										<p>Don't automatically count rampaging units, check if they are actually routing too.</p>
									</td>
								</tr>
							</table>

							<h4>Returns:</h4>
							<ol>
								<li><code>nil</code></li>
							</ol>
							<p class="file_comment">defined in ../../Warhammer/working_data/script/_lib/lib_battle_script_unit.lua, line 2980</p>
						</dd>
					</dl>
					<dl class="function">
						<dt>
							<a name="function:script_units:rout_over_time"><h3 class="function_name"><strong><code>script_units:rout_over_time(number </strong></code><i class="parameter">period in ms</i><code><strong>)</code></strong></h3></a>
						</dt>
						<dd>
							Prevents routing units within the collection from rallying, and routs all non-routing units over the specified period in ms so that all units are eventually routing.

							<h4>Parameters:</h4>
							<table class="parameter_list">
								<colgroup>
									<col style="width: 3%;">
									<col style="width: 12%;">
									<col style="width: 85%;">
								</colgroup>
								<tr>
									<td>
										<p><strong>1</strong></p>
									</td>
									<td>
										<p><code>number</code></p>
									</td>
									<td>
										<p>Time in ms over which the units are routed. Must be positive.</p>
									</td>
								</tr>
							</table>

							<h4>Returns:</h4>
							<ol>
								<li><code>nil</code></li>
							</ol>
							<p class="file_comment">defined in ../../Warhammer/working_data/script/_lib/lib_battle_script_unit.lua, line 2989</p>
						</dd>
					</dl>
				</div>


				<div>
					<a style="float:right;" href="#top">Back to top</a>
					<a name="section:script_units:Deployment"><h2 class="section_header">Deployment</h2></a>
				</div>
				<div class="section_body">
					<dl class="function">
						<dt>
							<a name="function:script_units:have_any_deployed"><h3 class="function_name"><strong><code>script_units:have_any_deployed()</code></strong></h3></a>
						</dt>
						<dd>
							Have any of the <code><a href="#class:script_unit">script_unit</a></code> objects in the collection deployed onto the battlefield.


							<h4>Returns:</h4>
							<ol>
								<li><code><code><a href="lua.html#class:boolean">boolean</a></code></code> any deployed</li>
							</ol>
							<p class="file_comment">defined in ../../Warhammer/working_data/script/_lib/lib_battle_script_unit.lua, line 3042</p>
						</dd>
					</dl>
					<dl class="function">
						<dt>
							<a name="function:script_units:have_all_deployed"><h3 class="function_name"><strong><code>script_units:have_all_deployed()</code></strong></h3></a>
						</dt>
						<dd>
							Have all of the <code><a href="#class:script_unit">script_unit</a></code> objects in the collection deployed onto the battlefield.


							<h4>Returns:</h4>
							<ol>
								<li><code><code><a href="lua.html#class:boolean">boolean</a></code></code> all deployed</li>
							</ol>
							<p class="file_comment">defined in ../../Warhammer/working_data/script/_lib/lib_battle_script_unit.lua, line 3058</p>
						</dd>
					</dl>
					<dl class="function">
						<dt>
							<a name="function:script_units:num_deployed"><h3 class="function_name"><strong><code>script_units:num_deployed()</code></strong></h3></a>
						</dt>
						<dd>
							Returns the number of <code><a href="#class:script_unit">script_unit</a></code> objects in the collection that are currently deployed onto the battlefield.


							<h4>Returns:</h4>
							<ol>
								<li><code><code><a href="lua.html#class:number">number</a></code></code> number deployed</li>
							</ol>
							<p class="file_comment">defined in ../../Warhammer/working_data/script/_lib/lib_battle_script_unit.lua, line 3074</p>
						</dd>
					</dl>
					<dl class="function">
						<dt>
							<a name="function:script_units:are_any_active_on_battlefield"><h3 class="function_name"><strong><code>script_units:are_any_active_on_battlefield()</code></strong></h3></a>
						</dt>
						<dd>
							Returns true if any <code><a href="#class:script_unit">script_unit</a></code> in this collection is deployed on the battlefield and not routing or dead.


							<h4>Returns:</h4>
							<ol>
								<li><code><code><a href="lua.html#class:boolean">boolean</a></code></code> any active</li>
							</ol>
							<p class="file_comment">defined in ../../Warhammer/working_data/script/_lib/lib_battle_script_unit.lua, line 3090</p>
						</dd>
					</dl>
				</div>


				<div>
					<a style="float:right;" href="#top">Back to top</a>
					<a name="section:script_units:Movement and Combat Tests"><h2 class="section_header">Movement and Combat Tests</h2></a>
				</div>
				<div class="section_body">
					<dl class="function">
						<dt>
							<a name="function:script_units:have_any_moved"><h3 class="function_name"><strong><code>script_units:have_any_moved([vector </strong></code><i class="parameter">position</i><code><strong>], [distance </strong></code><i class="parameter">threshold distance</i><code><strong>])</code></strong></h3></a>
						</dt>
						<dd>
							Returns true if <code><a href="#function:script_unit:has_moved">script_unit:has_moved</a></code> returns true for any unit in this collection. Call <code><a href="#function:script_unit:cache_location">script_unit:cache_location</a></code>() first to set a position from which each unit's distance is tested.

							<h4>Parameters:</h4>
							<table class="parameter_list">
								<colgroup>
									<col style="width: 3%;">
									<col style="width: 12%;">
									<col style="width: 85%;">
								</colgroup>
								<tr>
									<td>
										<p><strong>1</strong></p>
									</td>
									<td>
										<p><code>vector</code></p>
									</td>
									<td>
										<p><i>optional, default value=nil</i></p>
										<p>Position to test against. May be of limited usefulness when testing multiple units like this.</p>
									</td>
								</tr>
								<tr>
									<td>
										<p><strong>2</strong></p>
									</td>
									<td>
										<p><code>distance</code></p>
									</td>
									<td>
										<p><i>optional, default value=0</i></p>
										<p>Threshold distance in m.</p>
									</td>
								</tr>
							</table>

							<h4>Returns:</h4>
							<ol>
								<li><code><code><a href="lua.html#class:boolean">boolean</a></code></code> have any moved</li>
							</ol>
							<p class="file_comment">defined in ../../Warhammer/working_data/script/_lib/lib_battle_script_unit.lua, line 3120</p>
						</dd>
					</dl>
					<dl class="function">
						<dt>
							<a name="function:script_units:num_moved"><h3 class="function_name"><strong><code>script_units:num_moved([vector </strong></code><i class="parameter">position</i><code><strong>], [distance </strong></code><i class="parameter">threshold distance</i><code><strong>])</code></strong></h3></a>
						</dt>
						<dd>
							Returns the number of units in this collection that have moved when tested with <code><a href="#function:script_unit:has_moved">script_unit:has_moved</a></code>. Call <code><a href="#function:script_unit:cache_location">script_unit:cache_location</a></code>() first to set a position from which each unit's distance is tested.

							<h4>Parameters:</h4>
							<table class="parameter_list">
								<colgroup>
									<col style="width: 3%;">
									<col style="width: 12%;">
									<col style="width: 85%;">
								</colgroup>
								<tr>
									<td>
										<p><strong>1</strong></p>
									</td>
									<td>
										<p><code>vector</code></p>
									</td>
									<td>
										<p><i>optional, default value=nil</i></p>
										<p>Position to test against. May be of limited usefulness when testing multiple units like this.</p>
									</td>
								</tr>
								<tr>
									<td>
										<p><strong>2</strong></p>
									</td>
									<td>
										<p><code>distance</code></p>
									</td>
									<td>
										<p><i>optional, default value=0</i></p>
										<p>Threshold distance in m.</p>
									</td>
								</tr>
							</table>

							<h4>Returns:</h4>
							<ol>
								<li><code><code><a href="lua.html#class:number">number</a></code></code> Number that have moved</li>
							</ol>
							<p class="file_comment">defined in ../../Warhammer/working_data/script/_lib/lib_battle_script_unit.lua, line 3138</p>
						</dd>
					</dl>
					<dl class="function">
						<dt>
							<a name="function:script_units:have_all_moved"><h3 class="function_name"><strong><code>script_units:have_all_moved([vector </strong></code><i class="parameter">position</i><code><strong>], [distance </strong></code><i class="parameter">threshold distance</i><code><strong>])</code></strong></h3></a>
						</dt>
						<dd>
							Returns true if <code><a href="#function:script_unit:has_moved">script_unit:has_moved</a></code> returns true for all units in this collection. Call <code><a href="#function:script_unit:cache_location">script_unit:cache_location</a></code>() first to set a position from which each unit's distance is tested.

							<h4>Parameters:</h4>
							<table class="parameter_list">
								<colgroup>
									<col style="width: 3%;">
									<col style="width: 12%;">
									<col style="width: 85%;">
								</colgroup>
								<tr>
									<td>
										<p><strong>1</strong></p>
									</td>
									<td>
										<p><code>vector</code></p>
									</td>
									<td>
										<p><i>optional, default value=nil</i></p>
										<p>Position to test against. May be of limited usefulness when testing multiple units like this.</p>
									</td>
								</tr>
								<tr>
									<td>
										<p><strong>2</strong></p>
									</td>
									<td>
										<p><code>distance</code></p>
									</td>
									<td>
										<p><i>optional, default value=0</i></p>
										<p>Threshold distance in m.</p>
									</td>
								</tr>
							</table>

							<h4>Returns:</h4>
							<ol>
								<li><code>boolean</code> have all moved</li>
							</ol>
							<p class="file_comment">defined in ../../Warhammer/working_data/script/_lib/lib_battle_script_unit.lua, line 3156</p>
						</dd>
					</dl>
					<dl class="function">
						<dt>
							<a name="function:script_units:are_any_running"><h3 class="function_name"><strong><code>script_units:are_any_running()</code></strong></h3></a>
						</dt>
						<dd>
							Returns true if any <code><a href="#class:script_unit">script_unit</a></code> in this collection is moving fast.


							<h4>Returns:</h4>
							<ol>
								<li><code>boolean</code> any running</li>
							</ol>
							<p class="file_comment">defined in ../../Warhammer/working_data/script/_lib/lib_battle_script_unit.lua, line 3174</p>
						</dd>
					</dl>
					<dl class="function">
						<dt>
							<a name="function:script_units:are_all_running"><h3 class="function_name"><strong><code>script_units:are_all_running()</code></strong></h3></a>
						</dt>
						<dd>
							Returns true if all <code><a href="#class:script_unit">script_unit</a></code> objects in this collection are moving fast.


							<h4>Returns:</h4>
							<ol>
								<li><code>boolean</code> any running</li>
							</ol>
							<p class="file_comment">defined in ../../Warhammer/working_data/script/_lib/lib_battle_script_unit.lua, line 3190</p>
						</dd>
					</dl>
					<dl class="function">
						<dt>
							<a name="function:script_units:is_under_attack"><h3 class="function_name"><strong><code>script_units:is_under_attack()</code></strong></h3></a>
						</dt>
						<dd>
							Returns true if any <code><a href="#class:script_unit">script_unit</a></code> in this collection is under attack (uses <code><a href="#function:script_unit:is_under_attack">script_unit:is_under_attack</a></code>)


							<h4>Returns:</h4>
							<ol>
								<li><code>boolean</code> any under attack</li>
							</ol>
							<p class="file_comment">defined in ../../Warhammer/working_data/script/_lib/lib_battle_script_unit.lua, line 3206</p>
						</dd>
					</dl>
					<dl class="function">
						<dt>
							<a name="function:script_units:is_in_melee"><h3 class="function_name"><strong><code>script_units:is_in_melee()</code></strong></h3></a>
						</dt>
						<dd>
							Returns true if any <code><a href="#class:script_unit">script_unit</a></code> in this collection is in melee combat (uses <code><a href="#function:script_unit:is_in_melee">script_unit:is_in_melee</a></code>).


							<h4>Returns:</h4>
							<ol>
								<li><code>boolean</code> any in melee</li>
							</ol>
							<p class="file_comment">defined in ../../Warhammer/working_data/script/_lib/lib_battle_script_unit.lua, line 3222</p>
						</dd>
					</dl>
					<dl class="function">
						<dt>
							<a name="function:script_units:unary_hitpoints"><h3 class="function_name"><strong><code>script_units:unary_hitpoints([<code><a href="lua.html#class:boolean">boolean</a></code> </strong></code><i class="parameter">shattered considered dead</i><code><strong>])</code></strong></h3></a>
						</dt>
						<dd>
							Returns the average unary hitpoints of all <code><a href="#class:script_unit">script_unit</a></code> objects in this collection.

							<h4>Parameters:</h4>
							<table class="parameter_list">
								<colgroup>
									<col style="width: 3%;">
									<col style="width: 12%;">
									<col style="width: 85%;">
								</colgroup>
								<tr>
									<td>
										<p><strong>1</strong></p>
									</td>
									<td>
										<p><code><code><a href="lua.html#class:boolean">boolean</a></code></code></p>
									</td>
									<td>
										<p><i>optional, default value=false</i></p>
										<p>Shattered units (or units that have routed and left the field) are considered dead, with 0 hitpoints.</p>
									</td>
								</tr>
							</table>

							<h4>Returns:</h4>
							<ol>
								<li><code><code><a href="lua.html#class:number">number</a></code></code> average hitpoints</li>
							</ol>
							<p class="file_comment">defined in ../../Warhammer/working_data/script/_lib/lib_battle_script_unit.lua, line 3238</p>
						</dd>
					</dl>
					<dl class="function">
						<dt>
							<a name="function:script_units:number_of_enemies_killed"><h3 class="function_name"><strong><code>script_units:number_of_enemies_killed()</code></strong></h3></a>
						</dt>
						<dd>
							Returns the total number of enemies killed by all units in this collection.


							<h4>Returns:</h4>
							<ol>
								<li><code><code><a href="lua.html#class:number">number</a></code></code> total enemies killed</li>
							</ol>
							<p class="file_comment">defined in ../../Warhammer/working_data/script/_lib/lib_battle_script_unit.lua, line 3258</p>
						</dd>
					</dl>
				</div>


				<div>
					<a style="float:right;" href="#top">Back to top</a>
					<a name="section:script_units:Movement and Teleportation"><h2 class="section_header">Movement and Teleportation</h2></a>
				</div>
				<div class="section_body">
					<dl class="function">
						<dt>
							<a name="function:script_units:disordered_teleport"><h3 class="function_name"><strong><code>script_units:disordered_teleport(<br />&emsp;&emsp;<code><a href="battle_vector.html#class:battle_vector">battle_vector</a></code> </strong></code><i class="parameter">target position</i><code><strong>, <br />&emsp;&emsp;<code><a href="lua.html#class:number">number</a></code> </strong></code><i class="parameter">radius in m</i><code><strong>, <br />&emsp;&emsp;[<code><a href="lua.html#class:boolean">boolean</a></code> </strong></code><i class="parameter">release control</i><code><strong>]<br />)</code></strong></h3></a>
						</dt>
						<dd>
							Performs a disordered teleport of all units contained within this collection to within a radius around a position, both supplied. A disordered teleport preserves the current orientation and width of each unit, but teleports them within the radius of the position if they're not already inside.<br />
							The function is intended to assist in transitions between different sections of gameplay within a heavily scripted battle. We may wish for the player to start the latter section with their troops in unformed order, akin to where they were at the end of the previous section, but to ensure that none of the player's forces are too far away from a known position (i.e. where we'd like them to start the latter section of gameplay).<br />
							Script control of the teleported units is automatically released after this function is called.

							<h4>Parameters:</h4>
							<table class="parameter_list">
								<colgroup>
									<col style="width: 3%;">
									<col style="width: 12%;">
									<col style="width: 85%;">
								</colgroup>
								<tr>
									<td>
										<p><strong>1</strong></p>
									</td>
									<td>
										<p><code><code><a href="battle_vector.html#class:battle_vector">battle_vector</a></code></code></p>
									</td>
									<td>
										<p>target position</p>
									</td>
								</tr>
								<tr>
									<td>
										<p><strong>2</strong></p>
									</td>
									<td>
										<p><code><code><a href="lua.html#class:number">number</a></code></code></p>
									</td>
									<td>
										<p>radius in m</p>
									</td>
								</tr>
								<tr>
									<td>
										<p><strong>3</strong></p>
									</td>
									<td>
										<p><code><code><a href="lua.html#class:boolean">boolean</a></code></code></p>
									</td>
									<td>
										<p><i>optional, default value=false</i></p>
										<p>release control</p>
									</td>
								</tr>
							</table>

							<h4>Returns:</h4>
							<ol>
								<li><code>nil</code></li>
							</ol>
							<p class="file_comment">defined in ../../Warhammer/working_data/script/_lib/lib_battle_script_unit.lua, line 3286</p>
						</dd>
					</dl>
				</div>


				<div>
					<a style="float:right;" href="#top">Back to top</a>
					<a name="section:script_units:Respawning"><h2 class="section_header">Respawning</h2></a>
				</div>
				<div class="section_body">
					<dl class="function">
						<dt>
							<a name="function:script_units:respawn_in_start_location"><h3 class="function_name"><strong><code>script_units:respawn_in_start_location([<code><a href="lua.html#class:boolean">boolean</a></code> </strong></code><i class="parameter">only if dead</i><code><strong>], [<code><a href="lua.html#class:boolean">boolean</a></code> </strong></code><i class="parameter">debug output</i><code><strong>])</code></strong></h3></a>
						</dt>
						<dd>
							Respawns the units in the collection at the locations they started the battle. This resets their health, fatigue, casualties and other stats.

							<h4>Parameters:</h4>
							<table class="parameter_list">
								<colgroup>
									<col style="width: 3%;">
									<col style="width: 12%;">
									<col style="width: 85%;">
								</colgroup>
								<tr>
									<td>
										<p><strong>1</strong></p>
									</td>
									<td>
										<p><code><code><a href="lua.html#class:boolean">boolean</a></code></code></p>
									</td>
									<td>
										<p><i>optional, default value=false</i></p>
										<p>Respawn each unit only if it is dead, or if it has routed off the battlefield.</p>
									</td>
								</tr>
								<tr>
									<td>
										<p><strong>2</strong></p>
									</td>
									<td>
										<p><code><code><a href="lua.html#class:boolean">boolean</a></code></code></p>
									</td>
									<td>
										<p><i>optional, default value=false</i></p>
										<p>Produce debug output about which units have been respawned.</p>
									</td>
								</tr>
							</table>

							<h4>Returns:</h4>
							<ol>
								<li><code><code><a href="lua.html#class:number">number</a></code></code> number respawned</li>
							</ol>
							<p class="file_comment">defined in ../../Warhammer/working_data/script/_lib/lib_battle_script_unit.lua, line 3335</p>
						</dd>
					</dl>
				</div>


				<div>
					<a style="float:right;" href="#top">Back to top</a>
					<a name="section:script_units:Changing formation"><h2 class="section_header">Changing formation</h2></a>
				</div>
				<p>Changing formation won't work unless all <code><a href="#class:script_unit">script_unit</a></code> objects in the collection are in the same army (which is recommended anyway).</p>
				<div class="section_body">
					<dl class="function">
						<dt>
							<a name="function:script_units:change_formation"><h3 class="function_name"><strong><code>script_units:change_formation(string </strong></code><i class="parameter">group formation name</i><code><strong>)</code></strong></h3></a>
						</dt>
						<dd>
							Sets all <code><a href="#class:script_unit">script_unit</a></code> objects in the collection into a group formation.<br />
							A list of formations can be found in raw data. Valid entries at time of writing are:<br />
							<ul><li>flanking</li><br />
							<li>generic_directfire_defence</li><br />
							<li>generic_directfire_attack</li><br />
							<li>generic</li><br />
							<li>generic_ranged_protected</li><br />
							<li>generic_melee_heavy</li><br />
							<li>generic_melee_super_heavy</li><br />
							<li>assault_gates_formation</li><br />
							<li>assault_reserves_formation</li><br />
							<li>Multiple Selection Drag Out Land</li><br />
							<li>Multiple Selection Deployable Drag Out Land</li><br />
							<li>single_line</li><br />
							<li>Multiple Selection Naval</li><br />
							<li>Ambush Defence Block</li><br />
							<li>test_melee_forward_simple</li><br />
							<li>test_missile_forward_simple</li><br />
							<li>river_ai_attack</li><br />
							<li>river_ai_attack_narrow</li><br />
							<li>river_ai_stop_and_shoot</li><br />
							<li>river_ai_defend</li><br />
							<li>stop_and_shoot_artillery</li><br />
							<li>stop_and_shoot_ranged_direct</li></ul>

							<h4>Parameters:</h4>
							<table class="parameter_list">
								<colgroup>
									<col style="width: 3%;">
									<col style="width: 12%;">
									<col style="width: 85%;">
								</colgroup>
								<tr>
									<td>
										<p><strong>1</strong></p>
									</td>
									<td>
										<p><code>string</code></p>
									</td>
									<td>
										<p>group formation name</p>
									</td>
								</tr>
							</table>

							<h4>Returns:</h4>
							<ol>
								<li><code>nil</code></li>
							</ol>
							<p class="file_comment">defined in ../../Warhammer/working_data/script/_lib/lib_battle_script_unit.lua, line 3396</p>
						</dd>
					</dl>
				</div>


				<div>
					<a style="float:right;" href="#top">Back to top</a>
					<a name="section:script_units:Visibility"><h2 class="section_header">Visibility</h2></a>
				</div>
				<div class="section_body">
					<dl class="function">
						<dt>
							<a name="function:script_units:is_hidden"><h3 class="function_name"><strong><code>script_units:is_hidden([boolean </strong></code><i class="parameter">all units</i><code><strong>])</code></strong></h3></a>
						</dt>
						<dd>
							Returns true if any <code><a href="#class:script_unit">script_unit</a></code> in this collection is hidden in long grass or trees. If <code>true</code> is supplied as a single argument, then <strong>all</strong> units in the collection must be hidden for the function to return true.

							<h4>Parameters:</h4>
							<table class="parameter_list">
								<colgroup>
									<col style="width: 3%;">
									<col style="width: 12%;">
									<col style="width: 85%;">
								</colgroup>
								<tr>
									<td>
										<p><strong>1</strong></p>
									</td>
									<td>
										<p><code>boolean</code></p>
									</td>
									<td>
										<p><i>optional, default value=false</i></p>
										<p>all units</p>
									</td>
								</tr>
							</table>

							<h4>Returns:</h4>
							<ol>
								<li><code>boolean</code> is hidden</li>
							</ol>
							<p class="file_comment">defined in ../../Warhammer/working_data/script/_lib/lib_battle_script_unit.lua, line 3444</p>
						</dd>
					</dl>
					<dl class="function">
						<dt>
							<a name="function:script_units:is_visible_to_enemy"><h3 class="function_name"><strong><code>script_units:is_visible_to_enemy()</code></strong></h3></a>
						</dt>
						<dd>
							Returns true if any <code><a href="#class:script_unit">script_unit</a></code> in this collection is visible to the enemy, by the rules of the terrain visibility system. Note that a unit can be considered visible by this system but still be hidden in forests.


							<h4>Returns:</h4>
							<ol>
								<li><code>boolean</code> is visible</li>
							</ol>
							<p class="file_comment">defined in ../../Warhammer/working_data/script/_lib/lib_battle_script_unit.lua, line 3473</p>
						</dd>
					</dl>
				</div>


				<div>
					<a style="float:right;" href="#top">Back to top</a>
					<a name="section:script_units:Reinforcement Behaviour"><h2 class="section_header">Reinforcement Behaviour</h2></a>
				</div>
				<div class="section_body">
					<dl class="function">
						<dt>
							<a name="function:script_units:deploy_at_random_intervals"><h3 class="function_name"><strong><code>script_units:deploy_at_random_intervals(<br />&emsp;&emsp;<code><a href="lua.html#class:number">number</a></code> </strong></code><i class="parameter">min units</i><code><strong>, <br />&emsp;&emsp;<code><a href="lua.html#class:number">number</a></code> </strong></code><i class="parameter">max units</i><code><strong>, <br />&emsp;&emsp;<code><a href="lua.html#class:number">number</a></code> </strong></code><i class="parameter">min period</i><code><strong>, <br />&emsp;&emsp;<code><a href="lua.html#class:number">number</a></code> </strong></code><i class="parameter">max period</i><code><strong>, <br />&emsp;&emsp;[<code><a href="lua.html#class:boolean">boolean</a></code> </strong></code><i class="parameter">debug out</i><code><strong>], <br />&emsp;&emsp;[<code><a href="lua.html#class:boolean">boolean</a></code> </strong></code><i class="parameter">spawn immediately</i><code><strong>], <br />&emsp;&emsp;[<code><a href="lua.html#class:boolean">boolean</a></code> </strong></code><i class="parameter">allow respawning</i><code><strong>], <br />&emsp;&emsp;[<code><a href="lua.html#class:function">function</a></code> </strong></code><i class="parameter">new wave callback</i><code><strong>]<br />)</code></strong></h3></a>
						</dt>
						<dd>
							Deploys the units in this collection onto the battlefield in randomly-sized, randomly-timed batches. Units must have been scripted to not deploy automatically before this is called. Arguments can be used to influence the size and timing of the batches of units.

							<h4>Parameters:</h4>
							<table class="parameter_list">
								<colgroup>
									<col style="width: 3%;">
									<col style="width: 12%;">
									<col style="width: 85%;">
								</colgroup>
								<tr>
									<td>
										<p><strong>1</strong></p>
									</td>
									<td>
										<p><code><code><a href="lua.html#class:number">number</a></code></code></p>
									</td>
									<td>
										<p>Minimum size of random unit batch. Must be postive.</p>
									</td>
								</tr>
								<tr>
									<td>
										<p><strong>2</strong></p>
									</td>
									<td>
										<p><code><code><a href="lua.html#class:number">number</a></code></code></p>
									</td>
									<td>
										<p>Maximum size of random unit batch. Must be positive, and not less than the supplied min units value.</p>
									</td>
								</tr>
								<tr>
									<td>
										<p><strong>3</strong></p>
									</td>
									<td>
										<p><code><code><a href="lua.html#class:number">number</a></code></code></p>
									</td>
									<td>
										<p>Minimum time period between the arrival of batches in ms. Must be positive.</p>
									</td>
								</tr>
								<tr>
									<td>
										<p><strong>4</strong></p>
									</td>
									<td>
										<p><code><code><a href="lua.html#class:number">number</a></code></code></p>
									</td>
									<td>
										<p>Maximum time period between the arrival of batches in ms. Must be positive, and not less than the supplied minimum period.</p>
									</td>
								</tr>
								<tr>
									<td>
										<p><strong>5</strong></p>
									</td>
									<td>
										<p><code><code><a href="lua.html#class:boolean">boolean</a></code></code></p>
									</td>
									<td>
										<p><i>optional, default value=false</i></p>
										<p>Supply true to turn on debug output.</p>
									</td>
								</tr>
								<tr>
									<td>
										<p><strong>6</strong></p>
									</td>
									<td>
										<p><code><code><a href="lua.html#class:boolean">boolean</a></code></code></p>
									</td>
									<td>
										<p><i>optional, default value=false</i></p>
										<p>Spawns the first wave immediately.</p>
									</td>
								</tr>
								<tr>
									<td>
										<p><strong>7</strong></p>
									</td>
									<td>
										<p><code><code><a href="lua.html#class:boolean">boolean</a></code></code></p>
									</td>
									<td>
										<p><i>optional, default value=false</i></p>
										<p>Allows units to be respawned and deployed again.</p>
									</td>
								</tr>
								<tr>
									<td>
										<p><strong>8</strong></p>
									</td>
									<td>
										<p><code><code><a href="lua.html#class:function">function</a></code></code></p>
									</td>
									<td>
										<p><i>optional, default value=nil</i></p>
										<p>Callback to call when a new wave in deployed. A <code><a href="lua.html#class:table">table</a></code> containing a list of <code><a href="#class:script_unit">script_unit</a></code> objects representing the units being deployed will be passed to the callback when it is called.</p>
									</td>
								</tr>
							</table>

							<h4>Returns:</h4>
							<ol>
								<li><code>nil</code></li>
							</ol>
							<p class="file_comment">defined in ../../Warhammer/working_data/script/_lib/lib_battle_script_unit.lua, line 3498</p>
						</dd>
					</dl>
					<dl class="function">
						<dt>
							<a name="function:script_units:cancel_deploy_at_random_intervals"><h3 class="function_name"><strong><code>script_units:cancel_deploy_at_random_intervals()</code></strong></h3></a>
						</dt>
						<dd>
							Cancels/stops a running process started with <code><a href="#function:script_units:deploy_at_random_intervals">script_units:deploy_at_random_intervals</a></code>.


							<h4>Returns:</h4>
							<ol>
								<li><code>nil</code></li>
							</ol>
							<p class="file_comment">defined in ../../Warhammer/working_data/script/_lib/lib_battle_script_unit.lua, line 3638</p>
						</dd>
					</dl>
				</div>


				<div>
					<a style="float:right;" href="#top">Back to top</a>
					<a name="section:script_units:Kill Aura"><h2 class="section_header">Kill Aura</h2></a>
				</div>
				<div class="section_body">
					<dl class="function">
						<dt>
							<a name="function:script_units:start_kill_aura"><h3 class="function_name"><strong><code>script_units:start_kill_aura(script_units </strong></code><i class="parameter">target sunits</i><code><strong>, number </strong></code><i class="parameter">range</i><code><strong>, [number </strong></code><i class="parameter">casualties proportion</i><code><strong>])</code></strong></h3></a>
						</dt>
						<dd>
							Activates a kill aura around these units that cause a specified enemy/other <code><a href="#class:script_units">script_units</a></code> to take casualties when they come within a specified range. Only one kill aura process may be active on a scriptunit at a time.

							<h4>Parameters:</h4>
							<table class="parameter_list">
								<colgroup>
									<col style="width: 3%;">
									<col style="width: 12%;">
									<col style="width: 85%;">
								</colgroup>
								<tr>
									<td>
										<p><strong>1</strong></p>
									</td>
									<td>
										<p><code>script_units</code></p>
									</td>
									<td>
										<p>Target <code><a href="#class:script_units">script_units</a></code> collection.</p>
									</td>
								</tr>
								<tr>
									<td>
										<p><strong>2</strong></p>
									</td>
									<td>
										<p><code>number</code></p>
									</td>
									<td>
										<p>Range in m at which the enemy <code><a href="#class:script_units">script_units</a></code> begin to take casualties.</p>
									</td>
								</tr>
								<tr>
									<td>
										<p><strong>3</strong></p>
									</td>
									<td>
										<p><code>number</code></p>
									</td>
									<td>
										<p><i>optional, default value=0.02</i></p>
										<p>Proportion of casualties taken per second. This should be specified as a unary proportion of the unit's initial strength, so the default value of 0.02 represents 2% of the initial strength per second.</p>
									</td>
								</tr>
							</table>

							<h4>Returns:</h4>
							<ol>
								<li><code>nil</code></li>
							</ol>
							<p class="file_comment">defined in ../../Warhammer/working_data/script/_lib/lib_battle_script_unit.lua, line 3657</p>
						</dd>
					</dl>
					<dl class="function">
						<dt>
							<a name="function:script_units:stop_kill_aura"><h3 class="function_name"><strong><code>script_units:stop_kill_aura()</code></strong></h3></a>
						</dt>
						<dd>
							Stops the kill aura started on this collection with <code><a href="#function:script_units:start_kill_aura">script_units:start_kill_aura</a></code>.


							<h4>Returns:</h4>
							<ol>
								<li><code>nil</code></li>
							</ol>
							<p class="file_comment">defined in ../../Warhammer/working_data/script/_lib/lib_battle_script_unit.lua, line 3704</p>
						</dd>
					</dl>
				</div>


				<div>
					<a style="float:right;" href="#top">Back to top</a>
					<a name="section:script_units:Attack Enemy Scriptunits"><h2 class="section_header">Attack Enemy Scriptunits</h2></a>
				</div>
				<div class="section_body">
					<dl class="function">
						<dt>
							<a name="function:script_units:attack_enemy_scriptunits"><h3 class="function_name"><strong><code>script_units:attack_enemy_scriptunits(script_units </strong></code><i class="parameter">enemy script_units</i><code><strong>, [boolean </strong></code><i class="parameter">should run</i><code><strong>])</code></strong></h3></a>
						</dt>
						<dd>
							Instructs this scriptunits collection to attack another, acting entirely under script control. This is best used for a close-quarters scripted engagement where no AI randomness or maneouvring is desired.

							<h4>Parameters:</h4>
							<table class="parameter_list">
								<colgroup>
									<col style="width: 3%;">
									<col style="width: 12%;">
									<col style="width: 85%;">
								</colgroup>
								<tr>
									<td>
										<p><strong>1</strong></p>
									</td>
									<td>
										<p><code>script_units</code></p>
									</td>
									<td>
										<p>enemy script_units</p>
									</td>
								</tr>
								<tr>
									<td>
										<p><strong>2</strong></p>
									</td>
									<td>
										<p><code>boolean</code></p>
									</td>
									<td>
										<p><i>optional, default value=false</i></p>
										<p>should run</p>
									</td>
								</tr>
							</table>

							<h4>Returns:</h4>
							<ol>
								<li><code>nil</code></li>
							</ol>
							<p class="file_comment">defined in ../../Warhammer/working_data/script/_lib/lib_battle_script_unit.lua, line 3723</p>
						</dd>
					</dl>
					<dl class="function">
						<dt>
							<a name="function:script_units:stop_attack_enemy_scriptunits"><h3 class="function_name"><strong><code>script_units:stop_attack_enemy_scriptunits()</code></strong></h3></a>
						</dt>
						<dd>
							Stops an attack process started with <code><a href="#function:script_units:attack_enemy_scriptunits">script_units:attack_enemy_scriptunits</a></code>.


							<h4>Returns:</h4>
							<ol>
								<li><code>nil</code></li>
							</ol>
							<p class="file_comment">defined in ../../Warhammer/working_data/script/_lib/lib_battle_script_unit.lua, line 3875</p>
						</dd>
					</dl>
				</div>


				<div>
					<a style="float:right;" href="#top">Back to top</a>
					<a name="section:script_units:Highlighting Unit Cards"><h2 class="section_header">Highlighting Unit Cards</h2></a>
				</div>
				<div class="section_body">
					<dl class="function">
						<dt>
							<a name="function:script_units:highlight_unit_cards"><h3 class="function_name"><strong><code>script_units:highlight_unit_cards(<br />&emsp;&emsp;boolean </strong></code><i class="parameter">should highlight</i><code><strong>, <br />&emsp;&emsp;[number </strong></code><i class="parameter">pulse strength</i><code><strong>], <br />&emsp;&emsp;[boolean </strong></code><i class="parameter">force highlight</i><code><strong>]<br />)</code></strong></h3></a>
						</dt>
						<dd>
							Pulses a highlight effect on all the unit cards associated with this scriptunits collection, using <code><a href="#function:script_unit:highlight_unit_card">script_unit:highlight_unit_card</a></code>.

							<h4>Parameters:</h4>
							<table class="parameter_list">
								<colgroup>
									<col style="width: 3%;">
									<col style="width: 12%;">
									<col style="width: 85%;">
								</colgroup>
								<tr>
									<td>
										<p><strong>1</strong></p>
									</td>
									<td>
										<p><code>boolean</code></p>
									</td>
									<td>
										<p>Set to <code>true</code> to turn the highlight effect on, <code>false</code> to turn it off.</p>
									</td>
								</tr>
								<tr>
									<td>
										<p><strong>2</strong></p>
									</td>
									<td>
										<p><code>number</code></p>
									</td>
									<td>
										<p><i>optional, default value=5</i></p>
										<p>Sets the strength of the pulse effect. A higher supplied value leads to a more pronounced pulse effect. The default value is 5.</p>
									</td>
								</tr>
								<tr>
									<td>
										<p><strong>3</strong></p>
									</td>
									<td>
										<p><code>boolean</code></p>
									</td>
									<td>
										<p><i>optional, default value=false</i></p>
										<p>Overrides the disabling of help page highlighting with <code><a href="battle_ui_manager.html#function:battle_ui_manager:set_help_page_link_highlighting_permitted">battle_ui_manager:set_help_page_link_highlighting_permitted</a></code>. Set this to true if the script explicitly wants to highlight the UI cards when help page link highlighting is disabled (useful in tutorials).</p>
									</td>
								</tr>
							</table>

							<h4>Returns:</h4>
							<ol>
								<li><code>nil</code></li>
							</ol>
							<p class="file_comment">defined in ../../Warhammer/working_data/script/_lib/lib_battle_script_unit.lua, line 3897</p>
						</dd>
					</dl>
				</div>


				<div>
					<a style="float:right;" href="#top">Back to top</a>
					<a name="section:script_units:Serialised Army State"><h2 class="section_header">Serialised Army State</h2></a>
				</div>
				<p>The functions in this section allow scripts to save or apply a serialised state from the <code><a href="scriptedvalueregistry.html#class:scriptedvalueregistry">scriptedvalueregistry</a></code>, across campaign and battle. This allows battle script to apply health values to units that were set in campaign, or vice-versa. This is chiefly useful for scripted battles that are launched from campaign but are logically actually nothing to do with that campaign, such as a tutorial battle xml loaded from a campaign as if it was a campaign-generated battle. Using this functionality the battle scripts would be able to spoof the approximate health of the army as if it were coming from campaign, and then pass it back to campaign on battle completion.</p>
				<p>Campaign scripts can use <code><a href="../campaign/campaign_manager.html#function:campaign_manager:save_army_state_to_svr">campaign_manager:save_army_state_to_svr</a></code> and <code><a href="../campaign/campaign_manager.html#function:campaign_manager:load_army_state_from_svr">campaign_manager:load_army_state_from_svr</a></code> to save and load army states, and in battle <code><a href="#function:script_units:save_state_to_svr">script_units:save_state_to_svr</a></code> and <code><a href="#function:script_units:load_state_from_svr">script_units:load_state_from_svr</a></code> can be used to do the same.</p>
				<p>Note that at present this only serialises the health state of units and not their experience, items carried etc.</p>
				<div class="section_body">
					<dl class="function">
						<dt>
							<a name="function:script_units:serialise_state"><h3 class="function_name"><strong><code>script_units:serialise_state()</code></strong></h3></a>
						</dt>
						<dd>
							Returns a <code><a href="lua.html#class:string">string</a></code> which represents the serialised state of this script_units collection. This does not embody the full model state of the units but only selected information. It is mainly intended for use by <code><a href="#function:script_units:save_state_to_svr">script_units:save_state_to_svr</a></code> which will save the returned string into the scripted value registry. This string can then be loaded by <code><a href="../campaign/campaign_manager.html#function:campaign_manager:load_army_state_from_svr">campaign_manager:load_army_state_from_svr</a></code>, allowing campaign scripts to spoof the results from a scripted battle that occurs mid-campaign flow.


							<h4>Returns:</h4>
							<ol>
								<li><code><code><a href="lua.html#class:string">string</a></code></code> serialised state</li>
							</ol>
							<p class="file_comment">defined in ../../Warhammer/working_data/script/_lib/lib_battle_script_unit.lua, line 3925</p>
						</dd>
					</dl>
					<dl class="function">
						<dt>
							<a name="function:script_units:save_state_to_svr"><h3 class="function_name"><strong><code>script_units:save_state_to_svr(<code><a href="lua.html#class:string">string</a></code> </strong></code><i class="parameter">name</i><code><strong>)</code></strong></h3></a>
						</dt>
						<dd>
							Saves a <code><a href="lua.html#class:string">string</a></code> which represents the serialised state of this script_units collection to the scripted value registry. <code><a href="#function:script_units:serialise_state">script_units:serialise_state</a></code> is used to generate the state string, and <code><a href="core.html#function:core:svr_save_string">core:svr_save_string</a></code> is used to save the string. This is for use by scripts that wish to pass the state of an army, usually at the end of a battle, from battle script to campaign script, usually so that the latter can spoof the battle results in script. The function <code><a href="../campaign/campaign_manager.html#function:campaign_manager:load_army_state_from_svr">campaign_manager:load_army_state_from_svr</a></code> can be used on the campaign-side to load the values saved by this string.

							<h4>Parameters:</h4>
							<table class="parameter_list">
								<colgroup>
									<col style="width: 3%;">
									<col style="width: 12%;">
									<col style="width: 85%;">
								</colgroup>
								<tr>
									<td>
										<p><strong>1</strong></p>
									</td>
									<td>
										<p><code><code><a href="lua.html#class:string">string</a></code></code></p>
									</td>
									<td>
										<p>Name for this svr entry, to be passed to <code><a href="core.html#function:core:svr_save_string">core:svr_save_string</a></code>.</p>
									</td>
								</tr>
							</table>

							<h4>Returns:</h4>
							<ol>
								<li><code>nil</code></li>
							</ol>
							<p class="file_comment">defined in ../../Warhammer/working_data/script/_lib/lib_battle_script_unit.lua, line 3947</p>
						</dd>
					</dl>
					<dl class="function">
						<dt>
							<a name="function:script_units:load_state_from_svr"><h3 class="function_name"><strong><code>script_units:load_state_from_svr(<code><a href="lua.html#class:string">string</a></code> </strong></code><i class="parameter">name</i><code><strong>, [<code><a href="lua.html#class:boolean">boolean</a></code> </strong></code><i class="parameter">allow partial</i><code><strong>])</code></strong></h3></a>
						</dt>
						<dd>
							Checks for a <code><a href="scriptedvalueregistry.html#class:scriptedvalueregistry">scriptedvalueregistry</a></code> string with the supplied name, and attempts to apply the health values it contains to the units in this script_units collection. These svr strings would be set by either <code><a href="../campaign/campaign_manager.html#function:campaign_manager:save_army_state_to_svr">campaign_manager:save_army_state_to_svr</a></code> in campaign or <code><a href="#function:script_units:save_state_to_svr">script_units:save_state_to_svr</a></code> in battle.<br />
							This is primarily intended to spoof casualties on a battle army that is coming from campaign, but where the army in battle is not logically related to that campaign army (for example, when loading from a campaign into a scripted xml battle).<br />
							The function returns whether the application was successful. A successful application is one that modifies all units in the script_units collection (a "modification" from 100% health to 100% health would count), unless the <code>allow_partial</code> flag is set, in which case even a partial application would be considered successful. If the application is not successful then no changes are applied. Output is generated in all cases.

							<h4>Parameters:</h4>
							<table class="parameter_list">
								<colgroup>
									<col style="width: 3%;">
									<col style="width: 12%;">
									<col style="width: 85%;">
								</colgroup>
								<tr>
									<td>
										<p><strong>1</strong></p>
									</td>
									<td>
										<p><code><code><a href="lua.html#class:string">string</a></code></code></p>
									</td>
									<td>
										<p>Name of string saved in the <code><a href="scriptedvalueregistry.html#class:scriptedvalueregistry">scriptedvalueregistry</a></code>.</p>
									</td>
								</tr>
								<tr>
									<td>
										<p><strong>2</strong></p>
									</td>
									<td>
										<p><code><code><a href="lua.html#class:boolean">boolean</a></code></code></p>
									</td>
									<td>
										<p><i>optional, default value=false</i></p>
										<p>Allow a partial application of the state string. If this is set to <code>true</code then the application will be successful even if not all sunits in this collection end up being touched.</p>
									</td>
								</tr>
							</table>

							<h4>Returns:</h4>
							<ol>
								<li><code><code><a href="lua.html#class:boolean">boolean</a></code></code> state was applied successfully</li>
							</ol>
							<p class="file_comment">defined in ../../Warhammer/working_data/script/_lib/lib_battle_script_unit.lua, line 3962</p>
						</dd>
					</dl>
				</div>


			</div>

		</div>

		<div id="about">Last updated 12/08/2022 11:56:58</div>

	</div>

	<script src="../searchdata.js"></script>
	<script src="../search.js"></script>
	<script>const page_env = "battle"; const path_to_document_root = "../";</script>

</body>
</html>