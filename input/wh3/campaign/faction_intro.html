<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
<head>
	<title>Faction Intro</title>
	<link rel="stylesheet" href="../stylesheet.css" type="text/css" />
</head>

<body>

	<a name="top"></a>

	<div id="container">

		<div style="background-color:#fff7cc" id="main">

			<div style="background-color:#fff7cc" id="navigation_left">
				<br/>
				<h1 class="navigation_header"><i>Campaign Documentation</i></h1>
				<a href="../index.html">Scripting Homepage</a>
				<h2 style="background-color:#ffed8c">Search</h2>
				<ul>
				<form id="search_env_checkbox" class="search_env_checkbox">
					<label for="search_current_env_only">Search campaign only</label>
					<input type="checkbox" name="search_current_env_only" checked /><br />
				</form>
				<form id="search" class="search_form" onsubmit="return false">
					<input class="search_input" type="text" placeholder="Search.."/><br />
					<div id="search_dropdown" class="search_dropdown"></div>
				</form>				<h2 style="background-color:#ffed8c">Game Areas</h2>
				<ul>
					<li><strong> > Campaign Index</strong></li>
					<li><a href="../battle/battle_index.html">Battle Index</a></li>
					<li><a href="../frontend/frontend_index.html">Frontend Index</a></li>
				</ul>

				<h2 style="background-color:#ffed8c">On this page</h2>
				<ul>
				<div class="key">
					<strong>Key</strong>
					<table class="key">
						<tr>
							<td width="75%">Loaded in Campaign</td>
							<td><img alt="Loaded in Campaign" style="float:right;" src="../images/loaded_in_campaign.png" height="10" width="10" /></td>
						</tr>
						<tr>
							<td width="75%">Loaded in Battle</td>
							<td><img alt="Loaded in Battle" style="float:right;" src="../images/loaded_in_battle.png" height="10" width="10" /></td>
						</tr>
						<tr>
							<td width="75%">Loaded in Frontend</td>
							<td><img alt="Loaded in Frontend" style="float:right;" src="../images/loaded_in_frontend.png" height="10" width="10" /></td>
						</tr>
						</table>
				</div>
					<li><a href="#class:faction_intro">Faction Intro</a><img alt="Loaded in Campaign" style="float:right; margin-right:1em;" src="../images/loaded_in_campaign.png" height="10" width="10" /></li>
					<ul>
						<li>&emsp;&emsp;<a href="#section:faction_intro:How to Use">How to Use</a></li>
						<li>&emsp;&emsp;<a href="#section:faction_intro:Faction Intro Presets">Faction Intro Presets</a></li>
						<li>&emsp;&emsp;<a href="#section:faction_intro:Variants">Variants</a></li>
						<li>&emsp;&emsp;<a href="#section:faction_intro:Faction Intro Cutscene Configurators">Faction Intro Cutscene Configurators</a></li>
						<li>&emsp;&emsp;<a href="#section:faction_intro:Faction Intro Cutscene Styles">Faction Intro Cutscene Styles</a></li>
							<li>&emsp;&emsp;&emsp;&emsp;<a href="#function:faction_intro:perform_intro">perform_intro</a></li>
					</ul>

				</ul>
			</div>

			<div style="background-color:#fff7cc" id="navigation_right">				<h2 style="background-color:#ffed8c">Campaign Topics</h2>
				<ul>
					<li><a href="campaign_index.html">Campaign Index</a></li>
					<li><a href="campaign_script_structure.html">Campaign Script Structure</a></li>
					<li><a href="lua.html">Lua Language</a></li>
					<li><a href="narrative_system.html">Narrative System</a></li>
					<li><a href="scripted_events.html">Scripted Events</a></li>

				</ul>

				<h2 style="background-color:#ffed8c">Game Code Interfaces</h2>
				<ul>
					<li><a href="campaignui.html">CampaignUI</a></li>
					<li><a href="cinematics.html">Cinematics</a></li>
					<li><a href="common.html">Common</a></li>
					<li><a href="episodic_scripting.html">Episodic Scripting</a></li>
					<li><a href="model_hierarchy.html">Model Hierarchy</a></li>
					<li><a href="scriptedvalueregistry.html">ScriptedValueRegistry</a></li>
					<li><a href="uicomponent.html">UIComponents</a></li>

				</ul>

				<h2 style="background-color:#ffed8c">Script Interfaces</h2>
				<ul>
					<li><a href="campaign_manager.html">Campaign Manager</a></li>
					<li><a href="core.html">Core</a></li>
					<li><a href="campaign_cutscene.html">Campaign Cutscenes</a></li>
					<li><a href="campaign_ui_manager.html">Campaign UI Manager</a></li>
					<li><a href="chapter_mission.html">Chapter Missions</a></li>
					<li><a href="convex_area.html">Convex Areas</a></li>
					<li><a href="global.html">Global</a></li>
					<li><a href="infotext_manager.html">Infotext Manager</a></li>
					<li><a href="intervention.html">Interventions</a></li>
					<li><a href="invasion_manager.html">Invasion Manager</a></li>
					<li><a href="mission_manager.html">Mission Managers</a></li>
					<li><a href="movie_overlay.html">Movie Overlays</a></li>
					<li><a href="narrative_event.html">Narrative Events</a></li>
					<li><a href="navigable_tour.html">Navigable Tours</a></li>
					<li><a href="objectives_manager.html">Objectives Manager</a></li>
					<li><a href="payload.html">Payload String Constructor</a></li>
					<li><a href="random_army_manager.html">Random Army Manager</a></li>
					<li><a href="script_messager.html">Script Messager</a></li>
					<li><a href="scripted_tour.html">Scripted Tours</a></li>
					<li><a href="text_pointer.html">Text Pointers</a></li>
					<li><a href="timer_manager.html">Timer Manager</a></li>
					<li><a href="topic_leader.html">Topic Leader</a></li>
					<li><a href="unique_table.html">Unique Table</a></li>
					<li><a href="validate.html">Validate</a></li>

				</ul>

				<h2 style="background-color:#ffed8c">Data Interfaces</h2>
				<ul>
					<li><a href="custom_starts.html">Campaign Custom Starts</a></li>
					<li><strong> > Faction Intro</strong></li>
					<li><a href="narrative.html">Narrative</a></li>
					<li><a href="narrative_events.html">Narrative Event Templates</a></li>
					<li><a href="narrative_queries.html">Narrative Query Templates</a></li>
					<li><a href="narrative_triggers.html">Narrative Trigger Templates</a></li>

				</ul>

				</ul>
			</div>

			<div id="content">
				<a name="class:faction_intro"><h1 class="content_header">Faction Intro</h1></a>
				<p>Provides the system used to define the cutscenes and start-of-game dressing that fires for a given faction, in a given campaign, and under other conditions.</p>
				<p>Faction Intro data is defined in the folder of each campaign, under a 'faction_intro' folder. Multiple faction intros can be defined, and will be merged together, allowing for mod compatibility.</p>
				<p>The Faction Intro system allows an inherited 'preset' system. For example, if lots of factions share the same intro cutscene, that cutscene could be defined as a preset, with each faction intro inheriting from that preset. If one of those factions also had different potential leaders, requiring different advisor voice lines or a different camera position for each one, then that can be defined with variant tables.</p>
							<table class="loaded_in" style="margin-top: 1em;">
								<tr>
									<td>
										Loaded in Campaign
									</td>
									<td>
										<img alt="Loaded in Campaign" style="float:right;" src="../images/loaded_in_campaign.png" height="18" width="18" />
									</td>
								</tr>
								<tr>
									<td>
										Loaded in Battle
									</td>
									<td>
										<img alt="Loaded in Battle" style="float:right;" src="../images/loaded_in_battle.png" height="18" width="18" />
									</td>
								</tr>
								<tr>
									<td>
										Loaded in Frontend
									</td>
									<td>
										<img alt="Loaded in Frontend" style="float:right;" src="../images/loaded_in_frontend.png" height="18" width="18" />
									</td>
								</tr>
							</table>

				<div>
					<a style="float:right;" href="#top">Back to top</a>
					<a name="section:faction_intro:How to Use"><h2 class="section_header">How to Use</h2></a>
				</div>
				<p>To create your own set of faction-intro data for a given campaign, create a faction_intro folder under that campaign's script folder. e.g. <code>script/campaign/main_warhammer/faction_intro/</code></p>
				<p>Scripts placed in this folder must define campaign-intro data, such as initial camera positions and cutscenes. These scripts can have any names, and multiple can be used. The Faction Intro system will load them all and merge them together.</p>
				<p>The scripts must take the following structure:</p>

				<h4>Example:</h4>
					An example of a faction intro Lua file.
				<div id="example_code"><code>
					 local data = {<br />
					 &emsp;&emsp;&emsp;&emsp;-- Load order defines the order in which each of these tables is loaded, with later loads overwriting the elements of earlier ones.<br />
					 &emsp;&emsp;&emsp;&emsp;-- If this isn't defined, a script will always load last.<br />
					 &emsp;&emsp;&emsp;&emsp;-- If two scripts have an equal load-order, the order becomes alphabetical, based on script name.<br />
					 &emsp;&emsp;&emsp;&emsp;load_order = 0,<br />
					 &emsp;&emsp;&emsp;&emsp;-- A list of functions used to define how a faction's variant might be inferred. A typical example would be determining if we're playing as Karl Franz or Volkmar the Grimm.<br />
					 &emsp;&emsp;&emsp;&emsp;variant_key_getters = {<br />
					 &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;-- ...<br />
					 &emsp;&emsp;&emsp;&emsp;},<br />
					 &emsp;&emsp;&emsp;&emsp;-- You can use presets to define bits of intro data which are used by lots of factions.<br />
					 &emsp;&emsp;&emsp;&emsp;intro_presets = {<br />
					 &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;theatre_empire = {<br />
					 &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;cam_gameplay_start = {<br />
					 &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;x = 402,<br />
					 &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;y = 497,<br />
					 &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;d = 29,<br />
					 &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;b = 0,<br />
					 &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;h = 67,<br />
					 &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;}<br />
					 &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;},<br />
					 &emsp;&emsp;&emsp;&emsp;},<br />
					 }<br />
					 <br />
					 -- This table provides the actual intro data for each faction.<br />
					 -- Best practise is to define these after you've defined the initial data table, so that you can reference the contents of the data table (including presets)<br />
					 data.faction_intros = {<br />
					 &emsp;&emsp;&emsp;&emsp;-- The most simple way to define a faction intro, without using any fancy presets.<br />
					 &emsp;&emsp;&emsp;&emsp;wh2_main_lzd_hexoatl = faction_intro_data:new{<br />
					 &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;cam_gameplay_start = {<br />
					 &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;x = 402,<br />
					 &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;y = 497,<br />
					 &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;d = 29,<br />
					 &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;b = 0,<br />
					 &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;h = 67,<br />
					 &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;},<br />
					 &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;advice_to_play = {<br />
					 &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;"war.camp.prelude.lzd.intro.005",<br />
					 &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;"war.camp.prelude.lzd.intro.006",<br />
					 &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;"war.camp.prelude.lzd.intro.007",<br />
					 &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;"war.camp.prelude.lzd.intro.008",<br />
					 &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;},<br />
					 &emsp;&emsp;&emsp;&emsp;},<br />
					 &emsp;&emsp;&emsp;&emsp;-- The Golden Order inherits the Empire Theatre preset's camera position, but defines its own advice lines.<br />
					 &emsp;&emsp;&emsp;&emsp;wh2_dlc13_emp_golden_order = faction_intro_data:new{<br />
					 &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;preset = data.intro_presets.theatre_empire,<br />
					 &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;advice_to_play = {<br />
					 &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;"war.camp.prelude.emp.intro.005",<br />
					 &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;"war.camp.prelude.emp.intro.006",<br />
					 &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;"war.camp.prelude.emp.intro.007",<br />
					 &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;"war.camp.prelude.emp.intro.008",<br />
					 &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;},<br />
					 &emsp;&emsp;&emsp;&emsp;},<br />
					 &emsp;&emsp;&emsp;&emsp;wh_main_emp_empire = {<br />
					 &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;preset = data.intro_presets.theatre_empire,<br />
					 &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;-- You can also override data from the preset.<br />
					 &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;cam_gameplay_start = {<br />
					 &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;x = 352,<br />
					 &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;y = 486,<br />
					 &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;d = 17,<br />
					 &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;b = 0,<br />
					 &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;h = 14,<br />
					 &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;},<br />
					 &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;-- These are 'variants' for cases where a faction's intro data might differ in certain cases (if it has two possible leaders, for example).<br />
					 &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;-- The key provided by the 'variant_key_getters' list decides which of these is used.<br />
					 &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;wh_main_emp_karl_franz = faction_intro_data:new{<br />
					 &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;advice_to_play = {<br />
					 &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;"war.camp.prelude.emp.intro.001",<br />
					 &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;"war.camp.prelude.emp.intro.002",<br />
					 &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;"war.camp.prelude.emp.intro.003",<br />
					 &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;"war.camp.prelude.emp.intro.004",<br />
					 &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;},<br />
					 &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;},<br />
					 &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;wh_dlc04_emp_volkmar = faction_intro_data:new{<br />
					 &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;advice_to_play = {<br />
					 &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;"dlc04.camp.Volk.intro.001",<br />
					 &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;"dlc04.camp.Volk.intro.002",<br />
					 &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;"dlc04.camp.Volk.intro.003",<br />
					 &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;"dlc04.camp.Volk.intro.004",<br />
					 &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;},<br />
					 &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;},<br />
					 &emsp;&emsp;&emsp;&emsp;},<br />
					 &emsp;&emsp;&emsp;&emsp;<br />
					 },<br />
					 return data<br />
				</code></div>
				<div class="section_body">
				</div>


				<div>
					<a style="float:right;" href="#top">Back to top</a>
					<a name="section:faction_intro:Faction Intro Presets"><h2 class="section_header">Faction Intro Presets</h2></a>
				</div>
				<p>A preset is a template of faction intro data which other tables can inherit from. If all factions in a given culture need to use the same introductory cutscene, for example, it can be defined on a preset. Then each faction's <code>preset</code> entry can be set to the <code><a href="lua.html#class:string">string</a></code> key of that preset.</p>
				<p>Presets are defiend in a faction intro data file and, as with the faction intro definitions themselves, can be re-defined or overriden in multiple files, allowing for mod compatibility.</p>
				<div class="section_body">
				</div>


				<div>
					<a style="float:right;" href="#top">Back to top</a>
					<a name="section:faction_intro:Variants"><h2 class="section_header">Variants</h2></a>
				</div>
				<p>Variants allow a particular faction to have multiple possible introduction data sets.</p>
				<p>The trigger to use either one variant or another is user-defined: it might use the faction's starting-lord, as a way of handling cases where a faction can be lead by different leaders.</p>
				<p>Or it might play different voice lines and cutscenes based on the game's difficulty.</p>
				<p>Variant triggers must be defined using the <code>faction_intro.variant_key_getters</code> table.</p>

				<h4>Example - Variant Key Getter Example:</h4>
					In this example, we construct a variant key using the quantity of players in the game, which is used to adjust the advisor voicelines.
				<div id="example_code"><code>
					 local data = {<br />
					 &emsp;&emsp;&emsp;&emsp;-- Conditions by which a faction can provide a variant key are defined here. You may want to use the presence of a given effect bundle as a reason to have a particular intro to play, for example.<br />
					 &emsp;&emsp;&emsp;&emsp;-- Criteria are executed in priority of first to last: if an earlier getter is satisfied and provides a non-nil variant key, then later getters will not be consulted.<br />
					 &emsp;&emsp;&emsp;&emsp;variant_key_getters = {<br />
					 &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;function(faction_interface)<br />
					 &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;local variant_key = nil<br />
					 &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;local player_count = #cm:get_human_factions()<br />
					 &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;if player_count > 2 then<br />
					 &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;variant_key = "players_3_plus"<br />
					 &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;else<br />
					 &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;variant_key = "players_" .. player_count<br />
					 &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;end<br />
					 &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;<br />
					 &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;return variant_key<br />
					 &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;end<br />
					 &emsp;&emsp;&emsp;&emsp;},<br />
					 &emsp;&emsp;&emsp;&emsp;intro_data = {<br />
					 &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;main_warhammer = {<br />
					 &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;wh2_main_def_naggarond = {<br />
					 &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;cam_gameplay_start = {<br />
					 &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;x = 352,<br />
					 &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;y = 486,<br />
					 &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;d = 17,<br />
					 &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;b = 0,<br />
					 &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;h = 14,<br />
					 &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;},<br />
					 &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;players_1 = faction_intro_data:new{<br />
					 &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;advice_to_play = {<br />
					 &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;"war.camp.prelude.naggarond.singleplayer.001",<br />
					 &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;"war.camp.prelude.naggarond.singleplayer.002",<br />
					 &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;},<br />
					 &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;},<br />
					 &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;players_2 = faction_intro_data:new{<br />
					 &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;advice_to_play = {<br />
					 &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;"war.camp.prelude.naggarond.twoplayer.001",<br />
					 &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;"war.camp.prelude.naggarond.twoplayer.002",<br />
					 &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;},<br />
					 &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;},<br />
					 &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;players_3_plus = faction_intro_data:new{<br />
					 &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;advice_to_play = {<br />
					 &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;"war.camp.prelude.naggarond.multiplayer.001",<br />
					 &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;"war.camp.prelude.naggarond.multiplayer.002",<br />
					 &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;},<br />
					 &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;},<br />
					 &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;} <br />
					 &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;}<br />
					 &emsp;&emsp;&emsp;&emsp;}<br />
					 }<br />
					 return data<br />
				</code></div>
				<div class="section_body">
				</div>


				<div>
					<a style="float:right;" href="#top">Back to top</a>
					<a name="section:faction_intro:Faction Intro Cutscene Configurators"><h2 class="section_header">Faction Intro Cutscene Configurators</h2></a>
				</div>
				<p>If you want to define complicated custom routines for the intro cutscene, you can specify the <code>cutscene_configurator</code> on the faction intro.</p>
				<p>This is a function which takes a <code>cutscene</code> and makes adjustments to it before the cutscene is called.</p>

				<h4>Example - Cutscene Configurator Example:</h4>
					Creating a custom flyby routine for Hexoatl.
				<div id="example_code"><code>
					 data.faction_intros = {<br />
					 &emsp;&emsp;&emsp;&emsp;wh2_main_lzd_hexoatl = faction_intro_data:new{<br />
					 &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;cam_gameplay_start = {<br />
					 &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;x = 402,<br />
					 &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;y = 497,<br />
					 &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;d = 29,<br />
					 &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;b = 0,<br />
					 &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;h = 67,<br />
					 &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;},<br />
					 &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;cutscene_configurator = function(cutscene)<br />
					 &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;-- Start at location, fade in, zoom in, play advice line, and restore UI.<br />
					 &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;cutscene:set_relative_mode(true)<br />
					 &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;cutscene:action_fade_scene(0, 1, 2)<br />
					 &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;cutscene:action_override_ui_visibility(0, false, data.map_ui)<br />
					 &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;cutscene:action_set_camera_position(0, {11, 614, 20.705231, 0.0, 65.031822})<br />
					 &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;cutscene:action_scroll_camera_to_position(1, 8, true, {11, 614, 6.965149, 0.0, 8.008892})<br />
					 &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;cutscene:action_show_advice(6, "wh3_flyby_dummy_KF")<br />
					 &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;cutscene:action_override_ui_visibility(7, true, data.map_ui)<br />
					 &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;cutscene:action_end_cutscene(0)<br />
					 &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;end,<br />
					 &emsp;&emsp;&emsp;&emsp;},<br />
					 },<br />
				</code></div>
				<div class="section_body">
				</div>


				<div>
					<a style="float:right;" href="#top">Back to top</a>
					<a name="section:faction_intro:Faction Intro Cutscene Styles"><h2 class="section_header">Faction Intro Cutscene Styles</h2></a>
				</div>
				<p>If lots of your cutscenes for each faction are basically the same, but with slight differences, you can create a <code>cutscene style</code>.</p>
				<p>A cutscene style is a function which returns a <code>cutscene configurator</code> (which itself returns a cutscene ...). It takes a 'self' parameter (self being the faction intro config table).</p>
				<p>For example, maybe we want to use the config's <code>cam_gameplay_start</code> variable as a waypoint for our camera in all of our cutscenes.</p>

				<h4>Example - Cutscene Style Example:</h4>
					Creating a zoom-in-and-speak cutscene style that uses positions and advice keys defined on the faction intro config.
				<div id="example_code"><code>
					 data.cutscene_styles = {<br />
					 &emsp;&emsp;&emsp;&emsp;zoom_in_and_speak = function(self)<br />
					 &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;local new_configurator = function(cutscene)<br />
					 &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;cutscene:set_relative_mode(true)<br />
					 &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;cutscene:action_fade_scene(0, 1, 2)<br />
					 &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;-- Use variables from the config table to inform our cutscene.<br />
					 &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;cutscene:action_set_camera_position(0, { self.cam_cutscene_start.x, self.cam_cutscene_start.y, self.cam_cutscene_start.d, self.cam_cutscene_start.b, self.cam_cutscene_start.h })<br />
					 &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;cutscene:action_scroll_camera_to_position(1, 8, true, { self.cam_gameplay_start.x, self.cam_gameplay_start.y, self.cam_gameplay_start.d, self.cam_gameplay_start.b, self.cam_gameplay_start.h })<br />
					 &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;cutscene:action_show_advice(6, self.advice_line)<br />
					 &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;cutscene:action_end_cutscene(0)<br />
					 &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;end<br />
					 <br />
					 &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;return new_configurator<br />
					 &emsp;&emsp;&emsp;&emsp;end&emsp;&emsp;&emsp;&emsp;<br />
					 }<br />
					 <br />
					 data.faction_intros = {<br />
					 &emsp;&emsp;&emsp;&emsp;wh2_main_def_har_ganeth = faction_intro_data:new{<br />
					 &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;preset = data.intro_presets.standard,<br />
					 &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;cam_cutscene_start = {<br />
					 &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;x = 134,<br />
					 &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;y = 641,<br />
					 &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;d = 20.705231,<br />
					 &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;b = 0.0,<br />
					 &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;h = 65.031822,<br />
					 &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;},<br />
					 &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;cam_gameplay_start = {<br />
					 &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;x = 134, <br />
					 &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;y = 641,<br />
					 &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;d = 6.965149,<br />
					 &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;b = 0,<br />
					 &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;h = 8.008892,<br />
					 &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;},<br />
					 &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;advice_line = "wh3_flyby_dummy_KF",<br />
					 &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;cutscene_style = data.cutscene_styles.zoom_in_and_speak<br />
					 &emsp;&emsp;&emsp;&emsp;}<br />
					 }<br />
				</code></div>
				<div class="section_body">
					<dl class="function">
						<dt>
							<a name="function:faction_intro:perform_intro"><h3 class="function_name"><strong><code>faction_intro:perform_intro(<code><a href="lua.html#class:string">string</a></code> </strong></code><i class="parameter">campaign_folder_name</i><code><strong>, <code><a href="lua.html#class:string">string</a></code> </strong></code><i class="parameter">faction_key</i><code><strong>)</code></strong></h3></a>
						</dt>
						<dd>
							Perform the start-of-campaign dressing for the specified faction within the specified campaign, playing advisor lines, cutscenes, etc.<br />
							All playable factions ought to have an intro definition table (even a blank one). If it's missing, an error will be thrown.

							<h4>Parameters:</h4>
							<table class="parameter_list">
								<colgroup>
									<col style="width: 3%;">
									<col style="width: 12%;">
									<col style="width: 85%;">
								</colgroup>
								<tr>
									<td>
										<p><strong>1</strong></p>
									</td>
									<td>
										<p><code><code><a href="lua.html#class:string">string</a></code></code></p>
									</td>
									<td>
										<p>The folder from which the campaign's faction intro data should be loaded. This needs to match the folder name from which the campaign's specific scripts are loaded.</p>
									</td>
								</tr>
								<tr>
									<td>
										<p><strong>2</strong></p>
									</td>
									<td>
										<p><code><code><a href="lua.html#class:string">string</a></code></code></p>
									</td>
									<td>
										<p>The faction for which we want to perform the intro, from the <code>factions</code> database table.</p>
									</td>
								</tr>
							</table>

							<h4>Returns:</h4>
							<ol>
								<li><code>nil</code></li>
							</ol>
							<p class="file_comment">defined in ../../Warhammer/working_data/script/campaign/faction_intro.lua, line 268</p>
						</dd>
					</dl>
				</div>


			</div>

		</div>

		<div id="about">Last updated 12/08/2022 11:56:58</div>

	</div>

	<script src="../searchdata.js"></script>
	<script src="../search.js"></script>
	<script>const page_env = "campaign"; const path_to_document_root = "../";</script>

</body>
</html>